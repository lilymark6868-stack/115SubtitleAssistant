// ==UserScript==
// @name         115Master
// @namespace    115Master
// @version      1.6.1
// @author       lilymark6868-stack
// @description  115网盘魔法优化: 画质增强 | 视频缩略图 | 在线字幕
// @license      MIT
// @icon         https://115.com/favicon.ico
// @homepage     https://github.com/lilymark6868-stack/115SubtitleAssistant
// @homepageURL  https://github.com/lilymark6868-stack/115SubtitleAssistant
// @source       https://github.com/lilymark6868-stack/115SubtitleAssistant.git
// @supportURL   https://github.com/lilymark6868-stack/115SubtitleAssistant/issues
// @downloadURL  https://raw.githubusercontent.com/lilymark6868-stack/115SubtitleAssistant/v1.0/115master.user.js
// @updateURL    https://raw.githubusercontent.com/lilymark6868-stack/115SubtitleAssistant/v1.0/115master.meta.js
// @include      https://115.com/?ct*
// @include      https://115.com/web/lixian/master/video/*
// @include      https://115.com/web/lixian/master/magnet/*
// @include      https://115.com/?aid*
// @include      https://dl.115cdn.net/video/token
// @include      https://f.115.com/storage/netdisk*
// @exclude      https://*.115.com/bridge*
// @exclude      https://*.115.com/static*
// @exclude      https://q.115.com/*
// @require      https://fastly.jsdelivr.net/npm/vue@3.5.13/dist/vue.global.prod.js
// @require      https://fastly.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js
// @require      https://fastly.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js
// @require      https://fastly.jsdelivr.net/npm/big-integer@1.6.52/BigInteger.min.js
// @require      data:application/javascript,%3Bwindow.bigInt%3DbigInt%3B
// @require      https://fastly.jsdelivr.net/npm/blueimp-md5@2.19.0/js/md5.min.js
// @require      https://fastly.jsdelivr.net/npm/dayjs@1.11.13/dayjs.min.js
// @require      data:application/javascript,%3Bwindow.dayjs%3Ddayjs%3B
// @require      https://fastly.jsdelivr.net/npm/hls.js@1.5.20/dist/hls.min.js
// @require      https://fastly.jsdelivr.net/npm/m3u8-parser@7.2.0/dist/m3u8-parser.min.js
// @require      https://fastly.jsdelivr.net/npm/photoswipe@5.4.4/dist/umd/photoswipe.umd.min.js
// @require      data:application/javascript,%3Bwindow.photoswipe%3DPhotoSwipe%3B
// @require      https://fastly.jsdelivr.net/npm/photoswipe@5.4.4/dist/umd/photoswipe-lightbox.umd.min.js
// @require      data:application/javascript,%3Bwindow.PhotoSwipeLightbox%3DPhotoSwipeLightbox%3B
// @require      https://cdn.jsdelivr.net/npm/systemjs@6.15.1/dist/system.min.js
// @require      https://cdn.jsdelivr.net/npm/systemjs@6.15.1/dist/extras/named-register.min.js
// @require      data:application/javascript,%3B(typeof%20System!%3D'undefined')%26%26(System%3Dnew%20System.constructor())%3B
// @resource     icon  https://115.com/favicon.ico
// @connect      115.com
// @connect      f.115.com
// @connect      115vod.com
// @connect      aps.115.com
// @connect      webapi.115.com
// @connect      proapi.115.com
// @connect      cpats01.115.com
// @connect      dl.115cdn.net
// @connect      cdnfhnfile.115cdn.net
// @connect      v.anxia.com
// @connect      subtitlecat.com
// @connect      api.sub-dog.top
// @connect      javbus.com
// @connect      javdb.com
// @connect      jdbstatic.com
// @connect      missav.ws
// @grant        GM_addStyle
// @grant        GM_cookie
// @grant        GM_getValue
// @grant        GM_info
// @grant        GM_notification
// @grant        GM_openInTab
// @grant        GM_setValue
// @grant        GM_xmlhttpRequest
// @grant        unsafeWindow
// @grant        window.close
// @run-at       document-start
// ==/UserScript==

(o=>{if(typeof GM_addStyle=="function"){GM_addStyle(o);return}const t=document.createElement("style");t.textContent=o,document.head.append(t)})(" /*! PhotoSwipe main CSS by Dmytro Semenov | photoswipe.com */.pswp{--pswp-bg: #000;--pswp-placeholder-bg: #222;--pswp-root-z-index: 100000;--pswp-preloader-color: rgba(79, 79, 79, .4);--pswp-preloader-color-secondary: rgba(255, 255, 255, .9);--pswp-icon-color: #fff;--pswp-icon-color-secondary: #4f4f4f;--pswp-icon-stroke-color: #4f4f4f;--pswp-icon-stroke-width: 2px;--pswp-error-text-color: var(--pswp-icon-color)}.pswp{position:fixed;top:0;left:0;width:100%;height:100%;z-index:var(--pswp-root-z-index);display:none;touch-action:none;outline:0;opacity:.003;contain:layout style size;-webkit-tap-highlight-color:rgba(0,0,0,0)}.pswp:focus{outline:0}.pswp *{box-sizing:border-box}.pswp img{max-width:none}.pswp--open{display:block}.pswp,.pswp__bg{transform:translateZ(0);will-change:opacity}.pswp__bg{opacity:.005;background:var(--pswp-bg)}.pswp,.pswp__scroll-wrap{overflow:hidden}.pswp__scroll-wrap,.pswp__bg,.pswp__container,.pswp__item,.pswp__content,.pswp__img,.pswp__zoom-wrap{position:absolute;top:0;left:0;width:100%;height:100%}.pswp__img,.pswp__zoom-wrap{width:auto;height:auto}.pswp--click-to-zoom.pswp--zoom-allowed .pswp__img{cursor:-webkit-zoom-in;cursor:-moz-zoom-in;cursor:zoom-in}.pswp--click-to-zoom.pswp--zoomed-in .pswp__img{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.pswp--click-to-zoom.pswp--zoomed-in .pswp__img:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.pswp--no-mouse-drag.pswp--zoomed-in .pswp__img,.pswp--no-mouse-drag.pswp--zoomed-in .pswp__img:active,.pswp__img{cursor:-webkit-zoom-out;cursor:-moz-zoom-out;cursor:zoom-out}.pswp__container,.pswp__img,.pswp__button,.pswp__counter{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pswp__item{z-index:1;overflow:hidden}.pswp__hidden{display:none!important}.pswp__content{pointer-events:none}.pswp__content>*{pointer-events:auto}.pswp__error-msg-container{display:grid}.pswp__error-msg{margin:auto;font-size:1em;line-height:1;color:var(--pswp-error-text-color)}.pswp .pswp__hide-on-close{opacity:.005;will-change:opacity;transition:opacity var(--pswp-transition-duration) cubic-bezier(.4,0,.22,1);z-index:10;pointer-events:none}.pswp--ui-visible .pswp__hide-on-close{opacity:1;pointer-events:auto}.pswp__button{position:relative;display:block;width:50px;height:60px;padding:0;margin:0;overflow:hidden;cursor:pointer;background:none;border:0;box-shadow:none;opacity:.85;-webkit-appearance:none;-webkit-touch-callout:none}.pswp__button:hover,.pswp__button:active,.pswp__button:focus{transition:none;padding:0;background:none;border:0;box-shadow:none;opacity:1}.pswp__button:disabled{opacity:.3;cursor:auto}.pswp__icn{fill:var(--pswp-icon-color);color:var(--pswp-icon-color-secondary)}.pswp__icn{position:absolute;top:14px;left:9px;width:32px;height:32px;overflow:hidden;pointer-events:none}.pswp__icn-shadow{stroke:var(--pswp-icon-stroke-color);stroke-width:var(--pswp-icon-stroke-width);fill:none}.pswp__icn:focus{outline:0}div.pswp__img--placeholder,.pswp__img--with-bg{background:var(--pswp-placeholder-bg)}.pswp__top-bar{position:absolute;left:0;top:0;width:100%;height:60px;display:flex;flex-direction:row;justify-content:flex-end;z-index:10;pointer-events:none!important}.pswp__top-bar>*{pointer-events:auto;will-change:opacity}.pswp__button--close{margin-right:6px}.pswp__button--arrow{position:absolute;width:75px;height:100px;top:50%;margin-top:-50px}.pswp__button--arrow:disabled{display:none;cursor:default}.pswp__button--arrow .pswp__icn{top:50%;margin-top:-30px;width:60px;height:60px;background:none;border-radius:0}.pswp--one-slide .pswp__button--arrow{display:none}.pswp--touch .pswp__button--arrow{visibility:hidden}.pswp--has_mouse .pswp__button--arrow{visibility:visible}.pswp__button--arrow--prev{right:auto;left:0}.pswp__button--arrow--next{right:0}.pswp__button--arrow--next .pswp__icn{left:auto;right:14px;transform:scaleX(-1)}.pswp__button--zoom{display:none}.pswp--zoom-allowed .pswp__button--zoom{display:block}.pswp--zoomed-in .pswp__zoom-icn-bar-v{display:none}.pswp__preloader{position:relative;overflow:hidden;width:50px;height:60px;margin-right:auto}.pswp__preloader .pswp__icn{opacity:0;transition:opacity .2s linear;animation:pswp-clockwise .6s linear infinite}.pswp__preloader--active .pswp__icn{opacity:.85}@keyframes pswp-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.pswp__counter{height:30px;margin-top:15px;margin-inline-start:20px;font-size:14px;line-height:30px;color:var(--pswp-icon-color);text-shadow:1px 1px 3px var(--pswp-icon-color-secondary);opacity:.85}.pswp--one-slide .pswp__counter{display:none}.list-contents li.with-ext-info{height:auto!important;padding-bottom:12px;flex-wrap:wrap;align-content:flex-start}.list-contents li.with-ext-info .ext-info-root{width:100%;position:relative;display:flex}.list-contents li.with-actress-info{height:auto!important}.list-contents li.with-actress-info .file-type{top:50%;transform:translateY(-50%);transition:none}.list-contents li.with-actress-info .file-name-wrap{display:flex;align-items:center;flex-direction:row;justify-content:flex-start;height:auto!important;padding-top:12px;padding-bottom:12px}.list-contents li.with-actress-info .file-name-wrap .actress-info-img{width:50px;height:50px;border-radius:50%;object-fit:cover;margin-right:12px;border:3px solid #f1f1f1;box-shadow:0 0 5px #0000001a;background-color:#f1f1f1}.list-contents li.with-ext-video-cover{height:auto!important;flex-wrap:wrap;align-content:flex-start;padding-top:0;padding-bottom:12px}.list-contents li.with-ext-video-cover:first-child{padding-top:16px}.list-contents li.with-ext-video-cover .file-name-wrap{margin-bottom:0}.list-contents li.with-ext-video-cover .ext-video-cover-root{width:100%;height:100%;position:relative;display:flex;padding-left:83px}.master-mobile-float-btn{position:fixed;top:12px;right:12px;width:52px;height:52px;display:flex;align-items:center;justify-content:center;background:#000000b8;color:#fff;border-radius:999px;z-index:999999;box-shadow:0 2px 8px #00000040;border:3px solid #83838382;font-size:20px;line-height:1;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;touch-action:none;transform:scale(.8);transition:transform .16s ease,box-shadow .16s ease}.master-mobile-float-btn.expanded{transform:scale(1)}.master-mobile-float-btn .icon{pointer-events:none;filter:invert(0) brightness(1.2)}@media (hover: hover){.master-mobile-float-btn:hover{background:#000000d9}}.master-back-button{display:inline-flex;align-items:center;text-align:center;padding:4px 13px;font-size:12px;border-radius:4px;margin:auto 9px auto -6px;background-color:#f2f4f8;color:#666;vertical-align:middle;flex-shrink:0}.master-back-button:hover{background-color:color-mix(in srgb,var(--official-theme) 10%,transparent 0%);color:var(--office-theme)}.master-back-button:active{background-color:color-mix(in srgb,var(--official-theme) 15%,transparent 0%)}.master-back-button iconify-icon{margin-right:4px;font-size:14px}.master-preview-switch-btn{display:flex;align-items:center;justify-content:center;gap:4px;padding:0;aspect-ratio:1;border-radius:50%}.master-preview-switch-btn iconify-icon{font-size:20px}.master-preview-switch-btn .preview-off{display:block}.master-preview-switch-btn .preview-on{display:none}.master-preview-switch-btn.active .preview-on{display:block;color:var(--official-theme)}.master-preview-switch-btn.active .preview-off{display:none}:root{--official-theme: #2777f8}.user-agent-popup-overlay[data-v-1d0f9c85]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:10000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.popup-main[data-v-1d0f9c85]{padding:0 24px 24px}.user-agent-popup[data-v-1d0f9c85]{background-color:#fff;border-radius:12px;box-shadow:0 10px 30px #0003;width:550px;max-width:90vw;max-height:90vh;overflow:auto;animation:popup-fade-in-1d0f9c85 .3s cubic-bezier(.16,1,.3,1)}.user-agent-popup-header[data-v-1d0f9c85]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eaeaea}.user-agent-popup-header h3[data-v-1d0f9c85]{margin:0;font-size:18px;font-weight:600;color:#333}.close-button[data-v-1d0f9c85]{background:none;border:none;font-size:24px;cursor:pointer;color:#999;padding:0;line-height:1;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button[data-v-1d0f9c85]:hover{color:#333;background-color:#f5f5f5}.popup-content[data-v-1d0f9c85]{margin:24px 0;display:flex;align-items:flex-start;background-color:#f9f9f9;border-radius:8px;padding:16px}.content-icon[data-v-1d0f9c85]{margin-right:16px;color:#2196f3;flex-shrink:0}.number-icon[data-v-1d0f9c85]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background-color:#2196f3;color:#fff;border-radius:50%;font-size:14px;font-weight:600}.content-text[data-v-1d0f9c85]{flex:1}.content-text p[data-v-1d0f9c85]{line-height:1.6;margin:0 0 8px;color:#444}.content-text p[data-v-1d0f9c85]:last-child{margin-bottom:0}.popup-desc[data-v-1d0f9c85]{font-size:14px;color:#666;text-align:center;margin-top:24px}.popup-desc p[data-v-1d0f9c85]{margin:0 0 8px;font-weight:500}.user-agent-box[data-v-1d0f9c85]{background-color:#f5f5f5;border-radius:6px;padding:12px;font-size:12px;color:#666;word-break:break-all;text-align:left;font-family:monospace;border:1px solid #eaeaea}a[data-v-1d0f9c85]{color:#2196f3;text-decoration:none;font-weight:500;transition:color .2s}a[data-v-1d0f9c85]:hover{color:#0d6efd;text-decoration:underline}@keyframes popup-fade-in-1d0f9c85{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.x-popup[data-v-0b8d0da0]>*{position:relative;z-index:1}@keyframes loading-bounce-3365baab{0%,80%,to{transform:scale(0);opacity:.3}40%{transform:scale(1);opacity:1}}.loading-dot-bounce[data-v-3365baab]{animation:loading-bounce-3365baab 1.4s infinite ease-in-out both}.loading-dot-delay-1[data-v-3365baab]{animation-delay:-.32s}.loading-dot-delay-2[data-v-3365baab]{animation-delay:-.16s}.loading-dot-delay-3[data-v-3365baab]{animation-delay:0s}@keyframes fadeOut{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(1.4)}} ");

System.addImportMap({ imports: {"vue":"user:vue","lodash":"user:lodash","localforage":"user:localforage","blueimp-md5":"user:blueimp-md5","big-integer":"user:big-integer","photoswipe/lightbox":"user:photoswipe/lightbox","photoswipe":"user:photoswipe","dayjs":"user:dayjs","m3u8-parser":"user:m3u8-parser","hls.js":"user:hls.js"} });
System.set("user:vue", (()=>{const _=Vue;('default' in _)||(_.default=_);return _})());
System.set("user:lodash", (()=>{const _1=_;('default' in _1)||(_1.default=_1);return _1})());
System.set("user:localforage", (()=>{const _=localforage;('default' in _)||(_.default=_);return _})());
System.set("user:blueimp-md5", (()=>{const _=md5;('default' in _)||(_.default=_);return _})());
System.set("user:big-integer", (()=>{const _=bigInt;('default' in _)||(_.default=_);return _})());
System.set("user:photoswipe/lightbox", (()=>{const _=PhotoSwipeLightbox;('default' in _)||(_.default=_);return _})());
System.set("user:photoswipe", (()=>{const _=photoswipe;('default' in _)||(_.default=_);return _})());
System.set("user:dayjs", (()=>{const _=dayjs;('default' in _)||(_.default=_);return _})());
System.set("user:m3u8-parser", (()=>{const _=m3u8Parser;('default' in _)||(_.default=_);return _})());
System.set("user:hls.js", (()=>{const _=Hls;('default' in _)||(_.default=_);return _})());

System.register("./__entry.js", ['./__monkey.entry-CShvTRci.js'], (function (exports, module) {
	'use strict';
	return {
		setters: [null],
		execute: (function () {



		})
	};
}));

System.register("./__monkey.entry-CShvTRci.js", ['localforage', 'lodash', 'blueimp-md5', 'big-integer', 'vue', 'dayjs', 'photoswipe/lightbox', 'm3u8-parser'], (function (exports, module) {
  'use strict';
  var mt, merge, defer, throttle, Qo, rt, defineComponent, ref, shallowRef, onMounted, watch, onUnmounted, computed, openBlock, createElementBlock, normalizeClass, createBlock, unref, createCommentVNode, createElementVNode, toDisplayString, renderSlot, createVNode, createTextVNode, mergeProps, Fragment, renderList, nextTick, onBeforeUnmount, withModifiers, Teleport, toValue, h, reactive, createApp, getCurrentScope, onScopeDispose, readonly, defineAsyncComponent, isRef, getCurrentInstance, toRef, customRef, toRaw, Ke, oa, Parser;
  return {
    setters: [module => {
      mt = module.default;
    }, module => {
      merge = module.merge;
      defer = module.defer;
      throttle = module.throttle;
    }, module => {
      Qo = module.default;
    }, module => {
      rt = module.default;
    }, module => {
      defineComponent = module.defineComponent;
      ref = module.ref;
      shallowRef = module.shallowRef;
      onMounted = module.onMounted;
      watch = module.watch;
      onUnmounted = module.onUnmounted;
      computed = module.computed;
      openBlock = module.openBlock;
      createElementBlock = module.createElementBlock;
      normalizeClass = module.normalizeClass;
      createBlock = module.createBlock;
      unref = module.unref;
      createCommentVNode = module.createCommentVNode;
      createElementVNode = module.createElementVNode;
      toDisplayString = module.toDisplayString;
      renderSlot = module.renderSlot;
      createVNode = module.createVNode;
      createTextVNode = module.createTextVNode;
      mergeProps = module.mergeProps;
      Fragment = module.Fragment;
      renderList = module.renderList;
      nextTick = module.nextTick;
      onBeforeUnmount = module.onBeforeUnmount;
      withModifiers = module.withModifiers;
      Teleport = module.Teleport;
      toValue = module.toValue;
      h = module.h;
      reactive = module.reactive;
      createApp = module.createApp;
      getCurrentScope = module.getCurrentScope;
      onScopeDispose = module.onScopeDispose;
      readonly = module.readonly;
      defineAsyncComponent = module.defineAsyncComponent;
      isRef = module.isRef;
      getCurrentInstance = module.getCurrentInstance;
      toRef = module.toRef;
      customRef = module.customRef;
      toRaw = module.toRaw;
    }, module => {
      Ke = module.default;
    }, module => {
      oa = module.default;
    }, module => {
      Parser = module.Parser;
    }],
    execute: (function () {

      exports({
        $: $d,
        B: Bd,
        F: Fd,
        H: Hd,
        I: Sd,
        K: Kd,
        M: Dd,
        N: Nd,
        O: Oi,
        R: Rn,
        U: Ud,
        W: Wd,
        X: Xr,
        Z: Md,
        _: _i,
        a: Rd,
        a0: Od,
        b: qc,
        e: el,
        g: qn,
        i: Ai,
        j: jd,
        k: Xd,
        n: yl,
        o: mr,
        q: qi,
        t: tl,
        u: Oa,
        v: X,
        z: zd
      });

      var qo=Object.defineProperty;var Vo=(r,e,t)=>e in r?qo(r,e,{enumerable:true,configurable:true,writable:true,value:t}):r[e]=t;var A=(r,e,t)=>Vo(r,typeof e!="symbol"?e+"":e,t);function Rn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nt,Ir;function ia(){return Ir||(Ir=1,Nt=function(r,e){if(typeof r!="string")throw new TypeError("Expected a string");for(var t=String(r),n="",o=e?!!e.extended:false,a=e?!!e.globstar:false,i=false,s=e&&typeof e.flags=="string"?e.flags:"",l,c=0,u=t.length;c<u;c++)switch(l=t[c],l){case "/":case "$":case "^":case "+":case ".":case "(":case ")":case "=":case "!":case "|":n+="\\"+l;break;case "?":if(o){n+=".";break}case "[":case "]":if(o){n+=l;break}case "{":if(o){i=true,n+="(";break}case "}":if(o){i=false,n+=")";break}case ",":if(i){n+="|";break}n+="\\"+l;break;case "*":for(var d=t[c-1],p=1;t[c+1]==="*";)p++,c++;var h=t[c+1];if(!a)n+=".*";else {var m=p>1&&(d==="/"||d===undefined)&&(h==="/"||h===undefined);m?(n+="((?:[^/]*(?:/|$))*)",c++):n+="([^/]*)";}break;default:n+=l;}return (!s||!~s.indexOf("g"))&&(n="^"+n+"$"),new RegExp(n,s)}),Nt}var sa=ia();const la=Rn(sa),Fe="115.com",ca="webapi.115.com",ua="proapi.115.com",da="115vod.com",pa="aps.115.com",jn="dl.115cdn.net",lt=`https://${Fe}`,ha=`https://${ca}`,fa=`https://${ua}`,hr=`https://${da}`,ma=`https://${pa}`,nt=`https://${jn}`,Me={HOME:`*://${Fe}/?*`,VIDEO:`*://${Fe}/web/lixian/master/video/*`,MAGNET:`*://${Fe}/web/lixian/master/magnet/*`,VIDEO_TOKEN:`*://${jn}/video/token`,MOBILE_HOME:"*://f.115.com/storage/netdisk*"};function Pr(r){const e=top.window.document.querySelector("#js_offline_new_add");e&&(e.value=r??"");}function Un(r){top.window.Core.OFFL5Plug?(top.Core.OFFL5Plug.OpenLink(),Pr(r)):top.$.getScript(__uri("//cdnres.115.com/site/static/plug/offline_wl/offline5.0.js"),()=>{top.Core.OFFL5Plug.AddClient({}),top.window.Core.OFFL5Plug.OpenLink(),Pr(r);});}const fr="magnetTask";function ba(r){sessionStorage.setItem(fr,r);}function ga(){return sessionStorage.getItem(fr)}function va(){sessionStorage.removeItem(fr);}function wa(){const r=ga();r&&(Un(r),va());}function ya(){navigator.registerProtocolHandler("magnet","/web/lixian/master/magnet/?url=%s");}function xa(){window.history.length>1?window.history.back():window.close();}function ka(){const e=new URL(window.location.href).searchParams.get("url");if(!e)return;ba(e),window.open("https://115.com/?cid=0&offset=0&mode=wangpan","_blank","width=1280,height=860")?xa():alert("请设置允许弹出窗口并刷新页面，否则无法打开离线任务页面");}class Xe{}class _a{constructor(e){Object.defineProperty(this,"mods",{enumerable:true,configurable:true,writable:true,value:[]}),this.mods=e;}register(e){this.mods.push(e);}destroy(){this.mods.forEach(e=>{e.destroy();});}}var Aa=typeof GM_addStyle<"u"?GM_addStyle:undefined,Ea=typeof GM_cookie<"u"?GM_cookie:undefined,Ca=typeof GM_getValue<"u"?GM_getValue:undefined,ye=typeof GM_info<"u"?GM_info:undefined,Dt=typeof GM_notification<"u"?GM_notification:undefined,Et=typeof GM_openInTab<"u"?GM_openInTab:undefined,Bn=typeof GM_setValue<"u"?GM_setValue:undefined,Sa=typeof GM_xmlhttpRequest<"u"?GM_xmlhttpRequest:undefined,bt=typeof unsafeWindow<"u"?unsafeWindow:undefined; exports({ y: ye, a2: bt });const Ia={PLAYING_VIDEO_INFO:"playingVideoInfo"};function mr(r,e=false){Bn(Ia.PLAYING_VIDEO_INFO,r);const t=new URLSearchParams({cid:r.cid||"",pick_code:r.pickCode}),n=`https://${Fe}/web/lixian/master/video/?${t.toString()}`;if(e){Et(n,{active:true});return}history.pushState({},"",n);}function Pa(){return (top==null?undefined:top.window.performance.navigation.type)===(top==null?undefined:top.window.performance.navigation.TYPE_RELOAD)}var Vt;(function(r){r.folder="0",r.file="1";})(Vt||(Vt={}));var fe;(function(r){r.Yes="1";})(fe||(fe={}));var ge;(function(r){r.list="list",r.grid="grid";})(ge||(ge={}));const Ta=undefined,La="https://fastly.jsdelivr.net",zn={UNKNOWN_ERROR:"未知错误",CANNOT_VIDEO_COVER_WITHOUT_TRANSCODING:"视频未转码，无法获取封面"}; exports({ T: Ta, a1: La, C: zn });function Oa(r){const t=r.replace(/^\[?(\w+\.)+[A-Z]+\]?@?/gi,"").replace(/\.\w+$/,"").replace(/[\u4E00-\u9FA5]/g,"").replace(/[\u3040-\u309F\u30A0-\u30FF]/g,"").replace(/BDRIP|HDR/gi,"").replace(/@\w+@/,"").replace(/share_\w{32}/,""),n=[{name:"FC2系列",pattern:/fc2\D*(\d{6,7})/i,format:o=>`FC2-PPV-${o[1]}`},{name:"HEYZO系列",pattern:/heyzo\D*(\d{4})/i,format:o=>`HEYZO-${o[1]}`},{name:"麻豆系列",pattern:/(mdx|mky|md)\D*(\d{3,4})/i,format:o=>{const a=o[1].toUpperCase(),i=t.toLowerCase().includes("ns");return `${a}${i?"-NS":""}-${o[2]}`}},{name:"一本道系列 or Pacopacomama or 10musume系列",pattern:/(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])(\d{2})([\s|_]*)(\d{2,3})/,format:o=>o[0].replace(/\s|_/g,"_")},{name:"Heydouga系列",pattern:/heydouga[\s|-](\d{4})[\s|-]*(\d{3,4})/i,format:o=>`${o[1]}-${o[2]}`},{name:"加勒比系列",pattern:/(?:carib|caribbean)\D*(\d{3})\D*(\d{3})/i,format:o=>`CARIB-${o[1]}-${o[2]}`},{name:"东京热系列",pattern:/tokyo\D*hot\D*([a-z])(\d{4})/i,format:o=>`TOKYO-HOT-${o[1].toUpperCase()}${o[2]}`},{name:"特殊格式：字母数字混合",pattern:/([a-z]+\d{1,2})-(\d{3})/i,format:o=>`${o[1].toUpperCase()}-${o[2]}`},{name:"标准格式：字母-数字",pattern:/(?:^|[^a-z])([a-z]{2,5})-?(\d{2,5})(?:c|-c)?(?:[^a-z]|$)/i,format:o=>`${o[1].toUpperCase()}-${o[2]}`}];for(const{pattern:o,format:a}of n){const i=t.match(o);if(i)return a(i)}return null}function Sd(r,e,t){const n=r-r%e+e/2;return Math.max(0,Math.min(n,t))}function Ma(r){if(!r)return 0;const[e=0,t=0,n=0]=r.split(":").map(Number).reverse();return n*3600+t*60+e}class Na{constructor(e,t,n,o){Object.defineProperty(this,"itemNode",{enumerable:true,configurable:true,writable:true,value:e}),Object.defineProperty(this,"fileListType",{enumerable:true,configurable:true,writable:true,value:t}),Object.defineProperty(this,"listScrollBoxNode",{enumerable:true,configurable:true,writable:true,value:n}),Object.defineProperty(this,"mods",{enumerable:true,configurable:true,writable:true,value:o}),Object.defineProperty(this,"loadedMods",{enumerable:true,configurable:true,writable:true,value:[]});}get attributes(){return Object.fromEntries(Array.from(this.itemNode.attributes).map(e=>[e.name,e.value]))}get avNumber(){return Oa(this.attributes.title)}get durationNode(){return this.itemNode.querySelector(".duration")??null}get duration(){var e;return Ma(((e=this.durationNode)==null?undefined:e.getAttribute("duration"))??"")}get itemInfo(){return {avNumber:this.avNumber,attributes:this.attributes,fileListType:this.fileListType,duration:this.duration,listScrollBoxNode:this.listScrollBoxNode}}async load(){this.mods.forEach(e=>{const t=new e(this.itemNode,this.itemInfo);t.IS_PLUS||(t.load(),this.loadedMods.push(t));});}destroy(){this.loadedMods.forEach(e=>{e.destroy();});}}const br="115master_cache",Da=.8,Ra=10,ja="meta";class Ua{constructor(e=br,t="cache"){Object.defineProperty(this,"storage",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"storeName",{enumerable:true,configurable:true,writable:true,value:undefined}),this.name=e,this.storeName=t,this.storage=mt.createInstance({name:this.name,storeName:ja,version:1,description:"缓存元数据",driver:mt.INDEXEDDB});}async updateMeta(e,t,n,o){try{const a=this.generateFullKey(e),i=Date.now(),s=await this.getMeta(e),l={key:e,fullKey:a,storeName:this.storeName,lastAccessed:i,createdAt:n??(s==null?void 0:s.createdAt)??i,updatedAt:o??i};t!==void 0?l.size=t:(s==null?void 0:s.size)!==void 0&&(l.size=s.size),await this.storage.setItem(a,l);}catch(a){console.error("更新缓存元数据失败:",a);}}async getMeta(e){const t=this.generateFullKey(e);return await this.storage.getItem(t)}async removeMeta(e){const t=this.generateFullKey(e);await this.storage.removeItem(t);}async getAllMeta(){const e=[];return await this.storage.iterate(t=>{t.storeName===this.storeName&&e.push(t);}),e}async getSortedByLastAccessed(e=true){return (await this.getAllMeta()).sort((n,o)=>e?n.lastAccessed-o.lastAccessed:o.lastAccessed-n.lastAccessed)}async clear(){const e=await this.getAllMeta();for(const t of e)await this.storage.removeItem(t.fullKey);}async getCreatedAt(e){const t=await this.getMeta(e);return t==null?undefined:t.createdAt}async getUpdatedAt(e){const t=await this.getMeta(e);return t==null?undefined:t.updatedAt}async getSortedByCreatedAt(e=true){return (await this.getAllMeta()).sort((n,o)=>e?n.createdAt-o.createdAt:o.createdAt-n.createdAt)}async getSortedByUpdatedAt(e=true){return (await this.getAllMeta()).sort((n,o)=>e?n.updatedAt-o.updatedAt:o.updatedAt-n.updatedAt)}generateFullKey(e){return `${this.storeName}:${e}`}}class Ba{constructor(e,t,n){Object.defineProperty(this,"metaStore",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"cacheInstance",{enumerable:true,configurable:true,writable:true,value:undefined}),this.cacheInstance=e,this.metaStore=new Ua(t,n);}async getStorageUsage(){var e;if((e=navigator.storage)!=null&&e.estimate){const t=await navigator.storage.estimate(),n=t.usage||0,o=t.quota||0,a=o>0?n/o:0;return {usage:n,quota:o,usageRatio:a}}return {usage:0,quota:0,usageRatio:0}}async shouldCleanup(){const{usageRatio:e}=await this.getStorageUsage();return e>Da}async cleanup(e=Ra){if(!await this.shouldCleanup())return [];const n=await this.metaStore.getSortedByLastAccessed(true);if(n.length===0)return [];const o=n.slice(0,e),a=[];for(const i of o)try{await this.cacheInstance.remove(i.key),await this.metaStore.removeMeta(i.key),a.push(i.key);}catch(s){console.error(`清理缓存项 ${i.key} 失败:`,s);}return console.warn(`已清理 ${a.length} 个旧缓存项`),a}async recordAccess(e,t,n,o){await this.metaStore.updateMeta(e,t,n,o);}async recordRemoval(e){await this.metaStore.removeMeta(e);}async clearAllMeta(){await this.metaStore.clear();}async autoCleanup(){return await this.shouldCleanup()?(await this.cleanup()).length>0:false}}class Ae{constructor(e={}){Object.defineProperty(this,"storage",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"quotaManager",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"enableQuotaManagement",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"storeName",{enumerable:true,configurable:true,writable:true,value:undefined});const{enableQuotaManagement:t=true,...n}=e;this.name=n.name||br,this.storeName=n.storeName||"cache",this.storage=mt.createInstance({name:this.name,storeName:this.storeName,version:1,description:"cache",driver:mt.INDEXEDDB,...n}),this.enableQuotaManagement=t,this.quotaManager=new Ba(this,this.name,this.storeName);}async get(e){const t=await this.storage.getItem(e);return t&&this.enableQuotaManagement&&await this.quotaManager.recordAccess(e,t.size),t}async set(e,t){try{let n;this.enableQuotaManagement&&(n=this.estimateSize(t,e));const o=Date.now(),a=await this.storage.getItem(e),i={value:t,...n!==void 0?{size:n}:{},createdAt:(a==null?void 0:a.createdAt)||o,updatedAt:o};await this.storage.setItem(e,i),this.enableQuotaManagement&&(await this.quotaManager.recordAccess(e,n,i.createdAt,i.updatedAt),await this.quotaManager.autoCleanup());}catch(n){n instanceof DOMException&&n.name==="QuotaExceededError"?(console.error("缓存失败: 超出配额"),this.enableQuotaManagement&&(await this.quotaManager.cleanup()).length>0&&await this.set(e,t)):console.error("缓存失败:",n);}}async remove(e){await this.storage.removeItem(e),this.enableQuotaManagement&&await this.quotaManager.recordRemoval(e);}async clear(){await this.storage.clear(),this.enableQuotaManagement&&await this.quotaManager.clearAllMeta();}getQuotaManager(){return this.quotaManager}async getCreatedAt(e){const t=await this.storage.getItem(e);return t==null?undefined:t.createdAt}async getUpdatedAt(e){const t=await this.storage.getItem(e);return t==null?undefined:t.updatedAt}async getAge(e){const t=await this.getCreatedAt(e);if(t!==undefined)return Date.now()-t}async getFreshness(e){const t=await this.getUpdatedAt(e);if(t!==undefined)return Date.now()-t}estimateSize(e,t){try{if(e instanceof Blob)return e.size;if(Array.isArray(e)&&e.length>0&&e[0]instanceof Blob)return e.reduce((o,a)=>a instanceof Blob?o+a.size:o,0);const n=JSON.stringify(e);return new Blob([n]).size}catch(n){console.warn(`无法估算缓存项 ${t} 的大小:`,n);return}}}const za="actress_face_json_cache";class $a extends Ae{constructor(){super({storeName:za});}async getActressData(){const e=await this.get("actress_data");return e?e.value:null}async saveActressData(e,t){await this.set("actress_data",{imageMap:e,timestamp:t});}async getLastUpdateTime(){const e=await this.getActressData();return e?e.timestamp:-1}}const Rt=new $a,$n=`${La}/gh/gfriends/gfriends@latest`,Fa=`${$n}/Filetree.json`;class xe{constructor(){Object.defineProperty(this,"imageMap",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"lastUpdateTime",{enumerable:true,configurable:true,writable:true,value:-1}),Object.defineProperty(this,"updateTimer",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"initPromise",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"isInit",{enumerable:true,configurable:true,writable:true,value:false}),this.imageMap=new Map,this.updateTimer=null;}async init(){if(this.isInit){await this.initPromise;return}this.isInit=true;const e=new Promise(async t=>{this.lastUpdateTime=await Rt.getLastUpdateTime(),await this.loadFromCache(),await this.checkUpdate()&&await this.updateDB(),t(this);});this.initPromise=e,await e;}async updateDB(){try{Dt("️正在更新头像数据库...");const e=await fetch(xe.API_URL);if(!e.ok)throw new Error(e.status.toString());const t=await e.json();await this.processAndSaveData(t),Dt("✅ 头像数据库更新完成");}catch(e){throw Dt(`❌ 更新头像数据库失败 ${e instanceof Error?e.message:"未知错误"}`),console.error("更新头像数据库失败:",e),e}}async checkUpdate(){return Date.now()-this.lastUpdateTime>=xe.CACHE_DURATION}async findActress(e){await this.initPromise;const t=this.imageMap.get(e);if(!t)return;const n=t[0];return {...n,url:`${$n}/Content/${n.folder}/${n.filename}`}}getAllActresses(){return this.imageMap}destroy(){this.updateTimer&&(window.clearInterval(this.updateTimer),this.updateTimer=null);}async loadFromCache(){try{const e=await Rt.getActressData();return e&&Date.now()-e.timestamp<xe.CACHE_DURATION?(this.imageMap=new Map(e.imageMap),this.lastUpdateTime=e.timestamp,!0):!1}catch(e){return console.error("从缓存加载数据失败:",e),false}}async processAndSaveData(e){const t=new Map;Object.entries(e.Content).forEach(([n,o])=>{Object.entries(o).forEach(([a,i])=>{const[,s]=i.split("?t="),l=parseInt(s,10),c=a.replace(".jpg",""),u={folder:n,filename:i,timestamp:l},d=t.get(c);d&&(d==null?undefined:d.length)>0?(d.push(u),t.set(c,d)):t.set(c,[u]);});}),this.imageMap=t,this.lastUpdateTime=Date.now(),await Promise.all([Rt.saveActressData(Array.from(t.entries()),this.lastUpdateTime)]);}}Object.defineProperty(xe,"CACHE_DURATION",{enumerable:true,configurable:true,writable:true,value:864e5});Object.defineProperty(xe,"API_URL",{enumerable:true,configurable:true,writable:true,value:Fa});const Tr=new xe;class Ha{constructor(e="gm-request-cache",t=36e5){Object.defineProperty(this,"cache",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"defaultCacheTime",{enumerable:true,configurable:true,writable:true,value:undefined}),this.cache=new Ae({name:br,storeName:e,enableQuotaManagement:true}),this.defaultCacheTime=t;}async get(e,t={}){const n=this.generateCacheKey(e,t),o=await this.cache.get(n);if(!o)return null;const{serializedResponse:a,timestamp:i}=o.value,s=t.cacheTime||this.defaultCacheTime;return Date.now()-i>s?(await this.cache.remove(n),null):this.deserializeResponse(a)}async set(e,t,n={}){if((n.cacheStatus||[200]).includes(t.status))try{const a=this.generateCacheKey(e,n),{serialized:i}=await this.serializeResponse(t);await this.cache.set(a,{serializedResponse:i,timestamp:Date.now(),url:e});}catch(a){console.error("缓存响应失败:",a);}}async remove(e,t={}){const n=this.generateCacheKey(e,t);await this.cache.remove(n);}async clear(){await this.cache.clear();}getCacheCore(){return this.cache}generateCacheKey(e,t={}){let o=`${t.method||"GET"}:${e}`;if(t.params){const a=JSON.stringify(t.params);o+=`:params:${a}`;}if(t.body)try{const a=typeof t.body=="string"?t.body:JSON.stringify(t.body);o+=`:body:${a}`;}catch{o+=`:body:${typeof t.body}`;}return o}async serializeResponse(e){const t=e.clone(),n={};t.headers.forEach((i,s)=>{n[s]=i;});let o=null;if(t.bodyUsed)o=null;else try{const i=t.headers.get("content-type")||"";i.includes("application/json")?o=await t.text():i.includes("text/")||i.includes("application/javascript")||i.includes("application/xml")?o=await t.text():o=await t.arrayBuffer();}catch(i){console.error("序列化响应体失败:",i),o=null;}return {serialized:{body:o,status:t.status,statusText:t.statusText,headers:n,url:t.url,type:t.type,redirected:t.redirected,bodyUsed:t.bodyUsed},original:e}}deserializeResponse(e){const t=new Headers;Object.entries(e.headers).forEach(([o,a])=>{t.append(o,a);});const n=e.body;return new Response(n,{status:e.status,statusText:e.statusText,headers:t})}}const qa="image_cache";class Va extends Ae{constructor(){super({storeName:qa});}}const gt=new Va;let Fn=class{constructor(e,t){Object.defineProperty(this,"appName",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"moduleName",{enumerable:true,configurable:true,writable:true,value:undefined}),this.appName=e,this.moduleName=t;}log(e,...t){t.length===0||typeof t[0]=="string"||typeof t[0]=="number"?console.log(...this.formatMessage(e,...t)):(console.log(...this.formatMessage(e)),console.log(...t));}error(e,t){console.log(...this.formatMessage(e)),console.error(t);}formatMessage(e,...t){return [`%c${this.appName}%c ${this.moduleName}%c ${e}%c ${t}`,"color: #409EFF; font-weight: bold","color: #67C23A; font-weight: bold","color: #E6A23C; font-weight: bold","color: inherit; margin-top: 4px"]}};class Ga extends Fn{constructor(e){super("115Master",e);}}class Qa extends Ae{constructor(){super({storeName:"subtitle_cache"}),Object.defineProperty(this,"logger",{enumerable:true,configurable:true,writable:true,value:new Ga("Utils SubtitleCache")}),Object.defineProperty(this,"CACHE_PREFIX",{enumerable:true,configurable:true,writable:true,value:"115master_subtitle_"}),Object.defineProperty(this,"DEFAULT_EXPIRES_IN",{enumerable:true,configurable:true,writable:true,value:6048e5});}async getCache(e,t){try{const n=this.getCacheKey(e,t),o=await super.get(n);return o?Date.now()-o.value.timestamp>o.value.expiresIn?(this.logger.log("缓存已过期",{keyword:e,language:t}),await this.remove(n),null):(this.logger.log("缓存命中",{keyword:e,language:t,count:o.value.subtitles.length,cacheItem:o.value}),o.value.subtitles):(this.logger.log("缓存未命中",{keyword:e,language:t}),null)}catch(n){return this.logger.error("获取缓存失败",n),null}}async addCache(e,t,n,o=this.DEFAULT_EXPIRES_IN){try{const a=this.getCacheKey(e,t),i={subtitles:n,timestamp:Date.now(),expiresIn:o};await super.set(a,i),this.logger.log("设置缓存成功",{keyword:e,language:t,count:n.length});}catch(a){this.logger.error("设置缓存失败",a);}}async clear(){try{await super.clear(),this.logger.log("清除所有缓存成功");}catch(e){this.logger.error("清除缓存失败",e);}}getCacheKey(e,t){return `${this.CACHE_PREFIX}${e}_${t}`}}new Qa;const Lr="subtitle_preference";class Ya extends Ae{constructor(){super({storeName:Lr,enableQuotaManagement:false});}async savePreference(e,t){try{const n=this.getStoreKey(e);t?await this.set(n,t):await this.remove(n);}catch(n){console.error("保存字幕偏好失败",n);}}async getPreference(e){try{const t=this.getStoreKey(e),n=await this.get(t);return (n==null?void 0:n.value)??null}catch{return null}}getStoreKey(e){const t=e.replace(/\.[^/.]+$/,"").trim();return `${Lr}${t}`}}const Pd=exports("P", new Ya),Wa="video_cover_cache_v1";class Ka extends Ae{constructor(){super({storeName:Wa});}}const Hn=new Ka;function qn(r,e,t,n){let o=r,a=e;return o>a?o>t&&(a=Math.round(a*(t/o)),o=t):a>n&&(o=Math.round(o*(n/a)),a=n),{width:o,height:a}}async function Vn(r,e={}){const{maxWidth:t=200,maxHeight:n=200,quality:o=.8,type:a="image/jpeg"}=e;return new Promise((i,s)=>{const l=new Image;l.onload=()=>{const c=document.createElement("canvas"),{width:u,height:d}=qn(l.width,l.height,t,n);c.width=u,c.height=d;const p=c.getContext("2d");if(!p){s(new Error("无法获取Canvas上下文"));return}p.drawImage(l,0,0,u,d),c.toBlob(h=>{h?i(h):s(new Error("图片压缩失败"));},a,o);},l.onerror=()=>{s(new Error("图片加载失败"));},l.src=URL.createObjectURL(r);})}function Or(r){return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>{n.result?e(n.result):t(new Error("转换Blob到Base64失败"));},n.onerror=()=>{t(new Error("读取Blob失败"));},n.readAsDataURL(r);})}const Xa={enableFilelistPreview:true};class Ja{constructor(){Object.defineProperty(this,"value",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"watchTasks",{enumerable:true,configurable:true,writable:true,value:[]}),this.value=this.create();}watch(e,t){const n={key:e,callback:t};return this.watchTasks.push(n),()=>{const o=this.watchTasks.indexOf(n);o>-1&&this.watchTasks.splice(o,1);}}create(){const e="USER_SETTINGS",t=Ca(e)??{},n={...Xa,...t};return new Proxy(n,{get:(a,i)=>a[i],set:(a,i,s)=>{const l=a[i];return a[i]=s,Bn(e,a),this.watchTasks.forEach(c=>{c.key===i&&c.callback(l,s);}),true}})}}const He=new Ja;class Te{constructor(e,t){Object.defineProperty(this,"itemNode",{enumerable:true,configurable:true,writable:true,value:e}),Object.defineProperty(this,"itemInfo",{enumerable:true,configurable:true,writable:true,value:t}),Object.defineProperty(this,"IS_PLUS",{enumerable:true,configurable:true,writable:true,value:false}),Object.defineProperty(this,"ENABLE_KEY_IN_USER_SETTING",{enumerable:true,configurable:true,writable:true,value:undefined});}load(){this.ENABLE_KEY_IN_USER_SETTING?(He.value[this.ENABLE_KEY_IN_USER_SETTING]&&this.onLoad(),He.watch(this.ENABLE_KEY_IN_USER_SETTING,(e,t)=>{t?this.onLoad():this.destroy();})):this.onLoad();}destroy(){this.onDestroy();}}class Za extends Te{constructor(){super(...arguments),Object.defineProperty(this,"IS_PLUS",{enumerable:true,configurable:true,writable:true,value:true});}async onLoad(){var n;if(this.itemInfo.fileListType===ge.grid)return;await Tr.init();const e=await Tr.findActress(this.itemInfo.attributes.title.trim());if(!e)return;this.itemNode.classList.add("with-actress-info");const t=document.createElement("img");t.alt=e.filename,t.loading="lazy",t.className="actress-info-img",(n=this.itemNode.querySelector(".file-name-wrap"))==null||n.prepend(t);try{const o=`actress-face-${e.url}`,a=await gt.get(o);if(a)t.src=URL.createObjectURL(a.value);else {t.src=e.url;try{const i=await fetch(e.url);if(i.ok){const s=await i.blob(),l=await Vn(s,{maxWidth:200,maxHeight:200,quality:.8,type:"image/webp"});await gt.set(o,l);}}catch(i){console.error("缓存演员头像失败:",i);}}}catch(o){console.error("加载演员头像缓存失败:",o),t.src=e.url;}}onDestroy(){}}class ei extends Te{get fileNameNode(){return this.itemNode.querySelector(".file-thumb")??this.itemNode.querySelector(".file-name .name")}onLoad(){var e;this.itemInfo.attributes.iv===fe.Yes&&((e=this.fileNameNode)==null||e.addEventListener("click",this.handleClickPlayer.bind(this),true),this.itemNode.addEventListener("dblclick",this.handleClickPlayer.bind(this)),this.itemNode.addEventListener("auxclick",this.handleAuxclick.bind(this)));}onDestroy(){var e;(e=this.fileNameNode)==null||e.removeEventListener("click",this.handleClickPlayer.bind(this),true),this.itemNode.removeEventListener("dblclick",this.handleClickPlayer.bind(this)),this.itemNode.removeEventListener("auxclick",this.handleAuxclick.bind(this));}handleAuxclick(e){e.button===1&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),Et(new URL(`/?pickcode=${this.itemInfo.attributes.pick_code}&share_id=0`,hr).href,{active:true}));}handleClickPlayer(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),mr({pickCode:this.itemInfo.attributes.pick_code,cid:this.itemInfo.attributes.cid},true);}}const Td={360:"360P",480:"480P",720:"720P",1080:"1080P",2160:"4K",9999:"原画"},ti={"3G":360,SD:480,HD:720,UD:1080,BD:2160,YH:9999},ri=ye.userAgentData.platform.match(/mac/i),Gn=navigator.userAgent.match(/115Browser/i); exports({ m: Td, r: ri });class Qn{}const ni={cache:"no-cache",credentials:"include"};class oi extends Qn{constructor(e={}){super(),Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:{}}),this.options={...ni,...e};}async request(e,t={}){const n={...this.options,...t},o=this.processUrl(e,n.params);try{return await fetch(o,n)}catch(a){throw new Error(`请求失败: ${a instanceof Error?a.message:String(a)}`)}}get(e,t){return this.request(e,{...t,method:"GET"})}post(e,t){var o;let n=t?{...t}:{};if(n.data){const a=((o=n.headers)==null?undefined:o["Content-Type"])||"application/x-www-form-urlencoded";let i;if(a.includes("application/json"))i=JSON.stringify(n.data);else if(a.includes("application/x-www-form-urlencoded"))i=new URLSearchParams(n.data);else if(a.includes("multipart/form-data")){const c=new FormData;if(Object.entries(n.data).forEach(([u,d])=>{c.append(u,d);}),i=c,n.headers){const u={};Object.entries(n.headers).forEach(([d,p])=>{d.toLowerCase()!=="content-type"&&(u[d]=p);}),n.headers=u;}}else i=String(n.data);const{data:s,...l}=n;n={...l,body:i};}return this.request(e,merge({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},n))}processUrl(e,t){if(!t)return e;const n=new URL(e);return Object.entries(t).forEach(([o,a])=>{n.searchParams.append(o,a.toString());}),n.href}}const se=exports("x", new oi),ai=ye.userAgentData.brands.some(r=>r.brand==="Google Chrome"),ii={cacheStatus:[200],cache:"no-cache"};class Ct extends Qn{constructor(e={},t="gm-request-cache"){super(),Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:{}}),Object.defineProperty(this,"cache",{enumerable:true,configurable:true,writable:true,value:undefined}),this.options={...ii,...e},this.cache=new Ha(t);}async request(e,t={}){const n={...this.options,...t},o=new URL(e);n.params&&Object.entries(n.params).forEach(([l,c])=>{o.searchParams.set(l,c.toString());});const a=ai?n.redirect||"manual":"follow",i=o.href,s=n.cache!=="no-cache";if(s){const l=await this.cache.get(i,n);if(l)return l}return new Promise((l,c)=>{Sa({method:n.method||"GET",url:i,headers:Object.fromEntries(Object.entries(n.headers||{})),data:n.body,timeout:n.timeout||5e3,responseType:n.responseType,nocache:!s,redirect:a,onload:async u=>{const d=this.parseResponseHeaders(u.responseHeaders),p=new Headers;Object.entries(d).forEach(([m,v])=>{p.append(m,v);});const h=new Response(u.response,{status:u.status,statusText:u.statusText,headers:p});s&&await this.cache.set(i,h.clone(),n),l(h);},onerror:u=>{c(new Error("请求失败",{cause:u.error}));},ontimeout:()=>{c(new Error("请求超时"));}});})}get(e,t){return this.request(e,{...t,method:"GET"})}post(e,t){return this.request(e,merge({method:"POST",body:new URLSearchParams(t==null?undefined:t.data),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},t))}async clearCache(e,t){await this.cache.remove(e,t);}async clearAllCache(){await this.cache.clear();}getCache(){return this.cache}parseResponseHeaders(e){const t={};if(!e)return t;const n=e.split(`
`);for(let o=0;o<n.length;o++){const a=n[o].trim();if(a){const i=a.indexOf(":");if(i>0){const s=a.substring(0,i).trim(),l=a.substring(i+1).trim();t[s.toLowerCase()]=l;}}}return t}}const Ld=exports("L", new Ct);function si(r){return r.includes("cpats01")?r.replace(/&s=\d+/,"&s=52428800"):r}function li(r){const e=new URLSearchParams(r);return Object.fromEntries(e)}class ci{constructor(){Object.defineProperty(this,"n",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"e",{enumerable:true,configurable:true,writable:true,value:undefined}),this.n=rt("8686980c0f5a24c4b9d43020cd2c22703ff3f450756529058b1cf88f09b8602136477198a6e2683149659bd122c33592fdb5ad47944ad1ea4d36c6b172aad6338c3bb6ac6227502d010993ac967d1aef00f0c8e038de2e4d3bc2ec368af2e9f10a6f1eda4f7262f136420c07c331b871bf139f74f3010e3c4fe57df3afb71683",16),this.e=rt("10001",16);}a2hex(e){let t="",n;for(let o=0;o<e.length;o++)n=e[o].toString(16),n.length<2&&(n=`0${n}`),t+=n;return t}hex2a(e){let t="";for(let n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}pkcs1pad2(e,t){if(t<e.length+11)return null;const n=[];let o=t,a=e.length-1;for(;a>=0&&o>0;)n[--o]=e.charCodeAt(a--);for(n[--o]=0;o>2;)n[--o]=255;n[--o]=2,n[--o]=0;const i=this.a2hex(n);return rt(i,16)}pkcs1unpad2(e){let t=e.toString(16);t.length%2!==0&&(t=`0${t}`);const n=this.hex2a(t);let o=1;for(;n.charCodeAt(o)!==0;)o++;return n.slice(o+1)}encrypt(e){const t=this.pkcs1pad2(e,128);if(!t)throw new Error("pkcs1pad2 failed");let o=t.modPow(this.e,this.n).toString(16);for(;o.length<256;)o=`0${o}`;return o}decrypt(e){const t=[];let n=0;for(;n<e.length;)t[n]=e.charCodeAt(n),n+=1;const a=rt(this.a2hex(t),16).modPow(this.e,this.n);return this.pkcs1unpad2(a)}}class ui{constructor(){Object.defineProperty(this,"rsa",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"kts",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"keyS",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"keyL",{enumerable:true,configurable:true,writable:true,value:undefined}),this.rsa=new ci,this.kts=[240,229,105,174,191,220,191,138,26,69,232,190,125,166,115,184,222,143,231,196,69,218,134,196,155,100,139,20,106,180,241,170,56,1,53,158,38,105,44,134,0,107,79,165,54,52,98,166,42,150,104,24,242,74,253,189,107,151,143,77,143,137,19,183,108,142,147,237,14,13,72,62,215,47,136,216,254,254,126,134,80,149,79,209,235,131,38,52,219,102,123,156,126,157,122,129,50,234,182,51,222,58,169,89,52,102,59,170,186,129,96,72,185,213,129,156,248,108,132,119,255,84,120,38,95,190,232,30,54,159,52,128,92,69,44,155,118,213,27,143,204,195,184,245],this.keyS=[41,35,33,94],this.keyL=[120,6,173,76,51,134,93,24,76,1,63,70];}xor115Enc(e,t,n,o){const a=t%4,i=[];for(let s=0;s<a;s++)i.push(e[s]^n[s%o]);for(let s=a;s<t;s++)i.push(e[s]^n[(s-a)%o]);return i}getkey(e,t){if(t){const n=[];for(let o=0;o<e;o++){const a=t[o]+this.kts[e*o]&255,i=this.kts[e*(e-1-o)];n.push(a^i);}return n}return e===12?this.keyL.slice(0):this.keyS.slice(0)}asymEncode(e,t){let o="";for(let a=0;a<Math.floor((t+117-1)/117);a++)o+=this.rsa.encrypt(this.bytesToString(e.slice(a*117,Math.min((a+1)*117,t))));return btoa(this.rsa.hex2a(o))}asymDecode(e,t){let o="";for(let a=0;a<Math.floor((t+128-1)/128);a++)o+=this.rsa.decrypt(this.bytesToString(e.slice(a*128,Math.min((a+1)*128,t))));return this.stringToBytes(o)}symEncode(e,t,n,o){const a=this.getkey(4,n),i=this.getkey(12,o);let s=this.xor115Enc(e,t,a,4);return s.reverse(),s=this.xor115Enc(s,t,i,12),s}symDecode(e,t,n,o){const a=this.getkey(4,n),i=this.getkey(12,o);let s=this.xor115Enc(e,t,i,12);return s.reverse(),s=this.xor115Enc(s,t,a,4),s}bytesToString(e){return e.map(t=>String.fromCharCode(t)).join("")}stringToBytes(e){return Array.from(e).map(t=>t.charCodeAt(0))}m115_encode(e,t){const n=this.stringToBytes(Qo(`!@###@#${t}DFDR@#@#`));let o=this.stringToBytes(e);return o=this.symEncode(o,o.length,n),o=n.slice(0,16).concat(o),{data:this.asymEncode(o,o.length),key:n}}m115_decode(e,t){let n=this.stringToBytes(atob(e));return n=this.asymDecode(n,n.length),this.bytesToString(this.symDecode(n.slice(16),n.length-16,t,n.slice(0,16)))}}class gr{}Object.defineProperty(gr,"NotFoundM3u8File",{enumerable:true,configurable:true,writable:true,value:class extends Error{constructor(){super("Not found m3u8 file");}}});class di{constructor(){Object.defineProperty(this,"crypto115",{enumerable:true,configurable:true,writable:true,value:new ui}),Object.defineProperty(this,"BASE_URL",{enumerable:true,configurable:true,writable:true,value:lt}),Object.defineProperty(this,"WEB_API_URL",{enumerable:true,configurable:true,writable:true,value:ha}),Object.defineProperty(this,"PRO_API_URL",{enumerable:true,configurable:true,writable:true,value:fa}),Object.defineProperty(this,"VOD_URL_115",{enumerable:true,configurable:true,writable:true,value:hr}),Object.defineProperty(this,"APS_URL_115",{enumerable:true,configurable:true,writable:true,value:ma}),Object.defineProperty(this,"verifying",{enumerable:true,configurable:true,writable:true,value:false});}async webApiFilesDownload(e){const n=await(await se.get(new URL(`/files/download?pickcode=${e}`,this.WEB_API_URL).href)).json();if(n.errNo===990001&&alert("登录已过期，请重新登录"),!n.state||!n.file_url)throw new Error(`服务器返回数据格式错误: ${JSON.stringify(n)}`);return {url:{url:n.file_url}}}async ProPostAppChromeDownurl(e){const t=Math.floor(Date.now()/1e3).toString(),n=JSON.stringify({pickcode:e}),o=this.crypto115.m115_encode(n,t),a=`data=${encodeURIComponent(o.data)}`,l=await(await(Gn?new Ct:se).post(new URL(`/app/chrome/downurl?t=${t}`,this.PRO_API_URL).href,{body:a})).json();if(!l.state)throw new Error(`获取下载地址失败: ${JSON.stringify(l)}`);const c=JSON.parse(this.crypto115.m115_decode(l.data,o.key));return Object.values(c)[0]}getM3u8Url(e){return new URL(`/api/video/m3u8/${e}.m3u8`,this.BASE_URL).href}async getM3u8Info(e,t){const o=await(await se.get(e,{headers:{"Content-Type":"application/json"}})).text();if(!o.startsWith("#")){let s;try{s=JSON.parse(o);}catch{throw new gr.NotFoundM3u8File}if(s&&s.state===false)throw s.code===911&&this.jumpVerify(t),new Error(`获取m3u8文件失败: ${s.error}`)}const a=o.split(`
`),i=[];return o.split(`
`).forEach((s,l)=>{var c,u;if(s.includes('NAME="')&&s.match(/#EXT-X-STREAM-INF/)){const p=((c=s.match(/NAME="([^"]*)"/))==null?undefined:c[1])??"",h=(u=a[l+1])==null?undefined:u.trim();i.push({name:p,quality:ti[p],url:si(h)});}}),i.sort((s,l)=>l.quality-s.quality),i}async ApsGetNatsortFiles(e){return await(await se.get(new URL("/natsort/files.php",this.APS_URL_115).href,{params:e})).json()}async webApiGetFiles(e){return await(await se.get(new URL("/files",this.WEB_API_URL).href,{params:e})).json()}async webApiGetFilesVideo(e){return await(await se.get(new URL("/files/video",this.WEB_API_URL).href,{params:e})).json()}async webApiGetWebApiFilesHistory(e){return await(await se.get(new URL("/files/history",this.WEB_API_URL).href,{params:e})).json()}async webApiPostWebApiFilesHistory(e){return await(await se.post(new URL("/files/history",this.WEB_API_URL).href,{data:e})).json()}async webApiPostFilesStar(e){return await(await se.post(new URL("/files/star",this.WEB_API_URL).href,{data:e})).json()}async webApiGetMoviesSubtitle(e){return await(await se.get(new URL("/movies/subtitle",this.WEB_API_URL).href,{params:e})).json()}jumpVerify(e){this.verifying||(this.verifying=true,alert(`你已经高频操作了!
先去通过一下人机验证再回来刷新页面哦~`),Et(new URL(`?pickcode=${e}`,this.VOD_URL_115).href,{active:true}));}}class pi extends di{async getFiles(e){try{const t=await this.webApiGetFiles(e);if(t.state)return t;throw new Error("webapiFiles 获取播放列表失败")}catch{const t=await this.ApsGetNatsortFiles(e);if(t.state)return t;throw new Error(`获取播放列表失败: ${JSON.stringify(t)}`)}}async getPlaylist(e,t=0){const n={aid:1,cid:e,offset:t,limit:1150,show_dir:0,nf:"",qid:0,type:4,source:"",format:"json",star:"",is_q:"",is_share:"",r_all:1,o:"file_name",asc:1,cur:1,natsort:1};return this.getFiles(n)}async getM3u8(e){const t=this.getM3u8Url(e);return await this.getM3u8Info(t,e)}async getFileDownloadUrl(e){try{return await this.ProPostAppChromeDownurl(e)}catch(t){return console.warn("第一种获取下载链接失败",t),await this.webApiFilesDownload(e)}}}const St=exports("S", new pi);class hi extends Te{get fileOprNode(){return this.itemNode.querySelector(".file-opr")}get downloadOneNode(){var e;return (e=this.fileOprNode)==null?undefined:e.querySelector('a[menu="download_one"]')}get downloadDirOneNode(){var e;return (e=this.fileOprNode)==null?undefined:e.querySelector('a[menu="download_dir_one"]')}onLoad(){this.fileOprNode&&(Gn||(this.downloadDirOneNode&&(this.downloadDirOneNode.onclick=async e=>{e.stopImmediatePropagation(),e.preventDefault(),alert("当前未支持文件夹下载");}),this.downloadOneNode&&(this.downloadOneNode.onclick=async e=>{e.stopImmediatePropagation(),e.preventDefault();try{const t=await St.getFileDownloadUrl(this.itemInfo.attributes.pick_code);if(t.url.url){window.open(t.url.url,"_blank");return}throw new Error("下载失败")}catch(t){t instanceof Error?alert(t.message):alert("下载失败");}})));}onDestroy(){}}const vr=`/*! tailwindcss v4.1.7 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial;--tw-text-shadow-color:initial;--tw-text-shadow-alpha:100%;--tw-content:""}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-400:oklch(70.4% .191 22.216);--color-amber-400:oklch(82.8% .189 84.429);--color-yellow-300:oklch(90.5% .182 98.111);--color-yellow-400:oklch(85.2% .199 91.936);--color-pink-400:oklch(71.8% .202 349.761);--color-rose-400:oklch(71.2% .194 13.428);--color-rose-500:oklch(64.5% .246 16.439);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-700:oklch(37.3% .034 259.733);--color-neutral-100:oklch(97% 0 0);--color-neutral-300:oklch(87% 0 0);--color-neutral-500:oklch(55.6% 0 0);--color-neutral-800:oklch(26.9% 0 0);--color-neutral-950:oklch(14.5% 0 0);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-md:28rem;--container-lg:32rem;--container-xl:36rem;--container-2xl:42rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--text-6xl:3.75rem;--text-6xl--line-height:1;--text-8xl:6rem;--text-8xl--line-height:1;--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--leading-relaxed:1.625;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--blur-xs:4px;--blur-2xl:40px;--aspect-video:16/9;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not([class*=drawer-open])>.drawer-toggle:checked){overflow:hidden}:root,[data-theme]{background-color:var(--root-bg,var(--color-base-100));color:var(--color-base-content)}@property --radialprogress{syntax: "<percentage>"; inherits: true; initial-value: 0%;}:where(:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not(.drawer-open)>.drawer-toggle:checked)){scrollbar-gutter:stable;background-image:linear-gradient(var(--color-base-100),var(--color-base-100));--root-bg:var(--color-base-100)}@supports (color:color-mix(in lab,red,red)){:where(:root:has(.modal-open,.modal[open],.modal:target,.modal-toggle:checked,.drawer:not(.drawer-open)>.drawer-toggle:checked)){--root-bg:color-mix(in srgb,var(--color-base-100),oklch(0% 0 0) 40%)}}:where(.modal[open],.modal-open,.modal-toggle:checked+.modal):not(.modal-start,.modal-end){scrollbar-gutter:stable}:root{--fx-noise:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.34' numOctaves='4' stitchTiles='stitch'%3E%3C/feTurbulence%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)' opacity='0.2'%3E%3C/rect%3E%3C/svg%3E")}.chat{--mask-chat:url("data:image/svg+xml,%3csvg width='13' height='13' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill='black' d='M0 11.5004C0 13.0004 2 13.0004 2 13.0004H12H13V0.00036329L12.5 0C12.5 0 11.977 2.09572 11.8581 2.50033C11.6075 3.35237 10.9149 4.22374 9 5.50036C6 7.50036 0 10.0004 0 11.5004Z'/%3e%3c/svg%3e")}:root:has(input.theme-controller[value=dark]:checked),[data-theme=dark]{color-scheme:dark;--color-base-100:oklch(14% 0 0);--color-base-200:oklch(20% 0 0);--color-base-300:oklch(43% 0 0);--color-base-content:oklch(100% 0 0);--color-primary:oklch(62% .214 259.815);--color-primary-content:oklch(98% 0 0);--color-secondary:oklch(64.092% .027 229.389);--color-secondary-content:oklch(12.818% .005 229.389);--color-accent:oklch(67.271% .167 35.791);--color-accent-content:oklch(13.454% .033 35.791);--color-neutral:oklch(27.441% .013 253.041);--color-neutral-content:oklch(85.488% .002 253.041);--color-info:oklch(62.616% .143 240.033);--color-info-content:oklch(12.523% .028 240.033);--color-success:oklch(70.226% .094 156.596);--color-success-content:oklch(14.045% .018 156.596);--color-warning:oklch(77.482% .115 81.519);--color-warning-content:oklch(15.496% .023 81.519);--color-error:oklch(51.61% .146 29.674);--color-error-content:oklch(90.322% .029 29.674);--radius-selector:2rem;--radius-field:2rem;--radius-box:1rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:0;--noise:0}:root:has(input.theme-controller[value=light]:checked),[data-theme=light]{color-scheme:light;--color-base-100:oklch(100% 0 0);--color-base-200:oklch(98% 0 0);--color-base-300:oklch(95% 0 0);--color-base-content:oklch(21% .006 285.885);--color-primary:oklch(62% .214 259.815);--color-primary-content:oklch(98% 0 0);--color-secondary:oklch(65% .241 354.308);--color-secondary-content:oklch(94% .028 342.258);--color-accent:oklch(77% .152 181.912);--color-accent-content:oklch(38% .063 188.416);--color-neutral:oklch(14% .005 285.823);--color-neutral-content:oklch(92% .004 286.32);--color-info:oklch(74% .16 232.661);--color-info-content:oklch(29% .066 243.157);--color-success:oklch(76% .177 163.223);--color-success-content:oklch(37% .077 168.94);--color-warning:oklch(82% .189 84.429);--color-warning-content:oklch(41% .112 45.904);--color-error:oklch(71% .194 13.428);--color-error-content:oklch(27% .105 12.094);--radius-selector:2rem;--radius-field:2rem;--radius-box:1rem;--size-selector:.25rem;--size-field:.25rem;--border:1px;--depth:0;--noise:0}}@layer components;@layer utilities{.diff{webkit-user-select:none;-webkit-user-select:none;user-select:none;direction:ltr;grid-template-columns:auto 1fr;width:100%;display:grid;position:relative;overflow:hidden;container-type:inline-size}.diff:focus-visible,.diff:has(.diff-item-1:focus-visible){outline-style:var(--tw-outline-style);outline-offset:1px;outline-width:2px;outline-color:var(--color-base-content)}.diff:focus-visible .diff-resizer{min-width:90cqi;max-width:90cqi}.diff:has(.diff-item-2:focus-visible){outline-style:var(--tw-outline-style);outline-offset:1px;outline-width:2px}.diff:has(.diff-item-2:focus-visible) .diff-resizer{min-width:10cqi;max-width:10cqi}@supports (-webkit-overflow-scrolling:touch) and (overflow:-webkit-paged-x){.diff:focus .diff-resizer{min-width:10cqi;max-width:10cqi}.diff:has(.diff-item-1:focus) .diff-resizer{min-width:90cqi;max-width:90cqi}}.drawer-side{pointer-events:none;visibility:hidden;z-index:1;overscroll-behavior:contain;opacity:0;width:100%;transition:opacity .2s ease-out .1s allow-discrete,visibility .3s ease-out .1s allow-discrete;inset-inline-start:0;grid-template-rows:repeat(1,minmax(0,1fr));grid-template-columns:repeat(1,minmax(0,1fr));grid-row-start:1;grid-column-start:1;place-items:flex-start start;height:100dvh;display:grid;position:fixed;top:0;overflow:hidden}.drawer-side>.drawer-overlay{cursor:pointer;background-color:#0006;place-self:stretch stretch;position:sticky;top:0}.drawer-side>*{grid-row-start:1;grid-column-start:1}.drawer-side>:not(.drawer-overlay){will-change:transform;transition:translate .3s ease-out;translate:-100%}[dir=rtl] :is(.drawer-side>:not(.drawer-overlay)){translate:100%}.drawer-toggle{-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:0;width:0;height:0;position:fixed}.drawer-toggle:checked~.drawer-side{pointer-events:auto;visibility:visible;opacity:1;overflow-y:auto}.drawer-toggle:checked~.drawer-side>:not(.drawer-overlay){translate:0%}.drawer-toggle:focus-visible~.drawer-content label.drawer-button{outline-offset:2px;outline:2px solid}.tooltip{--tt-bg:var(--color-neutral);--tt-off: calc(100% + .5rem) ;--tt-tail: calc(100% + 1px + .25rem) ;display:inline-block;position:relative}.tooltip>:where(.tooltip-content),.tooltip:where([data-tip]):before{border-radius:var(--radius-field);text-align:center;white-space:normal;max-width:20rem;color:var(--color-neutral-content);opacity:0;background-color:var(--tt-bg);pointer-events:none;z-index:1;--tw-content:attr(data-tip);content:var(--tw-content);width:max-content;padding-block:.25rem;padding-inline:.5rem;font-size:.875rem;line-height:1.25;transition:opacity .2s cubic-bezier(.4,0,.2,1) 75ms,transform .2s cubic-bezier(.4,0,.2,1) 75ms;position:absolute}.tooltip:after{opacity:0;background-color:var(--tt-bg);content:"";pointer-events:none;--mask-tooltip:url("data:image/svg+xml,%3Csvg width='10' height='4' viewBox='0 0 8 4' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0.500009 1C3.5 1 3.00001 4 5.00001 4C7 4 6.5 1 9.5 1C10 1 10 0.499897 10 0H0C-1.99338e-08 0.5 0 1 0.500009 1Z' fill='black'/%3E%3C/svg%3E%0A");width:.625rem;height:.25rem;-webkit-mask-position:-1px 0;mask-position:-1px 0;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-image:var(--mask-tooltip);mask-image:var(--mask-tooltip);transition:opacity .2s cubic-bezier(.4,0,.2,1) 75ms,transform .2s cubic-bezier(.4,0,.2,1) 75ms;display:block;position:absolute}:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible))>.tooltip-content,:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible))[data-tip]:before,:is(.tooltip.tooltip-open,.tooltip[data-tip]:not([data-tip=""]):hover,.tooltip:not(:has(.tooltip-content:empty)):has(.tooltip-content):hover,.tooltip:has(:focus-visible)):after{opacity:1;--tt-pos:0rem;transition:opacity .2s cubic-bezier(.4,0,.2,1),transform .2s cubic-bezier(.4,0,.2,1)}.tooltip>.tooltip-content,.tooltip[data-tip]:before{transform:translate(-50%)translateY(var(--tt-pos,.25rem));inset:auto auto var(--tt-off)50%}.tooltip:after{transform:translate(-50%)translateY(var(--tt-pos,.25rem));inset:auto auto var(--tt-tail)50%}.tab{cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-align:center;webkit-user-select:none;-webkit-user-select:none;user-select:none;flex-wrap:wrap;justify-content:center;align-items:center;display:inline-flex;position:relative}@media (hover:hover){.tab:hover{color:var(--color-base-content)}}.tab{--tab-p:1rem;--tab-bg:var(--color-base-100);--tab-border-color:var(--color-base-300);--tab-radius-ss:0;--tab-radius-se:0;--tab-radius-es:0;--tab-radius-ee:0;--tab-order:0;--tab-radius-min:calc(.75rem - var(--border));order:var(--tab-order);height:calc(var(--size-field,.25rem)*10);border-color:#0000;padding-inline-start:var(--tab-p);padding-inline-end:var(--tab-p);font-size:.875rem}.tab:is(input[type=radio]){min-width:fit-content}.tab:is(input[type=radio]):after{content:attr(aria-label)}.tab:is(label){position:relative}.tab:is(label) input{cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:0;position:absolute;top:0;right:0;bottom:0;left:0}:is(.tab:checked,.tab:is(label:has(:checked)),.tab:is(.tab-active,[aria-selected=true]))+.tab-content{height:100%;display:block}.tab:not(:checked,label:has(:checked),:hover,.tab-active,[aria-selected=true]){color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.tab:not(:checked,label:has(:checked),:hover,.tab-active,[aria-selected=true]){color:color-mix(in oklab,var(--color-base-content)50%,transparent)}}.tab:not(input):empty{cursor:default;flex-grow:1}.tab:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.tab:focus{outline-offset:2px;outline:2px solid #0000}}.tab:focus-visible,.tab:is(label:has(:checked:focus-visible)){outline-offset:-5px;outline:2px solid}.tab[disabled]{pointer-events:none;opacity:.4}.menu{--menu-active-fg:var(--color-neutral-content);--menu-active-bg:var(--color-neutral);flex-flow:column wrap;width:fit-content;padding:.5rem;font-size:.875rem;display:flex}.menu :where(li ul){white-space:nowrap;margin-inline-start:1rem;padding-inline-start:.5rem;position:relative}.menu :where(li ul):before{background-color:var(--color-base-content);opacity:.1;width:var(--border);content:"";inset-inline-start:0;position:absolute;top:.75rem;bottom:.75rem}.menu :where(li>.menu-dropdown:not(.menu-dropdown-show)){display:none}.menu :where(li:not(.menu-title)>:not(ul,details,.menu-title,.btn)),.menu :where(li:not(.menu-title)>details>summary:not(.menu-title)){border-radius:var(--radius-field);text-align:start;text-wrap:balance;-webkit-user-select:none;user-select:none;grid-auto-columns:minmax(auto,max-content) auto max-content;grid-auto-flow:column;align-content:flex-start;align-items:center;gap:.5rem;padding-block:.375rem;padding-inline:.75rem;transition-property:color,background-color,box-shadow;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1);display:grid}.menu :where(li>details>summary){--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.menu :where(li>details>summary){outline-offset:2px;outline:2px solid #0000}}.menu :where(li>details>summary)::-webkit-details-marker{display:none}:is(.menu :where(li>details>summary),.menu :where(li>.menu-dropdown-toggle)):after{content:"";transform-origin:50%;pointer-events:none;justify-self:flex-end;width:.375rem;height:.375rem;transition-property:rotate,translate;transition-duration:.2s;display:block;translate:0 -1px;rotate:-135deg;box-shadow:inset 2px 2px}.menu :where(li>details[open]>summary):after,.menu :where(li>.menu-dropdown-toggle.menu-dropdown-show):after{translate:0 1px;rotate:45deg}.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn).menu-focus,.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn):focus-visible{cursor:pointer;background-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn).menu-focus,.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn):focus-visible{background-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn).menu-focus,.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn):focus-visible{color:var(--color-base-content);--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn).menu-focus,.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title),li:not(.menu-title,.disabled)>details>summary:not(.menu-title)):not(.menu-active,:active,.btn):focus-visible{outline-offset:2px;outline:2px solid #0000}}.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title):not(.menu-active,:active,.btn):hover,li:not(.menu-title,.disabled)>details>summary:not(.menu-title):not(.menu-active,:active,.btn):hover){cursor:pointer;background-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title):not(.menu-active,:active,.btn):hover,li:not(.menu-title,.disabled)>details>summary:not(.menu-title):not(.menu-active,:active,.btn):hover){background-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title):not(.menu-active,:active,.btn):hover,li:not(.menu-title,.disabled)>details>summary:not(.menu-title):not(.menu-active,:active,.btn):hover){--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title):not(.menu-active,:active,.btn):hover,li:not(.menu-title,.disabled)>details>summary:not(.menu-title):not(.menu-active,:active,.btn):hover){outline-offset:2px;outline:2px solid #0000}}.menu :where(li:not(.menu-title,.disabled)>:not(ul,details,.menu-title):not(.menu-active,:active,.btn):hover,li:not(.menu-title,.disabled)>details>summary:not(.menu-title):not(.menu-active,:active,.btn):hover){box-shadow:inset 0 1px #00000003,inset 0 -1px #ffffff03}.menu :where(li:empty){background-color:var(--color-base-content);opacity:.1;height:1px;margin:.5rem 1rem}.menu :where(li){flex-flow:column wrap;flex-shrink:0;align-items:stretch;display:flex;position:relative}.menu :where(li) .badge{justify-self:flex-end}.menu :where(li)>:not(ul,.menu-title,details,.btn):active,.menu :where(li)>:not(ul,.menu-title,details,.btn).menu-active,.menu :where(li)>details>summary:active{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.menu :where(li)>:not(ul,.menu-title,details,.btn):active,.menu :where(li)>:not(ul,.menu-title,details,.btn).menu-active,.menu :where(li)>details>summary:active{outline-offset:2px;outline:2px solid #0000}}.menu :where(li)>:not(ul,.menu-title,details,.btn):active,.menu :where(li)>:not(ul,.menu-title,details,.btn).menu-active,.menu :where(li)>details>summary:active{color:var(--menu-active-fg);background-color:var(--menu-active-bg);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise)}:is(.menu :where(li)>:not(ul,.menu-title,details,.btn):active,.menu :where(li)>:not(ul,.menu-title,details,.btn).menu-active,.menu :where(li)>details>summary:active):not(:is(.menu :where(li)>:not(ul,.menu-title,details,.btn):active,.menu :where(li)>:not(ul,.menu-title,details,.btn).menu-active,.menu :where(li)>details>summary:active):active){box-shadow:0 2px calc(var(--depth)*3px) -2px var(--menu-active-bg)}.menu :where(li).menu-disabled{pointer-events:none;color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.menu :where(li).menu-disabled{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.menu .dropdown:focus-within .menu-dropdown-toggle:after{translate:0 1px;rotate:45deg}.menu .dropdown-content{margin-top:.5rem;padding:.5rem}.menu .dropdown-content:before{display:none}:where(.btn){width:unset}.btn{cursor:pointer;text-align:center;vertical-align:middle;outline-offset:2px;webkit-user-select:none;-webkit-user-select:none;user-select:none;padding-inline:var(--btn-p);color:var(--btn-fg);--tw-prose-links:var(--btn-fg);height:var(--size);font-size:var(--fontsize,.875rem);outline-color:var(--btn-color,var(--color-base-content));background-color:var(--btn-bg);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--btn-noise);border-width:var(--border);border-style:solid;border-color:var(--btn-border);text-shadow:0 .5px oklch(100% 0 0/calc(var(--depth)*.15));touch-action:manipulation;box-shadow:0 .5px 0 .5px oklch(100% 0 0/calc(var(--depth)*6%)) inset,var(--btn-shadow);--size:calc(var(--size-field,.25rem)*10);--btn-bg:var(--btn-color,var(--color-base-200));--btn-fg:var(--color-base-content);--btn-p:1rem;--btn-border:var(--btn-bg);border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-wrap:nowrap;flex-shrink:0;justify-content:center;align-items:center;gap:.375rem;font-weight:600;transition-property:color,background-color,border-color,box-shadow;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1);display:inline-flex}@supports (color:color-mix(in lab,red,red)){.btn{--btn-border:color-mix(in oklab,var(--btn-bg),#000 calc(var(--depth)*5%))}}.btn{--btn-shadow:0 3px 2px -2px var(--btn-bg),0 4px 3px -2px var(--btn-bg)}@supports (color:color-mix(in lab,red,red)){.btn{--btn-shadow:0 3px 2px -2px color-mix(in oklab,var(--btn-bg)calc(var(--depth)*30%),#0000),0 4px 3px -2px color-mix(in oklab,var(--btn-bg)calc(var(--depth)*30%),#0000)}}.btn{--btn-noise:var(--fx-noise)}.prose .btn{text-decoration-line:none}@media (hover:hover){.btn:hover{--btn-bg:var(--btn-color,var(--color-base-200))}@supports (color:color-mix(in lab,red,red)){.btn:hover{--btn-bg:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 7%)}}}.btn:focus-visible{isolation:isolate;outline-width:2px;outline-style:solid}.btn:active:not(.btn-active){--btn-bg:var(--btn-color,var(--color-base-200));translate:0 .5px}@supports (color:color-mix(in lab,red,red)){.btn:active:not(.btn-active){--btn-bg:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 5%)}}.btn:active:not(.btn-active){--btn-border:var(--btn-color,var(--color-base-200))}@supports (color:color-mix(in lab,red,red)){.btn:active:not(.btn-active){--btn-border:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 7%)}}.btn:active:not(.btn-active){--btn-shadow:0 0 0 0 oklch(0% 0 0/0),0 0 0 0 oklch(0% 0 0/0)}.btn:is(:disabled,[disabled],.btn-disabled):not(.btn-link,.btn-ghost){background-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.btn:is(:disabled,[disabled],.btn-disabled):not(.btn-link,.btn-ghost){background-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}.btn:is(:disabled,[disabled],.btn-disabled):not(.btn-link,.btn-ghost){box-shadow:none}.btn:is(:disabled,[disabled],.btn-disabled){pointer-events:none;--btn-border:#0000;--btn-noise:none;--btn-fg:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.btn:is(:disabled,[disabled],.btn-disabled){--btn-fg:color-mix(in oklch,var(--color-base-content)20%,#0000)}}@media (hover:hover){.btn:is(:disabled,[disabled],.btn-disabled):hover{pointer-events:none;background-color:var(--color-neutral)}@supports (color:color-mix(in lab,red,red)){.btn:is(:disabled,[disabled],.btn-disabled):hover{background-color:color-mix(in oklab,var(--color-neutral)20%,transparent)}}.btn:is(:disabled,[disabled],.btn-disabled):hover{--btn-border:#0000;--btn-fg:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.btn:is(:disabled,[disabled],.btn-disabled):hover{--btn-fg:color-mix(in oklch,var(--color-base-content)20%,#0000)}}}.btn:is(input[type=checkbox],input[type=radio]){-webkit-appearance:none;-moz-appearance:none;appearance:none}.btn:is(input[type=checkbox],input[type=radio]):after{content:attr(aria-label)}.btn:where(input:checked:not(.filter .btn)){--btn-color:var(--color-primary);--btn-fg:var(--color-primary-content);isolation:isolate}.loading{pointer-events:none;aspect-ratio:1;vertical-align:middle;width:calc(var(--size-selector,.25rem)*6);background-color:currentColor;display:inline-block;-webkit-mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");-webkit-mask-position:50%;mask-position:50%;-webkit-mask-size:100%;mask-size:100%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.pointer-events-auto{pointer-events:auto}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.list{flex-direction:column;font-size:.875rem;display:flex}.list :where(.list-row){--list-grid-cols:minmax(0,auto)1fr;border-radius:var(--radius-box);word-break:break-word;grid-auto-flow:column;grid-template-columns:var(--list-grid-cols);gap:1rem;padding:1rem;display:grid;position:relative}.list :where(.list-row):has(.list-col-grow:first-child){--list-grid-cols:1fr}.list :where(.list-row):has(.list-col-grow:nth-child(2)){--list-grid-cols:minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(3)){--list-grid-cols:minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(4)){--list-grid-cols:minmax(0,auto)minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(5)){--list-grid-cols:minmax(0,auto)minmax(0,auto)minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row):has(.list-col-grow:nth-child(6)){--list-grid-cols:minmax(0,auto)minmax(0,auto)minmax(0,auto)minmax(0,auto)minmax(0,auto)1fr}.list :where(.list-row) :not(.list-col-wrap){grid-row-start:1}:is(.list>:not(:last-child).list-row,.list>:not(:last-child) .list-row):after{content:"";border-bottom:var(--border)solid;inset-inline:var(--radius-box);border-color:var(--color-base-content);position:absolute;bottom:0}@supports (color:color-mix(in lab,red,red)){:is(.list>:not(:last-child).list-row,.list>:not(:last-child) .list-row):after{border-color:color-mix(in oklab,var(--color-base-content)5%,transparent)}}.toggle{border:var(--border)solid currentColor;color:var(--input-color);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;vertical-align:middle;webkit-user-select:none;-webkit-user-select:none;user-select:none;--radius-selector-max:calc(var(--radius-selector) + var(--radius-selector) + var(--radius-selector));border-radius:calc(var(--radius-selector) + min(var(--toggle-p),var(--radius-selector-max)) + min(var(--border),var(--radius-selector-max)));padding:var(--toggle-p);flex-shrink:0;grid-template-columns:0fr 1fr 1fr;place-content:center;display:inline-grid;position:relative;box-shadow:inset 0 1px}@supports (color:color-mix(in lab,red,red)){.toggle{box-shadow:0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000) inset}}.toggle{--input-color:var(--color-base-content);transition:color .3s,grid-template-columns .2s}@supports (color:color-mix(in lab,red,red)){.toggle{--input-color:color-mix(in oklab,var(--color-base-content)50%,#0000)}}.toggle{--toggle-p:calc(var(--size)*.125);--size:calc(var(--size-selector,.25rem)*6);width:calc((var(--size)*2) - (var(--border) + var(--toggle-p))*2);height:var(--size)}.toggle>*{z-index:1;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0000;border:none;grid-column:2/span 1;grid-row-start:1;height:100%;padding:.125rem;transition:opacity .2s,rotate .4s}.toggle>:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.toggle>:focus{outline-offset:2px;outline:2px solid #0000}}.toggle>:nth-child(2){color:var(--color-base-100);rotate:none}.toggle>:nth-child(3){color:var(--color-base-100);opacity:0;rotate:-15deg}.toggle:has(:checked)>:nth-child(2){opacity:0;rotate:15deg}.toggle:has(:checked)>:nth-child(3){opacity:1;rotate:none}.toggle:before{aspect-ratio:1;border-radius:var(--radius-selector);--tw-content:"";content:var(--tw-content);height:100%;box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor;background-color:currentColor;grid-row-start:1;grid-column-start:2;transition:background-color .1s,translate .2s,inset-inline-start .2s;position:relative;inset-inline-start:0;translate:0}@supports (color:color-mix(in lab,red,red)){.toggle:before{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000)}}.toggle:before{background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise)}@media (forced-colors:active){.toggle:before{outline-style:var(--tw-outline-style);outline-offset:-1px;outline-width:1px}}@media print{.toggle:before{outline-offset:-1rem;outline:.25rem solid}}.toggle:focus-visible,.toggle:has(:focus-visible){outline-offset:2px;outline:2px solid}.toggle:checked,.toggle[aria-checked=true],.toggle:has(>input:checked){background-color:var(--color-base-100);--input-color:var(--color-base-content);grid-template-columns:1fr 1fr 0fr}:is(.toggle:checked,.toggle[aria-checked=true],.toggle:has(>input:checked)):before{background-color:currentColor}@starting-style{:is(.toggle:checked,.toggle[aria-checked=true],.toggle:has(>input:checked)):before{opacity:0}}.toggle:indeterminate{grid-template-columns:.5fr 1fr .5fr}.toggle:disabled{cursor:not-allowed;opacity:.3}.toggle:disabled:before{border:var(--border)solid currentColor;background-color:#0000}.input{cursor:text;border:var(--border)solid #0000;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-base-100);vertical-align:middle;white-space:nowrap;width:clamp(3rem,20rem,100%);height:var(--size);border-color:var(--input-color);box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-shrink:1;align-items:center;gap:.5rem;padding-inline:.75rem;font-size:.875rem;display:inline-flex;position:relative}@supports (color:color-mix(in lab,red,red)){.input{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset}}.input{--size:calc(var(--size-field,.25rem)*10);--input-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.input{--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.input:where(input){display:inline-flex}.input :where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0000;border:none;width:100%;height:100%;display:inline-flex}.input :where(input):focus,.input :where(input):focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.input :where(input):focus,.input :where(input):focus-within{outline-offset:2px;outline:2px solid #0000}}.input :where(input[type=date]){display:inline-block}.input:focus,.input:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.input:focus,.input:focus-within{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.input:focus,.input:focus-within{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate;z-index:1}.input:has(>input[disabled]),.input:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.input:has(>input[disabled]),.input:is(:disabled,[disabled]){color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.input:has(>input[disabled]),.input:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.input:has(>input[disabled]),.input:is(:disabled,[disabled]){box-shadow:none}.input:has(>input[disabled])>input[disabled]{cursor:not-allowed}.input::-webkit-date-and-time-value{text-align:inherit}.input[type=number]::-webkit-inner-spin-button{margin-block:-.75rem;margin-inline-end:-.75rem}.input::-webkit-calendar-picker-indicator{position:absolute;inset-inline-end:.75em}.table{border-radius:var(--radius-box);text-align:left;width:100%;font-size:.875rem;position:relative}.table:where(:dir(rtl),[dir=rtl],[dir=rtl] *){text-align:right}@media (hover:hover){:is(.table tr.row-hover,.table tr.row-hover:nth-child(2n)):hover{background-color:var(--color-base-200)}}.table :where(th,td){vertical-align:middle;padding-block:.75rem;padding-inline:1rem}.table :where(thead,tfoot){white-space:nowrap;color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.table :where(thead,tfoot){color:color-mix(in oklab,var(--color-base-content)60%,transparent)}}.table :where(thead,tfoot){font-size:.875rem;font-weight:600}.table :where(tfoot){border-top:var(--border)solid var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.table :where(tfoot){border-top:var(--border)solid color-mix(in oklch,var(--color-base-content)5%,#0000)}}.table :where(.table-pin-rows thead tr){z-index:1;background-color:var(--color-base-100);position:sticky;top:0}.table :where(.table-pin-rows tfoot tr){z-index:1;background-color:var(--color-base-100);position:sticky;bottom:0}.table :where(.table-pin-cols tr th){background-color:var(--color-base-100);position:sticky;left:0;right:0}.table :where(thead tr,tbody tr:not(:last-child)){border-bottom:var(--border)solid var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.table :where(thead tr,tbody tr:not(:last-child)){border-bottom:var(--border)solid color-mix(in oklch,var(--color-base-content)5%,#0000)}}.range{-webkit-appearance:none;-moz-appearance:none;appearance:none;webkit-appearance:none;--range-thumb:var(--color-base-100);--range-thumb-size:calc(var(--size-selector,.25rem)*6);--range-progress:currentColor;--range-fill:1;--range-p:.25rem;--range-bg:currentColor}@supports (color:color-mix(in lab,red,red)){.range{--range-bg:color-mix(in oklab,currentColor 10%,#0000)}}.range{cursor:pointer;vertical-align:middle;--radius-selector-max:calc(var(--radius-selector) + var(--radius-selector) + var(--radius-selector));border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)));width:clamp(3rem,20rem,100%);height:var(--range-thumb-size);background-color:#0000;border:none;overflow:hidden}[dir=rtl] .range{--range-dir:-1}.range:focus{outline:none}.range:focus-visible{outline-offset:2px;outline:2px solid}.range::-webkit-slider-runnable-track{background-color:var(--range-bg);border-radius:var(--radius-selector);width:100%;height:calc(var(--range-thumb-size)*.5)}@media (forced-colors:active){.range::-webkit-slider-runnable-track{border:1px solid}.range::-moz-range-track{border:1px solid}}.range::-webkit-slider-thumb{box-sizing:border-box;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)));height:var(--range-thumb-size);width:var(--range-thumb-size);border:var(--range-p)solid;-webkit-appearance:none;-moz-appearance:none;appearance:none;webkit-appearance:none;color:var(--range-progress);box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor,0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill));background-color:currentColor;position:relative;top:50%;transform:translateY(-50%)}@supports (color:color-mix(in lab,red,red)){.range::-webkit-slider-thumb{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000),0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))}}.range::-moz-range-track{background-color:var(--range-bg);border-radius:var(--radius-selector);width:100%;height:calc(var(--range-thumb-size)*.5)}.range::-moz-range-thumb{box-sizing:border-box;border-radius:calc(var(--radius-selector) + min(var(--range-p),var(--radius-selector-max)));height:var(--range-thumb-size);width:var(--range-thumb-size);border:var(--range-p)solid;color:var(--range-progress);box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px currentColor,0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill));background-color:currentColor;position:relative;top:50%}@supports (color:color-mix(in lab,red,red)){.range::-moz-range-thumb{box-shadow:0 -1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px color-mix(in oklab,currentColor calc(var(--depth)*10%),#0000),0 0 0 2rem var(--range-thumb) inset,calc((var(--range-dir,1)*-100rem) - (var(--range-dir,1)*var(--range-thumb-size)/2)) 0 0 calc(100rem*var(--range-fill))}}.range:disabled{cursor:not-allowed;opacity:.3}.tabs-border .tab{--tab-border-color:#0000 #0000 var(--tab-border-color)#0000;border-radius:var(--radius-field);position:relative}.tabs-border .tab:before{--tw-content:"";content:var(--tw-content);background-color:var(--tab-border-color);border-radius:var(--radius-field);width:80%;height:3px;transition:background-color .2s;position:absolute;bottom:0;left:10%}:is(.tabs-border .tab:is(.tab-active,[aria-selected=true]):not(.tab-disabled,[disabled]),.tabs-border .tab:is(input:checked),.tabs-border .tab:is(label:has(:checked))):before{--tab-border-color:currentColor;border-top:3px solid}.select{border:var(--border)solid #0000;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-base-100);vertical-align:middle;width:clamp(3rem,20rem,100%);height:var(--size);text-overflow:ellipsis;box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;background-image:linear-gradient(45deg,#0000 50%,currentColor 50%),linear-gradient(135deg,currentColor 50%,#0000 50%);background-position:calc(100% - 20px) calc(1px + 50%),calc(100% - 16.1px) calc(1px + 50%);background-repeat:no-repeat;background-size:4px 4px,4px 4px;border-start-start-radius:var(--join-ss,var(--radius-field));border-start-end-radius:var(--join-se,var(--radius-field));border-end-end-radius:var(--join-ee,var(--radius-field));border-end-start-radius:var(--join-es,var(--radius-field));flex-shrink:1;align-items:center;gap:.375rem;padding-inline:1rem 1.75rem;font-size:.875rem;display:inline-flex;position:relative}@supports (color:color-mix(in lab,red,red)){.select{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset}}.select{border-color:var(--input-color);--input-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.select{--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.select{--size:calc(var(--size-field,.25rem)*10)}[dir=rtl] .select{background-position:12px calc(1px + 50%),16px calc(1px + 50%)}.select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:inherit;border-radius:inherit;border-style:none;width:calc(100% + 2.75rem);height:calc(100% - 2px);margin-inline:-1rem -1.75rem;padding-inline:1rem 1.75rem}.select select:focus,.select select:focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.select select:focus,.select select:focus-within{outline-offset:2px;outline:2px solid #0000}}.select select:not(:last-child){background-image:none;margin-inline-end:-1.375rem}.select:focus,.select:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.select:focus,.select:focus-within{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.select:focus,.select:focus-within{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate;z-index:1}.select:has(>select[disabled]),.select:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.select:has(>select[disabled]),.select:is(:disabled,[disabled]){color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.select:has(>select[disabled]),.select:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.select:has(>select[disabled]),.select:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.select:has(>select[disabled])>select[disabled]{cursor:not-allowed}.card{border-radius:var(--radius-box);outline-offset:2px;outline:0 solid #0000;flex-direction:column;transition:outline .2s ease-in-out;display:flex;position:relative}.card:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.card:focus{outline-offset:2px;outline:2px solid #0000}}.card:focus-visible{outline-color:currentColor}.card :where(figure:first-child){border-start-start-radius:inherit;border-start-end-radius:inherit;border-end-end-radius:unset;border-end-start-radius:unset;overflow:hidden}.card :where(figure:last-child){border-start-start-radius:unset;border-start-end-radius:unset;border-end-end-radius:inherit;border-end-start-radius:inherit;overflow:hidden}.card:where(.card-border){border:var(--border)solid var(--color-base-200)}.card:where(.card-dash){border:var(--border)dashed var(--color-base-200)}.card.image-full{display:grid}.card.image-full>*{grid-row-start:1;grid-column-start:1}.card.image-full>.card-body{color:var(--color-neutral-content);position:relative}.card.image-full :where(figure){border-radius:inherit;overflow:hidden}.card.image-full>figure img{object-fit:cover;filter:brightness(28%);height:100%}.card figure{justify-content:center;align-items:center;display:flex}.card:has(>input:is(input[type=checkbox],input[type=radio])){cursor:pointer;-webkit-user-select:none;user-select:none}.card:has(>:checked){outline:2px solid}.swap{cursor:pointer;vertical-align:middle;webkit-user-select:none;-webkit-user-select:none;user-select:none;place-content:center;display:inline-grid;position:relative}.swap input{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none}.swap>*{grid-row-start:1;grid-column-start:1;transition-property:transform,rotate,opacity;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1)}.swap .swap-on,.swap .swap-indeterminate,.swap input:indeterminate~.swap-on,.swap input:is(:checked,:indeterminate)~.swap-off{opacity:0}.swap input:checked~.swap-on,.swap input:indeterminate~.swap-indeterminate{opacity:1;backface-visibility:visible}.avatar{vertical-align:middle;display:inline-flex;position:relative}.avatar>div{aspect-ratio:1;display:block;overflow:hidden}.avatar img{object-fit:cover;width:100%;height:100%}.checkbox{border:var(--border)solid var(--input-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.checkbox{border:var(--border)solid var(--input-color,color-mix(in oklab,var(--color-base-content)20%,#0000))}}.checkbox{cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--radius-selector);vertical-align:middle;color:var(--color-base-content);box-shadow:0 1px oklch(0% 0 0/calc(var(--depth)*.1)) inset,0 0 #0000 inset,0 0 #0000;--size:calc(var(--size-selector,.25rem)*6);width:var(--size);height:var(--size);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);flex-shrink:0;padding:.25rem;transition:background-color .2s,box-shadow .2s;position:relative}.checkbox:before{--tw-content:"";content:var(--tw-content);opacity:0;clip-path:polygon(20% 100%,20% 80%,50% 80%,50% 80%,70% 80%,70% 100%);width:100%;height:100%;box-shadow:0 3px oklch(100% 0 0/calc(var(--depth)*.1)) inset;background-color:currentColor;font-size:1rem;line-height:.75;transition:clip-path .3s .1s,opacity .1s .1s,rotate .3s .1s,translate .3s .1s;display:block;rotate:45deg}.checkbox:focus-visible{outline:2px solid var(--input-color,currentColor);outline-offset:2px}.checkbox:checked,.checkbox[aria-checked=true]{background-color:var(--input-color,#0000);box-shadow:0 0 #0000 inset,0 8px 0 -4px oklch(100% 0 0/calc(var(--depth)*.1)) inset,0 1px oklch(0% 0 0/calc(var(--depth)*.1))}:is(.checkbox:checked,.checkbox[aria-checked=true]):before{clip-path:polygon(20% 100%,20% 80%,50% 80%,50% 0%,70% 0%,70% 100%);opacity:1}@media (forced-colors:active){:is(.checkbox:checked,.checkbox[aria-checked=true]):before{--tw-content:"✔︎";clip-path:none;background-color:#0000;rotate:none}}@media print{:is(.checkbox:checked,.checkbox[aria-checked=true]):before{--tw-content:"✔︎";clip-path:none;background-color:#0000;rotate:none}}.checkbox:indeterminate:before{opacity:1;clip-path:polygon(20% 100%,20% 80%,50% 80%,50% 80%,80% 80%,80% 100%);translate:0 -35%;rotate:none}.checkbox:disabled{cursor:not-allowed;opacity:.2}.drawer{grid-auto-columns:max-content auto;width:100%;display:grid;position:relative}.stats{border-radius:var(--radius-box);grid-auto-flow:column;display:inline-grid;position:relative;overflow-x:auto}.progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--radius-box);background-color:currentColor;width:100%;height:.5rem;position:relative;overflow:hidden}@supports (color:color-mix(in lab,red,red)){.progress{background-color:color-mix(in oklab,currentColor 20%,transparent)}}.progress{color:var(--color-base-content)}.progress:indeterminate{background-image:repeating-linear-gradient(90deg,currentColor -1% 10%,#0000 10% 90%);background-position-x:15%;background-size:200%;animation:5s ease-in-out infinite progress}@supports ((-moz-appearance:none)){.progress:indeterminate::-moz-progress-bar{background-color:#0000;background-image:repeating-linear-gradient(90deg,currentColor -1% 10%,#0000 10% 90%);background-position-x:15%;background-size:200%;animation:5s ease-in-out infinite progress}.progress::-moz-progress-bar{border-radius:var(--radius-box);background-color:currentColor}}@supports ((-webkit-appearance:none)){.progress::-webkit-progress-bar{border-radius:var(--radius-box);background-color:#0000}.progress::-webkit-progress-value{border-radius:var(--radius-box);background-color:currentColor}}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.relative\\!{position:relative!important}.static{position:static}.sticky{position:sticky}.tooltip-bottom>.tooltip-content,.tooltip-bottom[data-tip]:before{transform:translate(-50%)translateY(var(--tt-pos,-.25rem));inset:var(--tt-off)auto auto 50%}.tooltip-bottom:after{transform:translate(-50%)translateY(var(--tt-pos,-.25rem))rotate(180deg);inset:var(--tt-tail)auto auto 50%}.tooltip-left>.tooltip-content,.tooltip-left[data-tip]:before{transform:translate(calc(var(--tt-pos,.25rem) - .25rem))translateY(-50%);inset:50% var(--tt-off)auto auto}.tooltip-left:after{transform:translate(var(--tt-pos,.25rem))translateY(-50%)rotate(-90deg);inset:50% calc(var(--tt-tail) + 1px)auto auto}.tooltip-top>.tooltip-content,.tooltip-top[data-tip]:before{transform:translate(-50%)translateY(var(--tt-pos,.25rem));inset:auto auto var(--tt-off)50%}.tooltip-top:after{transform:translate(-50%)translateY(var(--tt-pos,.25rem));inset:auto auto var(--tt-tail)50%}.inset-0{inset:calc(var(--spacing)*0)}.inset-x-0{inset-inline:calc(var(--spacing)*0)}.inset-y-0{inset-block:calc(var(--spacing)*0)}.-top-0\\.5{top:calc(var(--spacing)*-.5)}.top-0{top:calc(var(--spacing)*0)}.top-1\\.5{top:calc(var(--spacing)*1.5)}.top-1\\/2{top:50%}.top-1\\/2\\!{top:50%!important}.top-4\\!{top:calc(var(--spacing)*4)!important}.top-\\[-30px\\]{top:-30px}.top-auto\\!{top:auto!important}.-right-0\\.5{right:calc(var(--spacing)*-.5)}.right-0{right:calc(var(--spacing)*0)}.right-1\\.5{right:calc(var(--spacing)*1.5)}.right-4{right:calc(var(--spacing)*4)}.right-4\\!{right:calc(var(--spacing)*4)!important}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-1\\.5{bottom:calc(var(--spacing)*1.5)}.bottom-2{bottom:calc(var(--spacing)*2)}.bottom-4\\!{bottom:calc(var(--spacing)*4)!important}.bottom-\\[-50px\\]{bottom:-50px}.bottom-\\[3\\%\\]{bottom:3%}.left-0{left:calc(var(--spacing)*0)}.left-1\\.5{left:calc(var(--spacing)*1.5)}.left-1\\/2{left:50%}.left-1\\/2\\!{left:50%!important}.left-4\\!{left:calc(var(--spacing)*4)!important}.left-auto\\!{left:auto!important}.textarea{border:var(--border)solid #0000;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--radius-field);background-color:var(--color-base-100);vertical-align:middle;border-color:var(--input-color);width:clamp(3rem,20rem,100%);min-height:5rem;box-shadow:0 1px var(--input-color) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset;flex-shrink:1;padding-block:.5rem;padding-inline:.75rem;font-size:.875rem}@supports (color:color-mix(in lab,red,red)){.textarea{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000) inset,0 -1px oklch(100% 0 0/calc(var(--depth)*.1)) inset}}.textarea{--input-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.textarea{--input-color:color-mix(in oklab,var(--color-base-content)20%,#0000)}}.textarea textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#0000;border:none}.textarea textarea:focus,.textarea textarea:focus-within{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.textarea textarea:focus,.textarea textarea:focus-within{outline-offset:2px;outline:2px solid #0000}}.textarea:focus,.textarea:focus-within{--input-color:var(--color-base-content);box-shadow:0 1px var(--input-color)}@supports (color:color-mix(in lab,red,red)){.textarea:focus,.textarea:focus-within{box-shadow:0 1px color-mix(in oklab,var(--input-color)calc(var(--depth)*10%),#0000)}}.textarea:focus,.textarea:focus-within{outline:2px solid var(--input-color);outline-offset:2px;isolation:isolate}.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){cursor:not-allowed;border-color:var(--color-base-200);background-color:var(--color-base-200);color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){color:color-mix(in oklab,var(--color-base-content)40%,transparent)}}:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]))::placeholder{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){:is(.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]))::placeholder{color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.textarea:has(>textarea[disabled]),.textarea:is(:disabled,[disabled]){box-shadow:none}.textarea:has(>textarea[disabled])>textarea[disabled]{cursor:not-allowed}.btn-active{--btn-bg:var(--btn-color,var(--color-base-200))}@supports (color:color-mix(in lab,red,red)){.btn-active{--btn-bg:color-mix(in oklab,var(--btn-color,var(--color-base-200)),#000 7%)}}.btn-active{--btn-shadow:0 0 0 0 oklch(0% 0 0/0),0 0 0 0 oklch(0% 0 0/0);isolation:isolate}.stack{grid-template-rows:3px 4px 1fr 4px 3px;grid-template-columns:3px 4px 1fr 4px 3px;display:inline-grid}.stack>*{width:100%;height:100%}.stack>:nth-child(n+2){opacity:.7;width:100%}.stack>:nth-child(2){z-index:2;opacity:.9}.stack>:first-child{z-index:3;width:100%}:is(.stack,.stack.stack-bottom)>*{grid-area:3/3/6/4}:is(.stack,.stack.stack-bottom)>:nth-child(2){grid-area:2/2/5/5}:is(.stack,.stack.stack-bottom)>:first-child{grid-area:1/1/4/6}.stack.stack-top>*{grid-area:1/3/4/4}.stack.stack-top>:nth-child(2){grid-area:2/2/5/5}.stack.stack-top>:first-child{grid-area:3/1/6/6}.stack.stack-start>*{grid-area:3/1/4/4}.stack.stack-start>:nth-child(2){grid-area:2/2/5/5}.stack.stack-start>:first-child{grid-area:1/3/6/6}.stack.stack-end>*{grid-area:3/3/4/6}.stack.stack-end>:nth-child(2){grid-area:2/2/5/5}.stack.stack-end>:first-child{grid-area:1/1/6/4}.z-1{z-index:1}.z-2{z-index:2}.z-10{z-index:10}.drawer-content{grid-row-start:1;grid-column-start:2;min-width:0}.drawer-end{grid-auto-columns:auto max-content}.drawer-end>.drawer-toggle~.drawer-content{grid-column-start:1}.drawer-end>.drawer-toggle~.drawer-side{grid-column-start:2;justify-items:end}.drawer-end>.drawer-toggle~.drawer-side>:not(.drawer-overlay){translate:100%}[dir=rtl] :is(.drawer-end>.drawer-toggle~.drawer-side>:not(.drawer-overlay)){translate:-100%}.drawer-end>.drawer-toggle:checked~.drawer-side>:not(.drawer-overlay){translate:0%}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.divider{white-space:nowrap;height:1rem;margin:var(--divider-m,1rem 0);--divider-color:var(--color-base-content);flex-direction:row;align-self:stretch;align-items:center;display:flex}@supports (color:color-mix(in lab,red,red)){.divider{--divider-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}.divider:before,.divider:after{content:"";background-color:var(--divider-color);flex-grow:1;width:100%;height:.125rem}@media print{.divider:before,.divider:after{border:.5px solid}}.divider:not(:empty){gap:1rem}.m-0{margin:calc(var(--spacing)*0)}.m-auto{margin:auto}.filter{flex-wrap:wrap;display:flex}.filter input[type=radio]{width:auto}.filter input{opacity:1;transition:margin .1s,opacity .3s,padding .3s,border-width .1s;overflow:hidden;scale:1}.filter input:not(:last-child){margin-inline-end:.25rem}.filter input.filter-reset{aspect-ratio:1}.filter input.filter-reset:after{content:"×"}.filter:not(:has(input:checked:not(.filter-reset))) .filter-reset,.filter:not(:has(input:checked:not(.filter-reset))) input[type=reset],.filter:has(input:checked:not(.filter-reset)) input:not(:checked,.filter-reset,input[type=reset]){opacity:0;border-width:0;width:0;margin-inline:0;padding-inline:0;scale:0}.mx-2{margin-inline:calc(var(--spacing)*2)}.mx-auto{margin-inline:auto}.my-20{margin-block:calc(var(--spacing)*20)}.label{white-space:nowrap;color:currentColor;align-items:center;gap:.375rem;display:inline-flex}@supports (color:color-mix(in lab,red,red)){.label{color:color-mix(in oklab,currentColor 60%,transparent)}}.label:has(input){cursor:pointer}.label:is(.input>*,.select>*){white-space:nowrap;height:calc(100% - .5rem);font-size:inherit;align-items:center;padding-inline:.75rem;display:flex}.label:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid currentColor;margin-inline:-.75rem .75rem}@supports (color:color-mix(in lab,red,red)){.label:is(.input>*,.select>*):first-child{border-inline-end:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)}}.label:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid currentColor;margin-inline:.75rem -.75rem}@supports (color:color-mix(in lab,red,red)){.label:is(.input>*,.select>*):last-child{border-inline-start:var(--border)solid color-mix(in oklab,currentColor 10%,#0000)}}.join-item:where(:not(:first-child,:disabled,[disabled],.btn-disabled)){margin-block-start:0;margin-inline-start:calc(var(--border,1px)*-1)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-5{margin-top:calc(var(--spacing)*5)}.mt-6{margin-top:calc(var(--spacing)*6)}.breadcrumbs{max-width:100%;padding-block:.5rem;overflow-x:auto}.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol{white-space:nowrap;align-items:center;min-height:min-content;display:flex}:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li{align-items:center;display:flex}:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li>*{cursor:pointer;align-items:center;gap:.5rem;display:flex}@media (hover:hover){:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li>:hover{text-decoration-line:underline}}:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li>:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li>:focus{outline-offset:2px;outline:2px solid #0000}}:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li>:focus-visible{outline-offset:2px;outline:2px solid}:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li+:before{content:"";opacity:.4;background-color:#0000;border-top:1px solid;border-right:1px solid;width:.375rem;height:.375rem;margin-left:.5rem;margin-right:.75rem;display:block;rotate:45deg}[dir=rtl] :is(:is(.breadcrumbs>menu,.breadcrumbs>ul,.breadcrumbs>ol)>li)+:before{rotate:-135deg}.mr-2{margin-right:calc(var(--spacing)*2)}.fieldset-legend{color:var(--color-base-content);justify-content:space-between;align-items:center;gap:.5rem;margin-bottom:-.25rem;padding-block:.5rem;font-weight:600;display:flex}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.box-border{box-sizing:border-box}.status{aspect-ratio:1;border-radius:var(--radius-selector);background-color:var(--color-base-content);width:.5rem;height:.5rem;display:inline-block}@supports (color:color-mix(in lab,red,red)){.status{background-color:color-mix(in oklab,var(--color-base-content)20%,transparent)}}.status{vertical-align:middle;color:#0000004d;background-position:50%;background-repeat:no-repeat}@supports (color:color-mix(in lab,red,red)){.status{color:#0000004d}@supports (color:color-mix(in lab,red,red)){.status{color:color-mix(in oklab,var(--color-black)30%,transparent)}}}.status{background-image:radial-gradient(circle at 35% 30%,oklch(1 0 0/calc(var(--depth)*.5)),#0000);box-shadow:0 2px 3px -1px}@supports (color:color-mix(in lab,red,red)){.status{box-shadow:0 2px 3px -1px color-mix(in oklab,currentColor calc(var(--depth)*100%),#0000)}}.badge{border-radius:var(--radius-selector);vertical-align:middle;color:var(--badge-fg);border:var(--border)solid var(--badge-color,var(--color-base-200));width:fit-content;padding-inline:calc(.25rem*3 - var(--border));background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);background-color:var(--badge-bg);--badge-bg:var(--badge-color,var(--color-base-100));--badge-fg:var(--color-base-content);--size:calc(var(--size-selector,.25rem)*6);height:var(--size);justify-content:center;align-items:center;gap:.5rem;font-size:.875rem;display:inline-flex}.badge.badge-outline{--badge-fg:var(--badge-color);--badge-bg:#0000;background-image:none;border-color:currentColor}.badge.badge-dash{--badge-fg:var(--badge-color);--badge-bg:#0000;background-image:none;border-style:dashed;border-color:currentColor}.badge.badge-soft{color:var(--badge-color,var(--color-base-content));background-color:var(--badge-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.badge.badge-soft{background-color:color-mix(in oklab,var(--badge-color,var(--color-base-content))8%,var(--color-base-100))}}.badge.badge-soft{border-color:var(--badge-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.badge.badge-soft{border-color:color-mix(in oklab,var(--badge-color,var(--color-base-content))10%,var(--color-base-100))}}.badge.badge-soft{background-image:none}.kbd{border-radius:var(--radius-field);background-color:var(--color-base-200);vertical-align:middle;border:var(--border)solid var(--color-base-content);justify-content:center;align-items:center;padding-left:.5em;padding-right:.5em;display:inline-flex}@supports (color:color-mix(in lab,red,red)){.kbd{border:var(--border)solid color-mix(in srgb,var(--color-base-content)20%,#0000)}}.kbd{border-bottom:calc(var(--border) + 1px)solid var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.kbd{border-bottom:calc(var(--border) + 1px)solid color-mix(in srgb,var(--color-base-content)20%,#0000)}}.kbd{--size:calc(var(--size-selector,.25rem)*6);height:var(--size);min-width:var(--size);font-size:.875rem}.tabs{--tabs-height:auto;--tabs-direction:row;height:var(--tabs-height);flex-wrap:wrap;flex-direction:var(--tabs-direction);display:flex}.footer{grid-auto-flow:row;place-items:start;gap:2.5rem 1rem;width:100%;font-size:.875rem;line-height:1.25rem;display:grid}.footer>*{place-items:start;gap:.5rem;display:grid}.footer.footer-center{text-align:center;grid-auto-flow:column dense;place-items:center}.footer.footer-center>*{place-items:center}.card-body{padding:var(--card-p,1.5rem);font-size:var(--card-fs,.875rem);flex-direction:column;flex:auto;gap:.5rem;display:flex}.card-body :where(p){flex-grow:1}.alert{border-radius:var(--radius-box);color:var(--color-base-content);background-color:var(--alert-color,var(--color-base-200));text-align:start;border:var(--border)solid var(--color-base-200);background-size:auto,calc(var(--noise)*100%);background-image:none,var(--fx-noise);box-shadow:0 3px 0 -2px oklch(100% 0 0/calc(var(--depth)*.08)) inset,0 1px #000,0 4px 3px -2px oklch(0% 0 0/calc(var(--depth)*.08));grid-template-columns:auto;grid-auto-flow:column;justify-content:start;place-items:center start;gap:1rem;padding-block:.75rem;padding-inline:1rem;font-size:.875rem;line-height:1.25rem;display:grid}@supports (color:color-mix(in lab,red,red)){.alert{box-shadow:0 3px 0 -2px oklch(100% 0 0/calc(var(--depth)*.08)) inset,0 1px color-mix(in oklab,color-mix(in oklab,#000 20%,var(--alert-color,var(--color-base-200)))calc(var(--depth)*20%),#0000),0 4px 3px -2px oklch(0% 0 0/calc(var(--depth)*.08))}}.alert:has(:nth-child(2)){grid-template-columns:auto minmax(auto,1fr)}.alert.alert-outline{color:var(--alert-color);box-shadow:none;background-color:#0000;background-image:none}.alert.alert-dash{color:var(--alert-color);box-shadow:none;background-color:#0000;background-image:none;border-style:dashed}.alert.alert-soft{color:var(--alert-color,var(--color-base-content));background:var(--alert-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.alert.alert-soft{background:color-mix(in oklab,var(--alert-color,var(--color-base-content))8%,var(--color-base-100))}}.alert.alert-soft{border-color:var(--alert-color,var(--color-base-content))}@supports (color:color-mix(in lab,red,red)){.alert.alert-soft{border-color:color-mix(in oklab,var(--alert-color,var(--color-base-content))10%,var(--color-base-100))}}.alert.alert-soft{box-shadow:none;background-image:none}.fieldset{grid-template-columns:1fr;grid-auto-rows:max-content;gap:.375rem;padding-block:.25rem;font-size:.75rem;display:grid}.card-title{font-size:var(--cardtitle-fs,1.125rem);align-items:center;gap:.5rem;font-weight:600;display:flex}.line-clamp-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.line-clamp-2{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.line-clamp-3{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.mask{vertical-align:middle;display:inline-block;-webkit-mask-position:50%;mask-position:50%;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.block{display:block}.flex{display:flex}.grid{display:grid}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.aspect-square{aspect-ratio:1}.aspect-video{aspect-ratio:var(--aspect-video)}.btn-circle{width:var(--size);height:var(--size);border-radius:3.40282e38px;padding-inline:0}.size-3\\.5{width:calc(var(--spacing)*3.5);height:calc(var(--spacing)*3.5)}.size-4{width:calc(var(--spacing)*4);height:calc(var(--spacing)*4)}.size-6{width:calc(var(--spacing)*6);height:calc(var(--spacing)*6)}.size-7{width:calc(var(--spacing)*7);height:calc(var(--spacing)*7)}.size-8{width:calc(var(--spacing)*8);height:calc(var(--spacing)*8)}.size-12{width:calc(var(--spacing)*12);height:calc(var(--spacing)*12)}.size-20{width:calc(var(--spacing)*20);height:calc(var(--spacing)*20)}.size-\\[61\\.8\\%\\]{width:61.8%;height:61.8%}.size-full{width:100%;height:100%}.h-\\(--app-playlist-header-height\\){height:var(--app-playlist-header-height)}.h-1{height:calc(var(--spacing)*1)}.h-2\\.5{height:calc(var(--spacing)*2.5)}.h-2\\/3{height:66.6667%}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-12{height:calc(var(--spacing)*12)}.h-14{height:calc(var(--spacing)*14)}.h-15{height:calc(var(--spacing)*15)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-28{height:calc(var(--spacing)*28)}.h-32{height:calc(var(--spacing)*32)}.h-auto{height:auto}.h-full{height:100%}.h-screen{height:100vh}.max-h-2\\/3{max-height:66.6667%}.max-h-72{max-height:calc(var(--spacing)*72)}.max-h-96{max-height:calc(var(--spacing)*96)}.min-h-screen{min-height:100vh}.w-\\(--app-playlist-width\\)\\!{width:var(--app-playlist-width)!important}.w-\\(--app-xplayer-width\\)\\!{width:var(--app-xplayer-width)!important}.w-0{width:calc(var(--spacing)*0)}.w-1\\/3{width:33.3333%}.w-2\\.5{width:calc(var(--spacing)*2.5)}.w-4{width:calc(var(--spacing)*4)}.w-4\\/5{width:80%}.w-8{width:calc(var(--spacing)*8)}.w-12{width:calc(var(--spacing)*12)}.w-15{width:calc(var(--spacing)*15)}.w-16{width:calc(var(--spacing)*16)}.w-18{width:calc(var(--spacing)*18)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-32{width:calc(var(--spacing)*32)}.w-35{width:calc(var(--spacing)*35)}.w-36{width:calc(var(--spacing)*36)}.w-48{width:calc(var(--spacing)*48)}.w-50{width:calc(var(--spacing)*50)}.w-80{width:calc(var(--spacing)*80)}.w-fit{width:fit-content}.w-full{width:100%}.w-lg{width:var(--container-lg)}.w-md{width:var(--container-md)}.w-xs{width:var(--container-xs)}.max-w-2xl{max-width:var(--container-2xl)}.max-w-214{max-width:calc(var(--spacing)*214)}.max-w-\\[80\\%\\]{max-width:80%}.max-w-full{max-width:100%}.max-w-xl{max-width:var(--container-xl)}.min-w-10{min-width:calc(var(--spacing)*10)}.min-w-32{min-width:calc(var(--spacing)*32)}.flex-1{flex:1}.flex-shrink{flex-shrink:1}.flex-shrink-0,.shrink-0{flex-shrink:0}.table-fixed{table-layout:fixed}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\\/2\\!{--tw-translate-x: -50% !important;translate:var(--tw-translate-x)var(--tw-translate-y)!important}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2\\!{--tw-translate-y: -50% !important;translate:var(--tw-translate-x)var(--tw-translate-y)!important}.\\!scale-80{--tw-scale-x:80%!important;--tw-scale-y:80%!important;--tw-scale-z:80%!important;scale:var(--tw-scale-x)var(--tw-scale-y)!important}.\\!scale-100{--tw-scale-x:100%!important;--tw-scale-y:100%!important;--tw-scale-z:100%!important;scale:var(--tw-scale-x)var(--tw-scale-y)!important}.scale-0{--tw-scale-x:0%;--tw-scale-y:0%;--tw-scale-z:0%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-100{--tw-scale-x:100%;--tw-scale-y:100%;--tw-scale-z:100%;scale:var(--tw-scale-x)var(--tw-scale-y)}.swap-rotate .swap-on,.swap-rotate input:indeterminate~.swap-on{rotate:45deg}.swap-rotate input:is(:checked,:indeterminate)~.swap-on,.swap-rotate.swap-active .swap-on{rotate:none}.swap-rotate input:is(:checked,:indeterminate)~.swap-off,.swap-rotate.swap-active .swap-off{rotate:-45deg}.rotate-45{rotate:45deg}.rotate-90{rotate:90deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.transform\\!{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)!important}.transform-gpu{transform:translateZ(0)var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.skeleton{border-radius:var(--radius-box);background-color:var(--color-base-300)}@media (prefers-reduced-motion:reduce){.skeleton{transition-duration:15s}}.skeleton{will-change:background-position;background-image:linear-gradient(105deg,#0000 0% 40%,var(--color-base-100)50%,#0000 60% 100%);background-position-x:-50%;background-repeat:no-repeat;background-size:200%;animation:1.8s ease-in-out infinite skeleton}.animate-\\[fadeOut_350ms_linear_forwards\\]{animation:.35s linear forwards fadeOut}.link{cursor:pointer;text-decoration-line:underline}.link:focus{--tw-outline-style:none;outline-style:none}@media (forced-colors:active){.link:focus{outline-offset:2px;outline:2px solid #0000}}.link:focus-visible{outline-offset:2px;outline:2px solid}.cursor-pointer{cursor:pointer}.cursor-zoom-in{cursor:zoom-in}.resize{resize:both}.grid-flow-col{grid-auto-flow:column}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-rows-5{grid-template-rows:repeat(5,minmax(0,1fr))}.flex-col{flex-direction:column}.\\!flex-nowrap{flex-wrap:nowrap!important}.flex-wrap{flex-wrap:wrap}.items-baseline{align-items:baseline}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-2\\.5{gap:calc(var(--spacing)*2.5)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-5{gap:calc(var(--spacing)*5)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}.gap-x-5{column-gap:calc(var(--spacing)*5)}:where(.space-x-1>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*1)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}.gap-y-2{row-gap:calc(var(--spacing)*2)}.overflow-hidden{overflow:hidden}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t-xl{border-top-left-radius:var(--radius-xl);border-top-right-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-base-300\\/15{border-color:var(--color-base-300)}@supports (color:color-mix(in lab,red,red)){.border-base-300\\/15{border-color:color-mix(in oklab,var(--color-base-300)15%,transparent)}}.border-base-content\\/10{border-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.border-base-content\\/10{border-color:color-mix(in oklab,var(--color-base-content)10%,transparent)}}.border-error{border-color:var(--color-error)}.border-gray-200{border-color:var(--color-gray-200)}.border-neutral-950{border-color:var(--color-neutral-950)}.border-rose-400\\/40{border-color:#ff667f66}@supports (color:color-mix(in lab,red,red)){.border-rose-400\\/40{border-color:color-mix(in oklab,var(--color-rose-400)40%,transparent)}}.\\!bg-white\\/50{background-color:#ffffff80!important}@supports (color:color-mix(in lab,red,red)){.\\!bg-white\\/50{background-color:color-mix(in oklab,var(--color-white)50%,transparent)!important}}.bg-base-100,.bg-base-100\\/60{background-color:var(--color-base-100)}@supports (color:color-mix(in lab,red,red)){.bg-base-100\\/60{background-color:color-mix(in oklab,var(--color-base-100)60%,transparent)}}.bg-base-100\\/90{background-color:var(--color-base-100)}@supports (color:color-mix(in lab,red,red)){.bg-base-100\\/90{background-color:color-mix(in oklab,var(--color-base-100)90%,transparent)}}.bg-base-200{background-color:var(--color-base-200)}.bg-base-300{background-color:var(--color-base-300)}.bg-base-content\\!{background-color:var(--color-base-content)!important}.bg-base-content\\/30{background-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.bg-base-content\\/30{background-color:color-mix(in oklab,var(--color-base-content)30%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-black\\/30{background-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.bg-black\\/30{background-color:color-mix(in oklab,var(--color-black)30%,transparent)}}.bg-black\\/90{background-color:#000000e6}@supports (color:color-mix(in lab,red,red)){.bg-black\\/90{background-color:color-mix(in oklab,var(--color-black)90%,transparent)}}.bg-error\\/10{background-color:var(--color-error)}@supports (color:color-mix(in lab,red,red)){.bg-error\\/10{background-color:color-mix(in oklab,var(--color-error)10%,transparent)}}.bg-gray-50{background-color:var(--color-gray-50)}.bg-neutral-100{background-color:var(--color-neutral-100)}.bg-neutral-800{background-color:var(--color-neutral-800)}.bg-pink-400\\/80{background-color:#fb64b6cc}@supports (color:color-mix(in lab,red,red)){.bg-pink-400\\/80{background-color:color-mix(in oklab,var(--color-pink-400)80%,transparent)}}.bg-primary,.bg-primary\\/10{background-color:var(--color-primary)}@supports (color:color-mix(in lab,red,red)){.bg-primary\\/10{background-color:color-mix(in oklab,var(--color-primary)10%,transparent)}}.bg-primary\\/30\\!{background-color:var(--color-primary)!important}@supports (color:color-mix(in lab,red,red)){.bg-primary\\/30\\!{background-color:color-mix(in oklab,var(--color-primary)30%,transparent)!important}}.bg-primary\\/80{background-color:var(--color-primary)}@supports (color:color-mix(in lab,red,red)){.bg-primary\\/80{background-color:color-mix(in oklab,var(--color-primary)80%,transparent)}}.bg-rose-500\\/10{background-color:#ff23571a}@supports (color:color-mix(in lab,red,red)){.bg-rose-500\\/10{background-color:color-mix(in oklab,var(--color-rose-500)10%,transparent)}}.bg-white{background-color:var(--color-white)}.bg-linear-to-b{--tw-gradient-position:to bottom}@supports (background-image:linear-gradient(in lab,red,red)){.bg-linear-to-b{--tw-gradient-position:to bottom in oklab}}.bg-linear-to-b{background-image:linear-gradient(var(--tw-gradient-stops))}.bg-linear-to-t{--tw-gradient-position:to top}@supports (background-image:linear-gradient(in lab,red,red)){.bg-linear-to-t{--tw-gradient-position:to top in oklab}}.bg-linear-to-t{background-image:linear-gradient(var(--tw-gradient-stops))}.from-black\\/30{--tw-gradient-from:#0000004d}@supports (color:color-mix(in lab,red,red)){.from-black\\/30{--tw-gradient-from:color-mix(in oklab,var(--color-black)30%,transparent)}}.from-black\\/30{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-black\\/50{--tw-gradient-from:#00000080}@supports (color:color-mix(in lab,red,red)){.from-black\\/50{--tw-gradient-from:color-mix(in oklab,var(--color-black)50%,transparent)}}.from-black\\/50{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-10\\%{--tw-gradient-from-position:10%}.to-transparent{--tw-gradient-to:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.loading-spinner{-webkit-mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg width='24' height='24' stroke='black' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform-origin='center'%3E%3Ccircle cx='12' cy='12' r='9.5' fill='none' stroke-width='3' stroke-linecap='round'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='2s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dasharray' values='0,150;42,150;42,150' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3Canimate attributeName='stroke-dashoffset' values='0;-16;-59' keyTimes='0;0.475;1' dur='1.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/g%3E%3C/svg%3E")}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.object-center{object-position:center}.p-0{padding:calc(var(--spacing)*0)}.p-0\\!{padding:calc(var(--spacing)*0)!important}.p-0\\.5{padding:calc(var(--spacing)*.5)}.p-1{padding:calc(var(--spacing)*1)}.p-2{padding:calc(var(--spacing)*2)}.p-2\\.5{padding:calc(var(--spacing)*2.5)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-7{padding:calc(var(--spacing)*7)}.p-8{padding:calc(var(--spacing)*8)}.p-10{padding:calc(var(--spacing)*10)}.badge-sm{--size:calc(var(--size-selector,.25rem)*5);padding-inline:calc(.25rem*2.5 - var(--border));font-size:.75rem}.px-\\(--app-playlist-space\\){padding-inline:var(--app-playlist-space)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-7{padding-inline:calc(var(--spacing)*7)}.px-20{padding-inline:calc(var(--spacing)*20)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-8{padding-block:calc(var(--spacing)*8)}.py-\\[1px\\]{padding-block:1px}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-\\[calc\\(var\\(--app-playlist-header-height\\)\\+var\\(--spacing\\)\\*5\\)\\]{padding-top:calc(var(--app-playlist-header-height) + var(--spacing)*5)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-3{padding-right:calc(var(--spacing)*3)}.pr-36{padding-right:calc(var(--spacing)*36)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-5{padding-bottom:calc(var(--spacing)*5)}.pl-3{padding-left:calc(var(--spacing)*3)}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.align-top{vertical-align:top}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-6xl{font-size:var(--text-6xl);line-height:var(--tw-leading,var(--text-6xl--line-height))}.text-8xl{font-size:var(--text-8xl);line-height:var(--tw-leading,var(--text-8xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.kbd-sm{--size:calc(var(--size-selector,.25rem)*5);font-size:.75rem}.leading-6{--tw-leading:calc(var(--spacing)*6);line-height:calc(var(--spacing)*6)}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.link-primary{color:var(--color-primary)}@media (hover:hover){.link-primary:hover{color:var(--color-primary)}@supports (color:color-mix(in lab,red,red)){.link-primary:hover{color:color-mix(in oklab,var(--color-primary)80%,#000)}}}.range-primary{color:var(--color-primary);--range-thumb:var(--color-primary-content)}.progress-primary{color:var(--color-primary)}.text-amber-400{color:var(--color-amber-400)}.text-base-300{color:var(--color-base-300)}.text-base-content,.text-base-content\\/30{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.text-base-content\\/30{color:color-mix(in oklab,var(--color-base-content)30%,transparent)}}.text-base-content\\/50{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.text-base-content\\/50{color:color-mix(in oklab,var(--color-base-content)50%,transparent)}}.text-base-content\\/60{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.text-base-content\\/60{color:color-mix(in oklab,var(--color-base-content)60%,transparent)}}.text-base-content\\/70{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.text-base-content\\/70{color:color-mix(in oklab,var(--color-base-content)70%,transparent)}}.text-base-content\\/80{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.text-base-content\\/80{color:color-mix(in oklab,var(--color-base-content)80%,transparent)}}.text-error{color:var(--color-error)}.text-error-content{color:var(--color-error-content)}.text-gray-100{color:var(--color-gray-100)}.text-gray-700{color:var(--color-gray-700)}.text-neutral-300{color:var(--color-neutral-300)}.text-neutral-500{color:var(--color-neutral-500)}.text-primary{color:var(--color-primary)}.text-red-400{color:var(--color-red-400)}.text-rose-400{color:var(--color-rose-400)}.text-white{color:var(--color-white)}.text-yellow-400{color:var(--color-yellow-400)}.btn-link{--btn-border:#0000;--btn-bg:#0000;--btn-fg:var(--color-primary);--btn-noise:none;--btn-shadow:"";outline-color:currentColor;text-decoration-line:underline}.btn-link:is(.btn-active,:hover,:active:focus,:focus-visible){--btn-border:#0000;--btn-bg:#0000;text-decoration-line:underline}.no-underline{text-decoration-line:none}.subpixel-antialiased{-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto}.swap-active .swap-off{opacity:0}.swap-active .swap-on{opacity:1}.opacity-0{opacity:0}.opacity-40{opacity:.4}.opacity-60{opacity:.6}.opacity-80{opacity:.8}.opacity-100{opacity:1}.shadow-xl\\/60{--tw-shadow-alpha:60%;--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,oklab(0% 0 0/.6)),0 8px 10px -6px var(--tw-shadow-color,oklab(0% 0 0/.6));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xs\\/30{--tw-shadow-alpha:30%;--tw-shadow:0 1px 2px 0 var(--tw-shadow-color,oklab(0% 0 0/.3));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xs\\/90{--tw-shadow-alpha:90%;--tw-shadow:0 1px 2px 0 var(--tw-shadow-color,oklab(0% 0 0/.9));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow,.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-4{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(4px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-base-content\\/90{--tw-ring-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.ring-base-content\\/90{--tw-ring-color:color-mix(in oklab,var(--color-base-content)90%,transparent)}}.ring-primary{--tw-ring-color:var(--color-primary)}.btn-ghost:not(.btn-active,:hover,:active:focus,:focus-visible){--btn-shadow:"";--btn-bg:#0000;--btn-border:#0000;--btn-noise:none}.btn-ghost:not(.btn-active,:hover,:active:focus,:focus-visible):not(:disabled,[disabled],.btn-disabled){--btn-fg:currentColor;outline-color:currentColor}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.contrast-200{--tw-contrast:contrast(200%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-xl\\/30{--tw-drop-shadow-alpha:30%;--tw-drop-shadow-size:drop-shadow(0 9px 7px var(--tw-drop-shadow-color,oklab(0% 0 0/.3)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-xs\\/60{--tw-drop-shadow-alpha:60%;--tw-drop-shadow-size:drop-shadow(0 1px 1px var(--tw-drop-shadow-color,oklab(0% 0 0/.6)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-xs\\/90{--tw-drop-shadow-alpha:90%;--tw-drop-shadow-size:drop-shadow(0 1px 1px var(--tw-drop-shadow-color,oklab(0% 0 0/.9)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.grayscale{--tw-grayscale:grayscale(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.invert{--tw-invert:invert(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-2xl{--tw-backdrop-blur:blur(var(--blur-2xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-xs{--tw-backdrop-blur:blur(var(--blur-xs));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-brightness-50{--tw-backdrop-brightness:brightness(50%);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-saturate-200{--tw-backdrop-saturate:saturate(200%);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-\\[height\\]{transition-property:height;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-\\[width\\]{transition-property:width;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-none{transition-property:none}.delay-60{transition-delay:60ms}.duration-100{--tw-duration:.1s;transition-duration:.1s}.duration-150{--tw-duration:.15s;transition-duration:.15s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-450{--tw-duration:.45s;transition-duration:.45s}.duration-550{--tw-duration:.55s;transition-duration:.55s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-linear{--tw-ease:linear;transition-timing-function:linear}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.\\[will-change\\:transform\\]{will-change:transform}.btn-sm{--fontsize:.75rem;--btn-p:.75rem;--size:calc(var(--size-field,.25rem)*8)}.btn-xs{--fontsize:.6875rem;--btn-p:.5rem;--size:calc(var(--size-field,.25rem)*6)}.card-sm .card-body{--card-p:1rem;--card-fs:.75rem}.card-sm .card-title{--cardtitle-fs:1rem}.badge-neutral{--badge-color:var(--color-neutral);--badge-fg:var(--color-neutral-content)}.btn-error{--btn-color:var(--color-error);--btn-fg:var(--color-error-content)}.btn-neutral{--btn-color:var(--color-neutral);--btn-fg:var(--color-neutral-content)}.btn-primary{--btn-color:var(--color-primary);--btn-fg:var(--color-primary-content)}.select-none{-webkit-user-select:none;user-select:none}.select-text{-webkit-user-select:text;user-select:text}.text-shadow-xs\\/60{--tw-text-shadow-alpha:60%;text-shadow:0px 1px 1px var(--tw-text-shadow-color,oklab(0% 0 0/.6))}.\\[--app-playlist-header-height\\:calc\\(var\\(--spacing\\)\\*16\\)\\]{--app-playlist-header-height:calc(var(--spacing)*16)}.\\[--app-playlist-ratio\\:calc\\(1-var\\(--app-xplayer-ratio\\)\\)\\]{--app-playlist-ratio:calc(1 - var(--app-xplayer-ratio))}.\\[--app-playlist-space\\:calc\\(var\\(--spacing\\)\\*4\\)\\]{--app-playlist-space:calc(var(--spacing)*4)}.\\[--app-playlist-width\\:calc\\(100\\%\\*var\\(--app-playlist-ratio\\)\\)\\]{--app-playlist-width:calc(100%*var(--app-playlist-ratio))}.\\[--app-xplayer-width\\:calc\\(100\\%\\*var\\(--app-xplayer-ratio\\)\\)\\]{--app-xplayer-width:calc(100%*var(--app-xplayer-ratio))}.\\[--range-fill\\:0\\]{--range-fill:0}.\\[content-visibility\\:auto\\]{content-visibility:auto}.range-xs{--range-thumb-size:calc(var(--size-selector,.25rem)*4)}.text-shadow-\\[0_0_1px_rgb\\(0_0_0_\\/0\\.5\\)\\,0_0_2px_rgb\\(55_55_55_\\/0\\.7\\)\\]{text-shadow:0 0 1px var(--tw-text-shadow-color,#00000080),0 0 2px var(--tw-text-shadow-color,#373737b3)}.text-shadow-\\[0_0_2px_rgba\\(0_0_0_\\/0\\.3\\)\\,0_0_2px_rgba\\(0_0_0_\\/0\\.3\\)\\,0_0_2px_rgba\\(0_0_0_\\/0\\.3\\)\\]{text-shadow:0 0 2px var(--tw-text-shadow-color,#0000004d),0 0 2px var(--tw-text-shadow-color,#0000004d),0 0 2px var(--tw-text-shadow-color,#0000004d)}.toggle-primary:checked,.toggle-primary[aria-checked=true]{--input-color:var(--color-primary)}.toggle-sm[type=checkbox],.toggle-sm:has([type=checkbox]){--size:calc(var(--size-selector,.25rem)*5)}@media (hover:hover){.group-hover\\:block:is(:where(.group):hover *){display:block}.group-hover\\:flex:is(:where(.group):hover *){display:flex}}.before\\:absolute:before{content:var(--tw-content);position:absolute}.before\\:inset-0:before{content:var(--tw-content);inset:calc(var(--spacing)*0)}.before\\:ml-8:before{content:var(--tw-content);margin-left:calc(var(--spacing)*8)}.before\\:rounded-lg:before{content:var(--tw-content);border-radius:var(--radius-lg)}.before\\:bg-black:before{content:var(--tw-content);background-color:var(--color-black)}.before\\:content-\\[\\\\\\'\\\\\\'\\]:before{--tw-content:\\'\\';content:var(--tw-content)}@media (hover:hover){.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:scale-\\[1\\.02\\]:hover{scale:1.02}.hover\\:bg-base-content\\/5:hover{background-color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-base-content\\/5:hover{background-color:color-mix(in oklab,var(--color-base-content)5%,transparent)}}.hover\\:bg-neutral-100:hover{background-color:var(--color-neutral-100)}.hover\\:bg-primary\\/15:hover{background-color:var(--color-primary)}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-primary\\/15:hover{background-color:color-mix(in oklab,var(--color-primary)15%,transparent)}}.hover\\:text-base-content\\/80:hover{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.hover\\:text-base-content\\/80:hover{color:color-mix(in oklab,var(--color-base-content)80%,transparent)}}.hover\\:text-primary:hover{color:var(--color-primary)}.hover\\:text-yellow-300:hover{color:var(--color-yellow-300)}.hover\\:no-underline\\!:hover{text-decoration-line:none!important}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-80:hover{opacity:.8}.hover\\:opacity-90:hover{opacity:.9}.hover\\:btn-error:hover{--btn-color:var(--color-error);--btn-fg:var(--color-error-content)}}.active\\:scale-95:active{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.disabled\\:text-base-content\\/30:disabled{color:var(--color-base-content)}@supports (color:color-mix(in lab,red,red)){.disabled\\:text-base-content\\/30:disabled{color:color-mix(in oklab,var(--color-base-content)30%,transparent)}}@media (prefers-reduced-motion:no-preference){.motion-safe\\:animate-spin{animation:var(--animate-spin)}}@media (min-width:40rem){.sm\\:\\[--app-xplayer-ratio\\:0\\.3\\]{--app-xplayer-ratio:.3}}@media (min-width:48rem){.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:\\[--app-xplayer-ratio\\:0\\.518\\]{--app-xplayer-ratio:.518}}@media (min-width:64rem){.lg\\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.lg\\:\\[--app-xplayer-ratio\\:0\\.618\\]{--app-xplayer-ratio:.618}}@media (min-width:80rem){.xl\\:grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.xl\\:px-36{padding-inline:calc(var(--spacing)*36)}}@media (min-width:96rem){.\\32xl\\:grid-cols-9{grid-template-columns:repeat(9,minmax(0,1fr))}.\\32xl\\:\\[--app-xplayer-ratio\\:0\\.718\\]{--app-xplayer-ratio:.718}}.\\[\\&\\:\\:-webkit-scrollbar-track\\]\\:mt-\\(--app-playlist-header-height\\)::-webkit-scrollbar-track{margin-top:var(--app-playlist-header-height)}}.range{--range-bg:var(--color-primary)}@supports (color:color-mix(in lab,red,red)){.range{--range-bg:color-mix(in oklch,var(--color-primary)30%,transparent)}}.range-xs{--range-thumb-size:calc(var(--size-selector,.25rem)*3);--range-p:0rem}.range-2xs{--range-thumb-size:calc(var(--size-selector,.25rem)*2);--range-p:0rem}[data-theme=dark] .skeleton{background-image:linear-gradient(105deg,#0000,#0000 40%,#fff5,#0000 60%,#0000)}@keyframes dropdown{0%{opacity:0}}@keyframes progress{50%{background-position-x:-115%}}@keyframes toast{0%{opacity:0;scale:.9}to{opacity:1;scale:1}}@keyframes rating{0%,40%{filter:brightness(1.05)contrast(1.05);scale:1.1}}@keyframes radio{0%{padding:5px}50%{padding:3px}}@keyframes skeleton{0%{background-position:150%}to{background-position:-50%}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-text-shadow-color{syntax:"*";inherits:false}@property --tw-text-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-content{syntax:"*";inherits:false;initial-value:""}@keyframes spin{to{transform:rotate(360deg)}}`;function ve(r){return getCurrentScope()?(onScopeDispose(r),true):false}function Od(r){if(!isRef(r))return reactive(r);const e=new Proxy({},{get(t,n,o){return unref(Reflect.get(r.value,n,o))},set(t,n,o){return isRef(r.value[n])&&!isRef(o)?r.value[n].value=o:r.value[n]=o,true},deleteProperty(t,n){return Reflect.deleteProperty(r.value,n)},has(t,n){return Reflect.has(r.value,n)},ownKeys(){return Object.keys(r.value)},getOwnPropertyDescriptor(){return {enumerable:true,configurable:true}}});return reactive(e)}const ke=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fi=r=>typeof r<"u",Yn=r=>r!=null,mi=Object.prototype.toString,bi=r=>mi.call(r)==="[object Object]",W=()=>{},gi=vi();function vi(){var r,e;return ke&&((r=window==null?undefined:window.navigator)==null?undefined:r.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?undefined:window.navigator)==null?undefined:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?undefined:window.navigator.userAgent))}function wr(r,e){function t(...n){return new Promise((o,a)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(o).catch(a);})}return t}const Wn=r=>r();function wi(r,e={}){let t,n,o=W;const a=l=>{clearTimeout(l),o(),o=W;};let i;return l=>{const c=toValue(r),u=toValue(e.maxWait);return t&&a(t),c<=0||u!==undefined&&u<=0?(n&&(a(n),n=null),Promise.resolve(l())):new Promise((d,p)=>{o=e.rejectOnCancel?p:d,i=l,u&&!n&&(n=setTimeout(()=>{t&&a(t),n=null,d(i());},u)),t=setTimeout(()=>{n&&a(n),n=null,d(l());},c);})}}function yi(...r){let e=0,t,n=true,o=W,a,i,s,l,c;!isRef(r[0])&&typeof r[0]=="object"?{delay:i,trailing:s=true,leading:l=true,rejectOnCancel:c=false}=r[0]:[i,s=true,l=true,c=false]=r;const u=()=>{t&&(clearTimeout(t),t=undefined,o(),o=W);};return p=>{const h=toValue(i),m=Date.now()-e,v=()=>a=p();return u(),h<=0?(e=Date.now(),v()):(m>h&&(l||!n)?(e=Date.now(),v()):s&&(a=new Promise((f,g)=>{o=c?g:f,t=setTimeout(()=>{e=Date.now(),n=true,f(v()),u();},Math.max(0,h-m));})),!l&&!t&&(t=setTimeout(()=>n=true,h)),n=false,a)}}function xi(r=Wn,e={}){const{initialState:t="active"}=e,n=Xn(t==="active");function o(){n.value=false;}function a(){n.value=true;}const i=(...s)=>{n.value&&r(...s);};return {isActive:readonly(n),pause:o,resume:a,eventFilter:i}}function Gt(r,e=false,t="Timeout"){return new Promise((n,o)=>{setTimeout(e?()=>o(t):n,r);})}function ki(r){let e;function t(){return e||(e=r()),e}return t.reset=async()=>{const n=e;e=undefined,n&&await n;},t}function Kn(r){return getCurrentInstance()}function Se(r){return Array.isArray(r)?r:[r]}function Xn(...r){if(r.length!==1)return toRef(...r);const e=r[0];return typeof e=="function"?readonly(customRef(()=>({get:e,set:W}))):ref(e)}function _i(r,e=200,t={}){return wr(wi(e,t),r)}function Ai(r,e=200,t=false,n=true,o=false){return wr(yi(e,t,n,o),r)}function Ei(r,e,t={}){const{eventFilter:n=Wn,...o}=t;return watch(r,wr(n,e),o)}function Qt(r,e,t={}){const{eventFilter:n,initialState:o="active",...a}=t,{eventFilter:i,pause:s,resume:l,isActive:c}=xi(n,{initialState:o});return {stop:Ei(r,e,{...a,eventFilter:i}),pause:s,resume:l,isActive:c}}function Md(r,e,...[t]){const{flush:n="sync",deep:o=false,immediate:a=true,direction:i="both",transform:s={}}=t||{},l=[],c="ltr"in s&&s.ltr||(p=>p),u="rtl"in s&&s.rtl||(p=>p);return (i==="both"||i==="ltr")&&l.push(Qt(r,p=>{l.forEach(h=>h.pause()),e.value=c(p),l.forEach(h=>h.resume());},{flush:n,deep:o,immediate:a})),(i==="both"||i==="rtl")&&l.push(Qt(e,p=>{l.forEach(h=>h.pause()),r.value=u(p),l.forEach(h=>h.resume());},{flush:n,deep:o,immediate:a})),()=>{l.forEach(p=>p.stop());}}function It(r,e=true,t){Kn()?onMounted(r,t):e?r():nextTick(r);}function Nd(r,e){Kn()&&onUnmounted(r,e);}function Yt(r,e=false){function t(d,{flush:p="sync",deep:h=false,timeout:m,throwOnTimeout:v}={}){let f=null;const w=[new Promise(_=>{f=watch(r,E=>{d(E)!==e&&(f?f():nextTick(()=>f==null?undefined:f()),_(E));},{flush:p,deep:h,immediate:true});})];return m!=null&&w.push(Gt(m,v).then(()=>toValue(r)).finally(()=>f==null?undefined:f())),Promise.race(w)}function n(d,p){if(!isRef(d))return t(E=>E===d,p);const{flush:h="sync",deep:m=false,timeout:v,throwOnTimeout:f}=p??{};let g=null;const _=[new Promise(E=>{g=watch([r,d],([j,y])=>{e!==(j===y)&&(g?g():nextTick(()=>g==null?undefined:g()),E(j));},{flush:h,deep:m,immediate:true});})];return v!=null&&_.push(Gt(v,f).then(()=>toValue(r)).finally(()=>(g==null||g(),toValue(r)))),Promise.race(_)}function o(d){return t(p=>!!p,d)}function a(d){return n(null,d)}function i(d){return n(undefined,d)}function s(d){return t(Number.isNaN,d)}function l(d,p){return t(h=>{const m=Array.from(h);return m.includes(d)||m.includes(toValue(d))},p)}function c(d){return u(1,d)}function u(d=1,p){let h=-1;return t(()=>(h+=1,h>=d),p)}return Array.isArray(toValue(r))?{toMatch:t,toContains:l,changed:c,changedTimes:u,get not(){return Yt(r,!e)}}:{toMatch:t,toBe:n,toBeTruthy:o,toBeNull:a,toBeNaN:s,toBeUndefined:i,changed:c,changedTimes:u,get not(){return Yt(r,!e)}}}function Ci(r){return Yt(r)}function Dd(r,e=1e3,t={}){const{immediate:n=true,immediateCallback:o=false}=t;let a=null;const i=shallowRef(false);function s(){a&&(clearInterval(a),a=null);}function l(){i.value=false,s();}function c(){const u=toValue(e);u<=0||(i.value=true,o&&r(),s(),i.value&&(a=setInterval(r,u)));}if(n&&ke&&c(),isRef(e)||typeof e=="function"){const u=watch(e,()=>{i.value&&ke&&c();});ve(u);}return ve(l),{isActive:i,pause:l,resume:c}}function Si(r,e,t={}){const{immediate:n=true,immediateCallback:o=false}=t,a=shallowRef(false);let i=null;function s(){i&&(clearTimeout(i),i=null);}function l(){a.value=false,s();}function c(...u){o&&r(),s(),a.value=true,i=setTimeout(()=>{a.value=false,i=null,r(...u);},toValue(e));}return n&&(a.value=true,ke&&c()),ve(l),{isPending:readonly(a),start:c,stop:l}}function Ii(r,e,t){return watch(r,e,{...t,immediate:true})}function Pi(r,e,t){const n=watch(r,(...o)=>(nextTick(()=>n()),e(...o)),t);return n}const ne=ke?window:undefined,Ti=ke?window.document:undefined,Jn=ke?window.navigator:undefined;function V(r){var e;const t=toValue(r);return (e=t==null?undefined:t.$el)!=null?e:t}function X(...r){const e=[],t=()=>{e.forEach(s=>s()),e.length=0;},n=(s,l,c,u)=>(s.addEventListener(l,c,u),()=>s.removeEventListener(l,c,u)),o=computed(()=>{const s=Se(toValue(r[0])).filter(l=>l!=null);return s.every(l=>typeof l!="string")?s:undefined}),a=Ii(()=>{var s,l;return [(l=(s=o.value)==null?undefined:s.map(c=>V(c)))!=null?l:[ne].filter(c=>c!=null),Se(toValue(o.value?r[1]:r[0])),Se(unref(o.value?r[2]:r[1])),toValue(o.value?r[3]:r[2])]},([s,l,c,u])=>{if(t(),!(s!=null&&s.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const d=bi(u)?{...u}:u;e.push(...s.flatMap(p=>l.flatMap(h=>c.map(m=>n(p,h,m,d)))));},{flush:"post"}),i=()=>{a(),t();};return ve(t),i}let Mr=false;function Rd(r,e,t={}){const{window:n=ne,ignore:o=[],capture:a=true,detectIframe:i=false,controls:s=false}=t;if(!n)return s?{stop:W,cancel:W,trigger:W}:W;if(gi&&!Mr){Mr=true;const f={passive:true};Array.from(n.document.body.children).forEach(g=>X(g,"click",W,f)),X(n.document.documentElement,"click",W,f);}let l=true;const c=f=>toValue(o).some(g=>{if(typeof g=="string")return Array.from(n.document.querySelectorAll(g)).some(w=>w===f.target||f.composedPath().includes(w));{const w=V(g);return w&&(f.target===w||f.composedPath().includes(w))}});function u(f){const g=toValue(f);return g&&g.$.subTree.shapeFlag===16}function d(f,g){const w=toValue(f),_=w.$.subTree&&w.$.subTree.children;return _==null||!Array.isArray(_)?false:_.some(E=>E.el===g.target||g.composedPath().includes(E.el))}const p=f=>{const g=V(r);if(f.target!=null&&!(!(g instanceof Element)&&u(r)&&d(r,f))&&!(!g||g===f.target||f.composedPath().includes(g))){if("detail"in f&&f.detail===0&&(l=!c(f)),!l){l=true;return}e(f);}};let h=false;const m=[X(n,"click",f=>{h||(h=true,setTimeout(()=>{h=false;},0),p(f));},{passive:true,capture:a}),X(n,"pointerdown",f=>{const g=V(r);l=!c(f)&&!!(g&&!f.composedPath().includes(g));},{passive:true}),i&&X(n,"blur",f=>{setTimeout(()=>{var g;const w=V(r);((g=n.document.activeElement)==null?undefined:g.tagName)==="IFRAME"&&!(w!=null&&w.contains(n.document.activeElement))&&e(f);},0);},{passive:true})].filter(Boolean),v=()=>m.forEach(f=>f());return s?{stop:v,cancel:()=>{l=false;},trigger:f=>{l=true,p(f),l=false;}}:v}function Li(){const r=shallowRef(false),e=getCurrentInstance();return e&&onMounted(()=>{r.value=true;},e),r}function Je(r){const e=Li();return computed(()=>(e.value,!!r()))}function yr(r,e,t={}){const{window:n=ne,...o}=t;let a;const i=Je(()=>n&&"MutationObserver"in n),s=()=>{a&&(a.disconnect(),a=undefined);},l=computed(()=>{const p=toValue(r),h=Se(p).map(V).filter(Yn);return new Set(h)}),c=watch(()=>l.value,p=>{s(),i.value&&p.size&&(a=new MutationObserver(e),p.forEach(h=>a.observe(h,o)));},{immediate:true,flush:"post"}),u=()=>a==null?undefined:a.takeRecords(),d=()=>{c(),s();};return ve(d),{isSupported:i,stop:d,takeRecords:u}}function Oi(r,e,t){const{immediate:n=true,delay:o=0,onError:a=W,onSuccess:i=W,resetOnExecute:s=true,shallow:l=true,throwError:c}=t??{},u=l?shallowRef(e):ref(e),d=shallowRef(false),p=shallowRef(false),h=shallowRef(undefined);async function m(g=0,...w){s&&(u.value=e),h.value=undefined,d.value=false,p.value=true,g>0&&await Gt(g);const _=typeof r=="function"?r(...w):r;try{const E=await _;u.value=E,d.value=!0,i(E);}catch(E){if(h.value=E,a(E),c)throw E}finally{p.value=false;}return u.value}n&&m(o);const v={state:u,isReady:d,isLoading:p,error:h,execute:m};function f(){return new Promise((g,w)=>{Ci(p).toBe(false).then(()=>g(v)).catch(w);})}return {...v,then(g,w){return f().then(g,w)}}}function Nr(r,e={}){const{controls:t=false,navigator:n=Jn}=e,o=Je(()=>n&&"permissions"in n),a=shallowRef(),i=typeof r=="string"?{name:r}:r,s=shallowRef(),l=()=>{var u,d;s.value=(d=(u=a.value)==null?undefined:u.state)!=null?d:"prompt";};X(a,"change",l,{passive:true});const c=ki(async()=>{if(o.value){if(!a.value)try{a.value=await n.permissions.query(i);}catch{a.value=undefined;}finally{l();}if(t)return toRaw(a.value)}});return c(),t?{state:s,isSupported:o,query:c}:s}function Mi(r={}){const{navigator:e=Jn,read:t=false,source:n,copiedDuring:o=1500,legacy:a=false}=r,i=Je(()=>e&&"clipboard"in e),s=Nr("clipboard-read"),l=Nr("clipboard-write"),c=computed(()=>i.value||a),u=shallowRef(""),d=shallowRef(false),p=Si(()=>d.value=false,o,{immediate:false});function h(){let w=!(i.value&&g(s.value));if(!w)try{e.clipboard.readText().then(_=>{u.value=_;});}catch{w=true;}w&&(u.value=f());}c.value&&t&&X(["copy","cut"],h,{passive:true});async function m(w=toValue(n)){if(c.value&&w!=null){let _=!(i.value&&g(l.value));if(!_)try{await e.clipboard.writeText(w);}catch{_=true;}_&&v(w),u.value=w,d.value=true,p.start();}}function v(w){const _=document.createElement("textarea");_.value=w??"",_.style.position="absolute",_.style.opacity="0",document.body.appendChild(_),_.select(),document.execCommand("copy"),_.remove();}function f(){var w,_,E;return (E=(_=(w=document==null?undefined:document.getSelection)==null?undefined:w.call(document))==null?undefined:_.toString())!=null?E:""}function g(w){return w==="granted"||w==="prompt"}return {isSupported:c,text:u,copied:d,copy:m}}function Ni(r){return JSON.parse(JSON.stringify(r))}const ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},at="__vueuse_ssr_handlers__",Di=Ri();function Ri(){return at in ot||(ot[at]=ot[at]||{}),ot[at]}function ji(r,e){return Di[r]||e}function Ui(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const Bi={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},Dr="vueuse-storage";function jd(r,e,t,n={}){var o;const{flush:a="pre",deep:i=true,listenToStorageChanges:s=true,writeDefaults:l=true,mergeDefaults:c=false,shallow:u,window:d=ne,eventFilter:p,onError:h=S=>{console.error(S);},initOnMounted:m}=n,v=(u?shallowRef:ref)(typeof e=="function"?e():e),f=computed(()=>toValue(r));if(!t)try{t=ji("getDefaultStorage",()=>{var S;return (S=ne)==null?void 0:S.localStorage})();}catch(S){h(S);}if(!t)return v;const g=toValue(e),w=Ui(g),_=(o=n.serializer)!=null?o:Bi[w],{pause:E,resume:j}=Qt(v,()=>b(v.value),{flush:a,deep:i,eventFilter:p});watch(f,()=>I(),{flush:a}),d&&s&&It(()=>{t instanceof Storage?X(d,"storage",I,{passive:true}):X(d,Dr,T),m&&I();}),m||I();function y(S,N){if(d){const O={key:f.value,oldValue:S,newValue:N,storageArea:t};d.dispatchEvent(t instanceof Storage?new StorageEvent("storage",O):new CustomEvent(Dr,{detail:O}));}}function b(S){try{const N=t.getItem(f.value);if(S==null)y(N,null),t.removeItem(f.value);else {const O=_.write(S);N!==O&&(t.setItem(f.value,O),y(N,O));}}catch(N){h(N);}}function x(S){const N=S?S.newValue:t.getItem(f.value);if(N==null)return l&&g!=null&&t.setItem(f.value,_.write(g)),g;if(!S&&c){const O=_.read(N);return typeof c=="function"?c(O,g):w==="object"&&!Array.isArray(O)?{...g,...O}:O}else return typeof N!="string"?N:_.read(N)}function I(S){if(!(S&&S.storageArea!==t)){if(S&&S.key==null){v.value=g;return}if(!(S&&S.key!==f.value)){E();try{(S==null?void 0:S.newValue)!==_.write(v.value)&&(v.value=x(S));}catch(N){h(N);}finally{S?nextTick(j):j();}}}}function T(S){I(S.detail);}return v}function Ud(r,e,t={}){const{window:n=ne,initialValue:o,observe:a=false}=t,i=shallowRef(o),s=computed(()=>{var c;return V(e)||((c=n==null?undefined:n.document)==null?undefined:c.documentElement)});function l(){var c;const u=toValue(r),d=toValue(s);if(d&&n&&u){const p=(c=n.getComputedStyle(d).getPropertyValue(u))==null?undefined:c.trim();i.value=p||i.value||o;}}return a&&yr(s,l,{attributeFilter:["style","class"],window:n}),watch([s,()=>toValue(r)],(c,u)=>{u[0]&&u[1]&&u[0].style.removeProperty(u[1]),l();}),watch([i,s],([c,u])=>{const d=toValue(r);u!=null&&u.style&&d&&(c==null?u.style.removeProperty(d):u.style.setProperty(d,c));},{immediate:true}),i}function Zn(r,e,t={}){const{window:n=ne,...o}=t;let a;const i=Je(()=>n&&"ResizeObserver"in n),s=()=>{a&&(a.disconnect(),a=undefined);},l=computed(()=>{const d=toValue(r);return Array.isArray(d)?d.map(p=>V(p)):[V(d)]}),c=watch(l,d=>{if(s(),i.value&&n){a=new ResizeObserver(e);for(const p of d)p&&a.observe(p,o);}},{immediate:true,flush:"post"}),u=()=>{s(),c();};return ve(u),{isSupported:i,stop:u}}function Bd(r,e={}){const{reset:t=true,windowResize:n=true,windowScroll:o=true,immediate:a=true,updateTiming:i="sync"}=e,s=shallowRef(0),l=shallowRef(0),c=shallowRef(0),u=shallowRef(0),d=shallowRef(0),p=shallowRef(0),h=shallowRef(0),m=shallowRef(0);function v(){const g=V(r);if(!g){t&&(s.value=0,l.value=0,c.value=0,u.value=0,d.value=0,p.value=0,h.value=0,m.value=0);return}const w=g.getBoundingClientRect();s.value=w.height,l.value=w.bottom,c.value=w.left,u.value=w.right,d.value=w.top,p.value=w.width,h.value=w.x,m.value=w.y;}function f(){i==="sync"?v():i==="next-frame"&&requestAnimationFrame(()=>v());}return Zn(r,f),watch(()=>V(r),g=>!g&&f()),yr(r,f,{attributeFilter:["style","class"]}),o&&X("scroll",f,{capture:true,passive:true}),n&&X("resize",f,{passive:true}),It(()=>{a&&f();}),{height:s,bottom:l,left:c,right:u,top:d,width:p,x:h,y:m,update:f}}function zd(r,e={width:0,height:0},t={}){const{window:n=ne,box:o="content-box"}=t,a=computed(()=>{var d,p;return (p=(d=V(r))==null?undefined:d.namespaceURI)==null?undefined:p.includes("svg")}),i=ref(e.width),s=ref(e.height),{stop:l}=Zn(r,([d])=>{const p=o==="border-box"?d.borderBoxSize:o==="content-box"?d.contentBoxSize:d.devicePixelContentBoxSize;if(n&&a.value){const h=V(r);if(h){const m=h.getBoundingClientRect();i.value=m.width,s.value=m.height;}}else if(p){const h=Se(p);i.value=h.reduce((m,{inlineSize:v})=>m+v,0),s.value=h.reduce((m,{blockSize:v})=>m+v,0);}else i.value=d.contentRect.width,s.value=d.contentRect.height;},t);It(()=>{const d=V(r);d&&(i.value="offsetWidth"in d?d.offsetWidth:e.width,s.value="offsetHeight"in d?d.offsetHeight:e.height);});const c=watch(()=>V(r),d=>{i.value=d?e.width:0,s.value=d?e.height:0;});function u(){l(),c();}return {width:i,height:s,stop:u}}function zi(r,e,t={}){const{root:n,rootMargin:o="0px",threshold:a=0,window:i=ne,immediate:s=true}=t,l=Je(()=>i&&"IntersectionObserver"in i),c=computed(()=>{const m=toValue(r);return Se(m).map(V).filter(Yn)});let u=W;const d=ref(s),p=l.value?watch(()=>[c.value,V(n),d.value],([m,v])=>{if(u(),!d.value||!m.length)return;const f=new IntersectionObserver(e,{root:V(v),rootMargin:o,threshold:a});m.forEach(g=>g&&f.observe(g)),u=()=>{f.disconnect(),u=W;};},{immediate:s,flush:"post"}):W,h=()=>{u(),p(),d.value=false;};return ve(h),{isSupported:l,isActive:d,pause(){u(),d.value=false;},resume(){d.value=true;},stop:h}}function eo(r,e={}){const{window:t=ne,scrollTarget:n,threshold:o=0,rootMargin:a,once:i=false}=e,s=shallowRef(false),{stop:l}=zi(r,c=>{let u=s.value,d=0;for(const p of c)p.time>=d&&(d=p.time,u=p.isIntersecting);s.value=u,i&&Pi(s,()=>{l();});},{root:n,window:t,threshold:o,rootMargin:toValue(a)});return s}const Rr=1;function $i(r,e={}){const{throttle:t=0,idle:n=200,onStop:o=W,onScroll:a=W,offset:i={left:0,right:0,top:0,bottom:0},eventListenerOptions:s={capture:false,passive:true},behavior:l="auto",window:c=ne,onError:u=b=>{console.error(b);}}=e,d=shallowRef(0),p=shallowRef(0),h=computed({get(){return d.value},set(b){v(b,undefined);}}),m=computed({get(){return p.value},set(b){v(undefined,b);}});function v(b,x){var I,T,S,N;if(!c)return;const O=toValue(r);if(!O)return;(S=O instanceof Document?c.document.body:O)==null||S.scrollTo({top:(I=toValue(x))!=null?I:m.value,left:(T=toValue(b))!=null?T:h.value,behavior:toValue(l)});const $=((N=O==null?undefined:O.document)==null?undefined:N.documentElement)||(O==null?undefined:O.documentElement)||O;h!=null&&(d.value=$.scrollLeft),m!=null&&(p.value=$.scrollTop);}const f=shallowRef(false),g=reactive({left:true,right:false,top:true,bottom:false}),w=reactive({left:false,right:false,top:false,bottom:false}),_=b=>{f.value&&(f.value=false,w.left=false,w.right=false,w.top=false,w.bottom=false,o(b));},E=_i(_,t+n),j=b=>{var x;if(!c)return;const I=((x=b==null?undefined:b.document)==null?undefined:x.documentElement)||(b==null?undefined:b.documentElement)||V(b),{display:T,flexDirection:S,direction:N}=getComputedStyle(I),O=N==="rtl"?-1:1,$=I.scrollLeft;w.left=$<d.value,w.right=$>d.value;const q=$*O<=(i.left||0),ee=$*O+I.clientWidth>=I.scrollWidth-(i.right||0)-Rr;T==="flex"&&S==="row-reverse"?(g.left=ee,g.right=q):(g.left=q,g.right=ee),d.value=$;let G=I.scrollTop;b===c.document&&!G&&(G=c.document.body.scrollTop),w.top=G<p.value,w.bottom=G>p.value;const Q=G<=(i.top||0),ue=G+I.clientHeight>=I.scrollHeight-(i.bottom||0)-Rr;T==="flex"&&S==="column-reverse"?(g.top=ue,g.bottom=Q):(g.top=Q,g.bottom=ue),p.value=G;},y=b=>{var x;if(!c)return;const I=(x=b.target.documentElement)!=null?x:b.target;j(I),f.value=true,E(b),a(b);};return X(r,"scroll",t?Ai(y,t,true,false):y,s),It(()=>{try{const b=toValue(r);if(!b)return;j(b);}catch(b){u(b);}}),X(r,"scrollend",_,s),{x:h,y:m,isScrolling:f,arrivedState:g,directions:w,measure(){const b=toValue(r);c&&b&&j(b);}}}const Fi={page:r=>[r.pageX,r.pageY],client:r=>[r.clientX,r.clientY],screen:r=>[r.screenX,r.screenY],movement:r=>r instanceof MouseEvent?[r.movementX,r.movementY]:null};function Hi(r={}){const{type:e="page",touch:t=true,resetOnTouchEnds:n=false,initialValue:o={x:0,y:0},window:a=ne,target:i=a,scroll:s=true,eventFilter:l}=r;let c=null,u=0,d=0;const p=shallowRef(o.x),h=shallowRef(o.y),m=shallowRef(null),v=typeof e=="function"?e:Fi[e],f=b=>{const x=v(b);c=b,x&&([p.value,h.value]=x,m.value="mouse"),a&&(u=a.scrollX,d=a.scrollY);},g=b=>{if(b.touches.length>0){const x=v(b.touches[0]);x&&([p.value,h.value]=x,m.value="touch");}},w=()=>{if(!c||!a)return;const b=v(c);c instanceof MouseEvent&&b&&(p.value=b[0]+a.scrollX-u,h.value=b[1]+a.scrollY-d);},_=()=>{p.value=o.x,h.value=o.y;},E=l?b=>l(()=>f(b),{}):b=>f(b),j=l?b=>l(()=>g(b),{}):b=>g(b),y=l?()=>l(()=>w(),{}):()=>w();if(i){const b={passive:true};X(i,["mousemove","dragover"],E,b),t&&e!=="movement"&&(X(i,["touchstart","touchmove"],j,b),n&&X(i,"touchend",_,b)),s&&e==="page"&&X(a,"scroll",y,b);}return {x:p,y:h,sourceType:m}}function $d(r,e={}){const{handleOutside:t=true,window:n=ne}=e,o=e.type||"page",{x:a,y:i,sourceType:s}=Hi(e),l=ref(r??(n==null?undefined:n.document.body)),c=shallowRef(0),u=shallowRef(0),d=shallowRef(0),p=shallowRef(0),h=shallowRef(0),m=shallowRef(0),v=shallowRef(true);let f=()=>{};return n&&(f=watch([l,a,i],()=>{const g=V(l);if(!g||!(g instanceof Element))return;const{left:w,top:_,width:E,height:j}=g.getBoundingClientRect();d.value=w+(o==="page"?n.pageXOffset:0),p.value=_+(o==="page"?n.pageYOffset:0),h.value=j,m.value=E;const y=a.value-d.value,b=i.value-p.value;v.value=E===0||j===0||y<0||b<0||y>E||b>j,(t||!v.value)&&(c.value=y,u.value=b);},{immediate:true}),X(document,"mouseleave",()=>v.value=true,{passive:true})),{x:a,y:i,sourceType:s,elementX:c,elementY:u,elementPositionX:d,elementPositionY:p,elementHeight:h,elementWidth:m,isOutside:v,stop:f}}function Fd(r=null,e={}){var t,n,o;const{document:a=Ti,restoreOnUnmount:i=d=>d}=e,s=(t=a==null?undefined:a.title)!=null?t:"",l=Xn((n=r??(a==null?undefined:a.title))!=null?n:null),c=!!(r&&typeof r=="function");function u(d){if(!("titleTemplate"in e))return d;const p=e.titleTemplate||"%s";return typeof p=="function"?p(d):toValue(p).replace(/%s/g,d)}return watch(l,(d,p)=>{d!==p&&a&&(a.title=u(d??""));},{immediate:true}),e.observe&&!e.titleTemplate&&a&&!c&&yr((o=a.head)==null?undefined:o.querySelector("title"),()=>{a&&a.title!==l.value&&(l.value=u(a.title));},{childList:true}),ve(()=>{if(i){const d=i(s,l.value||"");d!=null&&a&&(a.title=d);}}),l}function qi(r,e,t,n={}){var o,a,i;const{clone:s=false,passive:l=false,eventName:c,deep:u=false,defaultValue:d,shouldEmit:p}=n,h=getCurrentInstance(),m=t||(h==null?undefined:h.emit)||((o=h==null?undefined:h.$emit)==null?undefined:o.bind(h))||((i=(a=h==null?undefined:h.proxy)==null?undefined:a.$emit)==null?undefined:i.bind(h==null?undefined:h.proxy));let v=c;e||(e="modelValue"),v=v||`update:${e.toString()}`;const f=_=>s?typeof s=="function"?s(_):Ni(_):_,g=()=>fi(r[e])?f(r[e]):d,w=_=>{p?p(_)&&m(v,_):m(v,_);};if(l){const _=g(),E=ref(_);let j=false;return watch(()=>r[e],y=>{j||(j=true,E.value=f(y),nextTick(()=>j=false));}),watch(E,y=>{!j&&(y!==r[e]||u)&&w(y);},{deep:u}),E}else return computed({get(){return g()},set(_){w(_);}})}function Hd(r,e,t={}){const n={};for(const o in r)n[o]=qi(r,o,e,t);return n}const to=/^[a-z0-9]+(-[a-z0-9]+)*$/,Pt=(r,e,t,n="")=>{const o=r.split(":");if(r.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;n=o.shift().slice(1);}if(o.length>3||!o.length)return null;if(o.length>1){const s=o.pop(),l=o.pop(),c={provider:o.length>0?o[0]:n,prefix:l,name:s};return e&&!ct(c)?null:c}const a=o[0],i=a.split("-");if(i.length>1){const s={provider:n,prefix:i.shift(),name:i.join("-")};return e&&!ct(s)?null:s}if(t&&n===""){const s={provider:n,prefix:"",name:a};return e&&!ct(s,t)?null:s}return null},ct=(r,e)=>r?!!((e&&r.prefix===""||r.prefix)&&r.name):false,ro=Object.freeze({left:0,top:0,width:16,height:16}),vt=Object.freeze({rotate:0,vFlip:false,hFlip:false}),Tt=Object.freeze({...ro,...vt}),Wt=Object.freeze({...Tt,body:"",hidden:false});function Vi(r,e){const t={};!r.hFlip!=!e.hFlip&&(t.hFlip=true),!r.vFlip!=!e.vFlip&&(t.vFlip=true);const n=((r.rotate||0)+(e.rotate||0))%4;return n&&(t.rotate=n),t}function jr(r,e){const t=Vi(r,e);for(const n in Wt)n in vt?n in r&&!(n in t)&&(t[n]=vt[n]):n in e?t[n]=e[n]:n in r&&(t[n]=r[n]);return t}function Gi(r,e){const t=r.icons,n=r.aliases||Object.create(null),o=Object.create(null);function a(i){if(t[i])return o[i]=[];if(!(i in o)){o[i]=null;const s=n[i]&&n[i].parent,l=s&&a(s);l&&(o[i]=[s].concat(l));}return o[i]}return Object.keys(t).concat(Object.keys(n)).forEach(a),o}function Qi(r,e,t){const n=r.icons,o=r.aliases||Object.create(null);let a={};function i(s){a=jr(n[s]||o[s],a);}return i(e),t.forEach(i),jr(r,a)}function no(r,e){const t=[];if(typeof r!="object"||typeof r.icons!="object")return t;r.not_found instanceof Array&&r.not_found.forEach(o=>{e(o,null),t.push(o);});const n=Gi(r);for(const o in n){const a=n[o];a&&(e(o,Qi(r,o,a)),t.push(o));}return t}const Yi={provider:"",aliases:{},not_found:{},...ro};function jt(r,e){for(const t in e)if(t in r&&typeof r[t]!=typeof e[t])return  false;return  true}function oo(r){if(typeof r!="object"||r===null)return null;const e=r;if(typeof e.prefix!="string"||!r.icons||typeof r.icons!="object"||!jt(r,Yi))return null;const t=e.icons;for(const o in t){const a=t[o];if(!o||typeof a.body!="string"||!jt(a,Wt))return null}const n=e.aliases||Object.create(null);for(const o in n){const a=n[o],i=a.parent;if(!o||typeof i!="string"||!t[i]&&!n[i]||!jt(a,Wt))return null}return e}const Ur=Object.create(null);function Wi(r,e){return {provider:r,prefix:e,icons:Object.create(null),missing:new Set}}function Pe(r,e){const t=Ur[r]||(Ur[r]=Object.create(null));return t[e]||(t[e]=Wi(r,e))}function ao(r,e){return oo(e)?no(e,(t,n)=>{n?r.icons[t]=n:r.missing.add(t);}):[]}function Ki(r,e,t){try{if(typeof t.body=="string")return r.icons[e]={...t},!0}catch{}return  false}let Ge=false;function io(r){return typeof r=="boolean"&&(Ge=r),Ge}function Xi(r){const e=typeof r=="string"?Pt(r,true,Ge):r;if(e){const t=Pe(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:undefined)}}function Ji(r,e){const t=Pt(r,true,Ge);if(!t)return  false;const n=Pe(t.provider,t.prefix);return e?Ki(n,t.name,e):(n.missing.add(t.name),true)}function Zi(r,e){if(typeof r!="object")return  false;if(typeof e!="string"&&(e=r.provider||""),Ge&&!e&&!r.prefix){let o=false;return oo(r)&&(r.prefix="",no(r,(a,i)=>{Ji(a,i)&&(o=true);})),o}const t=r.prefix;if(!ct({prefix:t,name:"a"}))return  false;const n=Pe(e,t);return !!ao(n,r)}const so=Object.freeze({width:null,height:null}),lo=Object.freeze({...so,...vt}),es=/(-?[0-9.]*[0-9]+[0-9.]*)/g,ts=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Br(r,e,t){if(e===1)return r;if(t=t||100,typeof r=="number")return Math.ceil(r*e*t)/t;if(typeof r!="string")return r;const n=r.split(es);if(n===null||!n.length)return r;const o=[];let a=n.shift(),i=ts.test(a);for(;;){if(i){const s=parseFloat(a);isNaN(s)?o.push(a):o.push(Math.ceil(s*e*t)/t);}else o.push(a);if(a=n.shift(),a===undefined)return o.join("");i=!i;}}function rs(r,e="defs"){let t="";const n=r.indexOf("<"+e);for(;n>=0;){const o=r.indexOf(">",n),a=r.indexOf("</"+e);if(o===-1||a===-1)break;const i=r.indexOf(">",a);if(i===-1)break;t+=r.slice(o+1,a).trim(),r=r.slice(0,n).trim()+r.slice(i+1);}return {defs:t,content:r}}function ns(r,e){return r?"<defs>"+r+"</defs>"+e:e}function os(r,e,t){const n=rs(r);return ns(n.defs,e+n.content+t)}const as=r=>r==="unset"||r==="undefined"||r==="none";function is(r,e){const t={...Tt,...r},n={...lo,...e},o={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,n].forEach(v=>{const f=[],g=v.hFlip,w=v.vFlip;let _=v.rotate;g?w?_+=2:(f.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),f.push("scale(-1 1)"),o.top=o.left=0):w&&(f.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),f.push("scale(1 -1)"),o.top=o.left=0);let E;switch(_<0&&(_-=Math.floor(_/4)*4),_=_%4,_){case 1:E=o.height/2+o.top,f.unshift("rotate(90 "+E.toString()+" "+E.toString()+")");break;case 2:f.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:E=o.width/2+o.left,f.unshift("rotate(-90 "+E.toString()+" "+E.toString()+")");break}_%2===1&&(o.left!==o.top&&(E=o.left,o.left=o.top,o.top=E),o.width!==o.height&&(E=o.width,o.width=o.height,o.height=E)),f.length&&(a=os(a,'<g transform="'+f.join(" ")+'">',"</g>"));});const i=n.width,s=n.height,l=o.width,c=o.height;let u,d;i===null?(d=s===null?"1em":s==="auto"?c:s,u=Br(d,l/c)):(u=i==="auto"?l:i,d=s===null?Br(u,c/l):s==="auto"?c:s);const p={},h=(v,f)=>{as(f)||(p[v]=f.toString());};h("width",u),h("height",d);const m=[o.left,o.top,l,c];return p.viewBox=m.join(" "),{attributes:p,viewBox:m,body:a}}const ss=/\sid="(\S+)"/g,ls="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let cs=0;function us(r,e=ls){const t=[];let n;for(;n=ss.exec(r);)t.push(n[1]);if(!t.length)return r;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(a=>{const i=typeof e=="function"?e(a):e+(cs++).toString(),s=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=r.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+i+o+"$3");}),r=r.replace(new RegExp(o,"g"),""),r}const Kt=Object.create(null);function ds(r,e){Kt[r]=e;}function Xt(r){return Kt[r]||Kt[""]}function xr(r){let e;if(typeof r.resources=="string")e=[r.resources];else if(e=r.resources,!(e instanceof Array)||!e.length)return null;return {resources:e,path:r.path||"/",maxURL:r.maxURL||500,rotate:r.rotate||750,timeout:r.timeout||5e3,random:r.random===true,index:r.index||0,dataAfterTimeout:r.dataAfterTimeout!==false}}const kr=Object.create(null),Ne=["https://api.simplesvg.com","https://api.unisvg.com"],ut=[];for(;Ne.length>0;)Ne.length===1||Math.random()>.5?ut.push(Ne.shift()):ut.push(Ne.pop());kr[""]=xr({resources:["https://api.iconify.design"].concat(ut)});function ps(r,e){const t=xr(e);return t===null?false:(kr[r]=t,true)}function _r(r){return kr[r]}const hs=()=>{let r;try{if(r=fetch,typeof r=="function")return r}catch{}};let zr=hs();function fs(r,e){const t=_r(r);if(!t)return 0;let n;if(!t.maxURL)n=0;else {let o=0;t.resources.forEach(i=>{o=Math.max(o,i.length);});const a=e+".json?icons=";n=t.maxURL-o-t.path.length-a.length;}return n}function ms(r){return r===404}const bs=(r,e,t)=>{const n=[],o=fs(r,e),a="icons";let i={type:a,provider:r,prefix:e,icons:[]},s=0;return t.forEach((l,c)=>{s+=l.length+1,s>=o&&c>0&&(n.push(i),i={type:a,provider:r,prefix:e,icons:[]},s=l.length),i.icons.push(l);}),n.push(i),n};function gs(r){if(typeof r=="string"){const e=_r(r);if(e)return e.path}return "/"}const vs=(r,e,t)=>{if(!zr){t("abort",424);return}let n=gs(e.provider);switch(e.type){case "icons":{const a=e.prefix,s=e.icons.join(","),l=new URLSearchParams({icons:s});n+=a+".json?"+l.toString();break}case "custom":{const a=e.uri;n+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let o=503;zr(r+n).then(a=>{const i=a.status;if(i!==200){setTimeout(()=>{t(ms(i)?"abort":"next",i);});return}return o=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",o);});return}setTimeout(()=>{t("success",a);});}).catch(()=>{t("next",o);});},ws={prepare:bs,send:vs};function ys(r){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);r.sort((o,a)=>o.provider!==a.provider?o.provider.localeCompare(a.provider):o.prefix!==a.prefix?o.prefix.localeCompare(a.prefix):o.name.localeCompare(a.name));let n={provider:"",prefix:"",name:""};return r.forEach(o=>{if(n.name===o.name&&n.prefix===o.prefix&&n.provider===o.provider)return;n=o;const a=o.provider,i=o.prefix,s=o.name,l=t[a]||(t[a]=Object.create(null)),c=l[i]||(l[i]=Pe(a,i));let u;s in c.icons?u=e.loaded:i===""||c.missing.has(s)?u=e.missing:u=e.pending;const d={provider:a,prefix:i,name:s};u.push(d);}),e}function co(r,e){r.forEach(t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(o=>o.id!==e));});}function xs(r){r.pendingCallbacksFlag||(r.pendingCallbacksFlag=true,setTimeout(()=>{r.pendingCallbacksFlag=false;const e=r.loaderCallbacks?r.loaderCallbacks.slice(0):[];if(!e.length)return;let t=false;const n=r.provider,o=r.prefix;e.forEach(a=>{const i=a.icons,s=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==o)return  true;const c=l.name;if(r.icons[c])i.loaded.push({provider:n,prefix:o,name:c});else if(r.missing.has(c))i.missing.push({provider:n,prefix:o,name:c});else return t=true,true;return  false}),i.pending.length!==s&&(t||co([r],a.id),a.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),a.abort));});}));}let ks=0;function _s(r,e,t){const n=ks++,o=co.bind(null,t,n);if(!e.pending.length)return o;const a={id:n,icons:e,callback:r,abort:o};return t.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(a);}),o}function As(r,e=true,t=false){const n=[];return r.forEach(o=>{const a=typeof o=="string"?Pt(o,e,t):o;a&&n.push(a);}),n}var Es={resources:[],index:0,timeout:2e3,rotate:750,random:false,dataAfterTimeout:false};function Cs(r,e,t,n){const o=r.resources.length,a=r.random?Math.floor(Math.random()*o):r.index;let i;if(r.random){let y=r.resources.slice(0);for(i=[];y.length>1;){const b=Math.floor(Math.random()*y.length);i.push(y[b]),y=y.slice(0,b).concat(y.slice(b+1));}i=i.concat(y);}else i=r.resources.slice(a).concat(r.resources.slice(0,a));const s=Date.now();let l="pending",c=0,u,d=null,p=[],h=[];typeof n=="function"&&h.push(n);function m(){d&&(clearTimeout(d),d=null);}function v(){l==="pending"&&(l="aborted"),m(),p.forEach(y=>{y.status==="pending"&&(y.status="aborted");}),p=[];}function f(y,b){b&&(h=[]),typeof y=="function"&&h.push(y);}function g(){return {startTime:s,payload:e,status:l,queriesSent:c,queriesPending:p.length,subscribe:f,abort:v}}function w(){l="failed",h.forEach(y=>{y(undefined,u);});}function _(){p.forEach(y=>{y.status==="pending"&&(y.status="aborted");}),p=[];}function E(y,b,x){const I=b!=="success";switch(p=p.filter(T=>T!==y),l){case "pending":break;case "failed":if(I||!r.dataAfterTimeout)return;break;default:return}if(b==="abort"){u=x,w();return}if(I){u=x,p.length||(i.length?j():w());return}if(m(),_(),!r.random){const T=r.resources.indexOf(y.resource);T!==-1&&T!==r.index&&(r.index=T);}l="completed",h.forEach(T=>{T(x);});}function j(){if(l!=="pending")return;m();const y=i.shift();if(y===undefined){if(p.length){d=setTimeout(()=>{m(),l==="pending"&&(_(),w());},r.timeout);return}w();return}const b={status:"pending",resource:y,callback:(x,I)=>{E(b,x,I);}};p.push(b),c++,d=setTimeout(j,r.rotate),t(y,e,b.callback);}return setTimeout(j),g}function uo(r){const e={...Es,...r};let t=[];function n(){t=t.filter(s=>s().status==="pending");}function o(s,l,c){const u=Cs(e,s,l,(d,p)=>{n(),c&&c(d,p);});return t.push(u),u}function a(s){return t.find(l=>s(l))||null}return {query:o,find:a,setIndex:s=>{e.index=s;},getIndex:()=>e.index,cleanup:n}}function $r(){}const Ut=Object.create(null);function Ss(r){if(!Ut[r]){const e=_r(r);if(!e)return;const t=uo(e),n={config:e,redundancy:t};Ut[r]=n;}return Ut[r]}function Is(r,e,t){let n,o;if(typeof r=="string"){const a=Xt(r);if(!a)return t(undefined,424),$r;o=a.send;const i=Ss(r);i&&(n=i.redundancy);}else {const a=xr(r);if(a){n=uo(a);const i=r.resources?r.resources[0]:"",s=Xt(i);s&&(o=s.send);}}return !n||!o?(t(undefined,424),$r):n.query(e,o,t)().abort}function Fr(){}function Ps(r){r.iconsLoaderFlag||(r.iconsLoaderFlag=true,setTimeout(()=>{r.iconsLoaderFlag=false,xs(r);}));}function Ts(r){const e=[],t=[];return r.forEach(n=>{(n.match(to)?e:t).push(n);}),{valid:e,invalid:t}}function De(r,e,t){function n(){const o=r.pendingIcons;e.forEach(a=>{o&&o.delete(a),r.icons[a]||r.missing.add(a);});}if(t&&typeof t=="object")try{if(!ao(r,t).length){n();return}}catch(o){console.error(o);}n(),Ps(r);}function Hr(r,e){r instanceof Promise?r.then(t=>{e(t);}).catch(()=>{e(null);}):e(r);}function Ls(r,e){r.iconsToLoad?r.iconsToLoad=r.iconsToLoad.concat(e).sort():r.iconsToLoad=e,r.iconsQueueFlag||(r.iconsQueueFlag=true,setTimeout(()=>{r.iconsQueueFlag=false;const{provider:t,prefix:n}=r,o=r.iconsToLoad;if(delete r.iconsToLoad,!o||!o.length)return;const a=r.loadIcon;if(r.loadIcons&&(o.length>1||!a)){Hr(r.loadIcons(o,n,t),u=>{De(r,o,u);});return}if(a){o.forEach(u=>{const d=a(u,n,t);Hr(d,p=>{const h=p?{prefix:n,icons:{[u]:p}}:null;De(r,[u],h);});});return}const{valid:i,invalid:s}=Ts(o);if(s.length&&De(r,s,null),!i.length)return;const l=n.match(to)?Xt(t):null;if(!l){De(r,i,null);return}l.prepare(t,n,i).forEach(u=>{Is(t,u,d=>{De(r,u.icons,d);});});}));}const Os=(r,e)=>{const t=As(r,true,io()),n=ys(t);if(!n.pending.length){let l=true;return e&&setTimeout(()=>{l&&e(n.loaded,n.missing,n.pending,Fr);}),()=>{l=false;}}const o=Object.create(null),a=[];let i,s;return n.pending.forEach(l=>{const{provider:c,prefix:u}=l;if(u===s&&c===i)return;i=c,s=u,a.push(Pe(c,u));const d=o[c]||(o[c]=Object.create(null));d[u]||(d[u]=[]);}),n.pending.forEach(l=>{const{provider:c,prefix:u,name:d}=l,p=Pe(c,u),h=p.pendingIcons||(p.pendingIcons=new Set);h.has(d)||(h.add(d),o[c][u].push(d));}),a.forEach(l=>{const c=o[l.provider][l.prefix];c.length&&Ls(l,c);}),e?_s(e,n,a):Fr};function Ms(r,e){const t={...r};for(const n in e){const o=e[n],a=typeof o;n in so?(o===null||o&&(a==="string"||a==="number"))&&(t[n]=o):a===typeof t[n]&&(t[n]=n==="rotate"?o%4:o);}return t}const Ns=/[\s,]+/;function Ds(r,e){e.split(Ns).forEach(t=>{switch(t.trim()){case "horizontal":r.hFlip=true;break;case "vertical":r.vFlip=true;break}});}function Rs(r,e=0){const t=r.replace(/^-?[0-9.]*/,"");function n(o){for(;o<0;)o+=4;return o%4}if(t===""){const o=parseInt(r);return isNaN(o)?0:n(o)}else if(t!==r){let o=0;switch(t){case "%":o=25;break;case "deg":o=90;}if(o){let a=parseFloat(r.slice(0,r.length-t.length));return isNaN(a)?0:(a=a/o,a%1===0?n(a):0)}}return e}function js(r,e){let t=r.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)t+=" "+n+'="'+e[n]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+r+"</svg>"}function Us(r){return r.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Bs(r){return "data:image/svg+xml,"+Us(r)}function zs(r){return 'url("'+Bs(r)+'")'}const qr={...lo,inline:false},$s={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":true,role:"img"},Fs={display:"inline-block"},Jt={backgroundColor:"currentColor"},po={backgroundColor:"transparent"},Vr={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Gr={webkitMask:Jt,mask:Jt,background:po};for(const r in Gr){const e=Gr[r];for(const t in Vr)e[r+t]=Vr[t];}const dt={};["horizontal","vertical"].forEach(r=>{const e=r.slice(0,1)+"Flip";dt[r+"-flip"]=e,dt[r.slice(0,1)+"-flip"]=e,dt[r+"Flip"]=e;});function Qr(r){return r+(r.match(/^[-0-9.]+$/)?"px":"")}const Yr=(r,e)=>{const t=Ms(qr,e),n={...$s},o=e.mode||"svg",a={},i=e.style,s=typeof i=="object"&&!(i instanceof Array)?i:{};for(let v in e){const f=e[v];if(f!==undefined)switch(v){case "icon":case "style":case "onLoad":case "mode":case "ssr":break;case "inline":case "hFlip":case "vFlip":t[v]=f===true||f==="true"||f===1;break;case "flip":typeof f=="string"&&Ds(t,f);break;case "color":a.color=f;break;case "rotate":typeof f=="string"?t[v]=Rs(f):typeof f=="number"&&(t[v]=f);break;case "ariaHidden":case "aria-hidden":f!==true&&f!=="true"&&delete n["aria-hidden"];break;default:{const g=dt[v];g?(f===true||f==="true"||f===1)&&(t[g]=true):qr[v]===undefined&&(n[v]=f);}}}const l=is(r,t),c=l.attributes;if(t.inline&&(a.verticalAlign="-0.125em"),o==="svg"){n.style={...a,...s},Object.assign(n,c);let v=0,f=e.id;return typeof f=="string"&&(f=f.replace(/-/g,"_")),n.innerHTML=us(l.body,f?()=>f+"ID"+v++:"iconifyVue"),h("svg",n)}const{body:u,width:d,height:p}=r,h$1=o==="mask"||(o==="bg"?false:u.indexOf("currentColor")!==-1),m=js(u,{...c,width:d+"",height:p+""});return n.style={...a,"--svg":zs(m),width:Qr(c.width),height:Qr(c.height),...Fs,...h$1?Jt:po,...s},h("span",n)};io(true);ds("",ws);if(typeof document<"u"&&typeof window<"u"){const r=window;if(r.IconifyPreload!==undefined){const e=r.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!Zi(n))&&console.error(t);}catch{console.error(t);}});}if(r.IconifyProviders!==undefined){const e=r.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const n="IconifyProviders["+t+"] is invalid.";try{const o=e[t];if(typeof o!="object"||!o||o.resources===void 0)continue;ps(t,o)||console.error(n);}catch{console.error(n);}}}}const Hs={...Tt,body:""},ho=defineComponent((r,{emit:e})=>{const t=ref(null);function n(){var c,u;t.value&&((u=(c=t.value).abort)==null||u.call(c),t.value=null);}const o=ref(!!r.ssr),a=ref(""),i=shallowRef(null);function s(){const c=r.icon;if(typeof c=="object"&&c!==null&&typeof c.body=="string")return a.value="",{data:c};let u;if(typeof c!="string"||(u=Pt(c,false,true))===null)return null;let d=Xi(u);if(!d){const m=t.value;return (!m||m.name!==c)&&(d===null?t.value={name:c}:t.value={name:c,abort:Os([u],l)}),null}n(),a.value!==c&&(a.value=c,nextTick(()=>{e("load",c);}));const p=r.customise;if(p){d=Object.assign({},d);const m=p(d.body,u.name,u.prefix,u.provider);typeof m=="string"&&(d.body=m);}const h=["iconify"];return u.prefix!==""&&h.push("iconify--"+u.prefix),u.provider!==""&&h.push("iconify--"+u.provider),{data:d,classes:h}}function l(){var u;const c=s();c?c.data!==((u=i.value)==null?undefined:u.data)&&(i.value=c):i.value=null;}return o.value?l():onMounted(()=>{o.value=true,l();}),watch(()=>r.icon,l),onUnmounted(n),()=>{const c=i.value;if(!c)return Yr(Hs,r);let u=r;return c.classes&&(u={...r,class:c.classes.join(" ")}),Yr({...Tt,...c.data},u)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]}),qd="streamline-emojis:star-struck-2",Vd="game-icons:star-swirl",Gd="solar:copy-bold-duotone",qs="line-md:alert-circle-twotone-loop",Vs="heroicons:inbox",Qd="material-symbols:order-play-rounded",Yd="material-symbols:close-rounded",Gs=["src"],Qs=defineComponent({__name:"Empty",props:{description:{default:"暂无数据"},image:{default:""},size:{default:"md"},showImage:{type:Boolean,default:true},icon:{default:Vs}},setup(r){const e=r,t=computed(()=>e.icon),n=computed(()=>({container:["flex flex-col items-center justify-center text-base-content/60","animate-in fade-in duration-300",{xs:"p-2",sm:"p-3",md:"p-4",lg:"p-6",xl:"p-8","2xl":"p-10"}[e.size]],imageWrapper:[{xs:"mb-1",sm:"mb-2",md:"mb-3",lg:"mb-4",xl:"mb-5","2xl":"mb-6"}[e.size]],customImage:["max-w-full h-auto align-middle opacity-60",{xs:"w-8 h-8",sm:"w-12 h-12",md:"w-16 h-16",lg:"w-20 h-20",xl:"w-24 h-24","2xl":"w-32 h-32"}[e.size]],defaultIcon:["text-base-content/30",{xs:"text-2xl",sm:"text-3xl",md:"text-4xl",lg:"text-5xl",xl:"text-6xl","2xl":"text-8xl"}[e.size]],description:["text-center font-medium leading-relaxed",{xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-base",xl:"text-lg","2xl":"text-xl"}[e.size]],footer:[{xs:"mt-1",sm:"mt-2",md:"mt-3",lg:"mt-4",xl:"mt-5","2xl":"mt-6"}[e.size]]}));return (o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(n.value.container)},[e.showImage?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(n.value.imageWrapper)},[e.image?(openBlock(),createElementBlock("img",{key:0,src:e.image,class:normalizeClass(n.value.customImage)},null,10,Gs)):(openBlock(),createBlock(unref(ho),{key:1,icon:t.value,class:normalizeClass(n.value.defaultIcon)},null,8,["icon","class"]))],2)):createCommentVNode("",true),createElementVNode("div",{class:normalizeClass(n.value.description)},toDisplayString(e.description),3),o.$slots.default?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(n.value.footer)},[renderSlot(o.$slots,"default")],2)):createCommentVNode("",true)],2))}}),Ar=defineComponent({__name:"index",props:{type:{default:"error"},retryable:{type:Boolean,default:false},message:{default:undefined},retryText:{default:"重试"},noPadding:{type:Boolean,default:false},size:{default:"medium"},icon:{default:qs},fold:{type:Boolean}},emits:["retry"],setup(r){const e=r,t=computed(()=>e.icon),n=computed(()=>({container:["flex flex-col items-center justify-center text-base-content/70",e.size==="mini"?"gap-1":"gap-2",!e.noPadding&&e.size!=="mini"&&"p-2","animate-in fade-in duration-300"],icon:[`text-${e.type}`,{mini:"text-2xl",small:"text-3xl",medium:"text-5xl",large:"text-6xl"}[e.size]],text:["text-center m-0 select-text font-medium",{mini:"text-xs",small:"text-sm",medium:"text-base",large:"text-lg"}[e.size]],detailButton:["btn btn-error btn-xs"],retryButton:["btn btn-error btn-sm transition-all duration-200","hover:btn-error hover:scale-105 active:scale-95"]}));function o(i){return i instanceof Error?`[Error name]: ${i.name}
[Error message]: ${i.message}
[Error stack]: ${i.stack}`:i}function a(){const i=o(e.message),{copy:s}=Mi();s(i),alert(i),alert("已将错误信息复制到剪贴板");}return (i,s)=>(openBlock(),createElementBlock("div",{class:normalizeClass(n.value.container)},[createVNode(unref(ho),{icon:t.value,class:normalizeClass(n.value.icon)},null,8,["icon","class"]),createElementVNode("p",{class:normalizeClass(n.value.text)},[renderSlot(i.$slots,"default",{},()=>[createTextVNode(toDisplayString(i.message||unref(zn).UNKNOWN_ERROR),1)])],2),e.message instanceof Error?(openBlock(),createElementBlock("button",{key:0,class:normalizeClass(n.value.detailButton),onClick:a}," 查看错误 ",2)):createCommentVNode("",true),e.retryable?(openBlock(),createElementBlock("button",{key:1,class:normalizeClass(n.value.retryButton),onClick:s[0]||(s[0]=l=>i.$emit("retry"))},toDisplayString(e.retryText),3)):createCommentVNode("",true)],2))}}),Ys=["src","origin-src","refferer"],Ws=defineComponent({__name:"index",props:{referer:{},src:{},alt:{},skeletonMode:{},cache:{type:Boolean}},setup(r){const e=r,t={container:"flex justify-center items-center w-full h-full",image:"w-full h-full object-cover rounded",skeleton:"skeleton w-full h-full rounded"},n=ref(),o=ref(false),a=ref(false),i=new Ct;async function s(c){if(e.cache){const h=await gt.get(c);if(h)return await Or(h.value)}const u=await i.get(c,{headers:{...e.referer?{Referer:e.referer}:{}},responseType:"blob"}),d=new Blob([await u.blob()],{type:"image/jpeg"}),p=await Vn(d,{maxWidth:720,maxHeight:720,quality:.8,type:"image/webp"});return e.cache&&gt.set(e.src,p),await Or(p)}async function l(c){try{if(o.value=!0,e.referer){const u=await s(c);n.value=u;}else n.value=c;}catch{n.value="",a.value=true;}finally{o.value=false;}}return watch(()=>e.src,async c=>{c?l(c):n.value="";},{immediate:true}),(c,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(t.container)},[o.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.skeleton)},null,2)):a.value?(openBlock(),createBlock(Ar,{key:1})):(openBlock(),createElementBlock("img",mergeProps({key:2,src:n.value,"origin-src":e.src,refferer:e.referer,class:t.image},c.$attrs),null,16,Ys))],2))}}); exports({ h: ho, c: qd, V: Vd, G: Gd, d: Qd, Y: Yd, Q: Qs, A: Ar });var pt={exports:{}},Ks=pt.exports,Wr;function Xs(){return Wr||(Wr=1,function(r,e){(function(t,n){r.exports=n();})(Ks,function(){var t,n,o=1e3,a=6e4,i=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2628e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,p={years:c,months:u,days:s,hours:i,minutes:a,seconds:o,milliseconds:1,weeks:6048e5},h=function(y){return y instanceof E},m=function(y,b,x){return new E(y,x,b.$l)},v=function(y){return n.p(y)+"s"},f=function(y){return y<0},g=function(y){return f(y)?Math.ceil(y):Math.floor(y)},w=function(y){return Math.abs(y)},_=function(y,b){return y?f(y)?{negative:true,format:""+w(y)+b}:{negative:false,format:""+y+b}:{negative:false,format:""}},E=function(){function y(x,I,T){var S=this;if(this.$d={},this.$l=T,x===undefined&&(this.$ms=0,this.parseFromMilliseconds()),I)return m(x*p[v(I)],this);if(typeof x=="number")return this.$ms=x,this.parseFromMilliseconds(),this;if(typeof x=="object")return Object.keys(x).forEach(function($){S.$d[v($)]=x[$];}),this.calMilliseconds(),this;if(typeof x=="string"){var N=x.match(d);if(N){var O=N.slice(2).map(function($){return $!=null?Number($):0});return this.$d.years=O[0],this.$d.months=O[1],this.$d.weeks=O[2],this.$d.days=O[3],this.$d.hours=O[4],this.$d.minutes=O[5],this.$d.seconds=O[6],this.calMilliseconds(),this}}return this}var b=y.prototype;return b.calMilliseconds=function(){var x=this;this.$ms=Object.keys(this.$d).reduce(function(I,T){return I+(x.$d[T]||0)*p[T]},0);},b.parseFromMilliseconds=function(){var x=this.$ms;this.$d.years=g(x/c),x%=c,this.$d.months=g(x/u),x%=u,this.$d.days=g(x/s),x%=s,this.$d.hours=g(x/i),x%=i,this.$d.minutes=g(x/a),x%=a,this.$d.seconds=g(x/o),x%=o,this.$d.milliseconds=x;},b.toISOString=function(){var x=_(this.$d.years,"Y"),I=_(this.$d.months,"M"),T=+this.$d.days||0;this.$d.weeks&&(T+=7*this.$d.weeks);var S=_(T,"D"),N=_(this.$d.hours,"H"),O=_(this.$d.minutes,"M"),$=this.$d.seconds||0;this.$d.milliseconds&&($+=this.$d.milliseconds/1e3,$=Math.round(1e3*$)/1e3);var q=_($,"S"),ee=x.negative||I.negative||S.negative||N.negative||O.negative||q.negative,G=N.format||O.format||q.format?"T":"",Q=(ee?"-":"")+"P"+x.format+I.format+S.format+G+N.format+O.format+q.format;return Q==="P"||Q==="-P"?"P0D":Q},b.toJSON=function(){return this.toISOString()},b.format=function(x){var I=x||"YYYY-MM-DDTHH:mm:ss",T={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return I.replace(l,function(S,N){return N||String(T[S])})},b.as=function(x){return this.$ms/p[v(x)]},b.get=function(x){var I=this.$ms,T=v(x);return T==="milliseconds"?I%=1e3:I=T==="weeks"?g(I/p[T]):this.$d[T],I||0},b.add=function(x,I,T){var S;return S=I?x*p[v(I)]:h(x)?x.$ms:m(x,this).$ms,m(this.$ms+S*(T?-1:1),this)},b.subtract=function(x,I){return this.add(x,I,true)},b.locale=function(x){var I=this.clone();return I.$l=x,I},b.clone=function(){return m(this.$ms,this)},b.humanize=function(x){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!x)},b.valueOf=function(){return this.asMilliseconds()},b.milliseconds=function(){return this.get("milliseconds")},b.asMilliseconds=function(){return this.as("milliseconds")},b.seconds=function(){return this.get("seconds")},b.asSeconds=function(){return this.as("seconds")},b.minutes=function(){return this.get("minutes")},b.asMinutes=function(){return this.as("minutes")},b.hours=function(){return this.get("hours")},b.asHours=function(){return this.as("hours")},b.days=function(){return this.get("days")},b.asDays=function(){return this.as("days")},b.weeks=function(){return this.get("weeks")},b.asWeeks=function(){return this.as("weeks")},b.months=function(){return this.get("months")},b.asMonths=function(){return this.as("months")},b.years=function(){return this.get("years")},b.asYears=function(){return this.as("years")},y}(),j=function(y,b,x){return y.add(b.years()*x,"y").add(b.months()*x,"M").add(b.days()*x,"d").add(b.hours()*x,"h").add(b.minutes()*x,"m").add(b.seconds()*x,"s").add(b.milliseconds()*x,"ms")};return function(y,b,x){t=x,n=x().$utils(),x.duration=function(S,N){var O=x.locale();return m(S,{$l:O},N)},x.isDuration=h;var I=b.prototype.add,T=b.prototype.subtract;b.prototype.add=function(S,N){return h(S)?j(this,S,1):I.bind(this)(S,N)},b.prototype.subtract=function(S,N){return h(S)?j(this,S,-1):T.bind(this)(S,N)};}});}(pt)),pt.exports}var Js=Xs();const Zs=Rn(Js);Ke.extend(Zs);function el(r){return r?Ke(r).format("YYYY-MM-DD"):""}function tl(r){if(!r)return "";const e=Math.floor(r/60),t=r%60,n=[];return e>0&&n.push(`${e}小时`),t>0&&n.push(`${t}分钟`),n.join(" ")}function Wd(r){if(!r)return "未知";const e=["B","KB","MB","GB","TB"];let t=r,n=0;for(;t>=1024&&n<e.length-1;)t/=1024,n++;return `${t.toFixed(2)} ${e[n]}`}const rl="jav_cache";class nl extends Ae{constructor(){super({storeName:rl});}}const ol=new nl;var Qe;(function(r){r.JAVBUS="JavBus",r.JAVDB="JavDB",r.MISSAV="MissAV";})(Qe||(Qe={}));class al extends Error{constructor(){super("未找到番号");}}class il extends Error{constructor(){super("请求页面错误");}}class K{constructor(){Object.defineProperty(this,"request",{enumerable:true,configurable:true,writable:true,value:new Ct}),Object.defineProperty(this,"cache",{enumerable:true,configurable:true,writable:true,value:ol});}async getInfo(e){const t=await this.getInfoByCache(e);if(t)return t;const n=await this.getInfoByAvNumber(e);return n&&this.cache.set(`${this.source}:${e}`,n),n??undefined}async getInfoByCache(e){const t=await this.cache.get(`${this.source}:${e}`);if(t)return t.value}async parseInfo(e){var a,i,s,l,c;let t=new DOMParser().parseFromString(e,"text/html");try{t=await this.parseInfoBefore(t);}catch{return}const n={source:this.source,baseUrl:this.baseUrl,detailUrl:this.detailUrl,searchUrl:this.searchUrl,avNumber:this.parseAvNumber(t),title:this.parseTitle(t),date:this.parseDate(t),duration:this.parseDuration(t),director:this.parseDirector(t),actors:this.parseActor(t),studio:this.parseStudio(t),publisher:this.parsePublisher(t),cover:this.parseCover(t),coverSingle:this.parseCoverSingle(t),preview:this.parsePreview(t),series:this.parseSeries(t),category:this.parseCategory(t),score:(a=this.parseScore)==null?undefined:a.call(this,t),scoreCount:(i=this.parseScoreCount)==null?undefined:i.call(this,t),viewCount:(s=this.parseViewCount)==null?undefined:s.call(this,t),downloadCount:(l=this.parseDownloadCount)==null?undefined:l.call(this,t),comments:(c=this.parseComments)==null?undefined:c.call(this,t)};return await this.parseInfoAfter(n)}async parseInfoBefore(e){return e}async parseInfoAfter(e){return Promise.resolve(e)}}Object.defineProperty(K,"NotFound",{enumerable:true,configurable:true,writable:true,value:al});Object.defineProperty(K,"PageError",{enumerable:true,configurable:true,writable:true,value:il});class sl extends K{constructor(){super(...arguments),Object.defineProperty(this,"source",{enumerable:true,configurable:true,writable:true,value:Qe.JAVBUS}),Object.defineProperty(this,"baseUrl",{enumerable:true,configurable:true,writable:true,value:"https://www.javbus.com"}),Object.defineProperty(this,"detailUrl",{enumerable:true,configurable:true,writable:true,value:""}),Object.defineProperty(this,"searchUrl",{enumerable:true,configurable:true,writable:true,value:""}),Object.defineProperty(this,"labels",{enumerable:true,configurable:true,writable:true,value:{}});}async getInfoByAvNumber(e){const t=new URL(e,this.baseUrl).href,n=new URL(`/search/${e}`,this.baseUrl).href;this.detailUrl=t,this.searchUrl=n;const o=await this.request.get(t);if(o.status===404)throw new K.NotFound;if(o.status!==200&&o.status!==302)throw new K.PageError;return await this.parseInfo(await o.text())}async parseInfoBefore(e){if(e.querySelector(".error-page"))throw new K.NotFound;const n=this.getLabels(e);return this.labels=n,e}async parseInfoAfter(e){var t;return {...e,title:(t=e.title)==null?undefined:t.replace(new RegExp(`^${e.avNumber}`,"i"),"").trim()}}getLabels(e){const t=e.querySelectorAll(".container .movie .info p > span.header, .container .movie .info p.header");return Object.fromEntries(Array.from(t).map(n=>{var o;return [(o=n.textContent)==null?undefined:o.replace(":","").trim(),n]}))}parseAvNumber(){var e,t,n;return ((n=(t=(e=this.labels.識別碼)==null?undefined:e.nextElementSibling)==null?undefined:t.textContent)==null?undefined:n.trim())??""}parseTitle(e){var n,o;return (o=(n=e.querySelector(".container h3"))==null?undefined:n.textContent)==null?undefined:o.trim()}parseDate(){var t,n;const e=(n=(t=this.labels.發行日期)==null?undefined:t.parentElement)==null?undefined:n.textContent;return e?Ke(e.trim().replace(/[^\d-]/g,"")).valueOf():undefined}parseDuration(){var t,n;const e=(n=(t=this.labels.長度)==null?undefined:t.parentElement)==null?undefined:n.textContent;return e?Number(e.trim().replace(/\D/g,"")):undefined}parseDirector(){var t,n;const e=(n=(t=this.labels.導演)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseActor(){var t,n,o;const e=(o=(n=(t=this.labels.演員)==null?undefined:t.parentElement)==null?undefined:n.nextElementSibling)==null?undefined:o.querySelectorAll("li");return e!=null&&e.length?Array.from(e).map(a=>{const i=a.querySelector("a"),s=a.querySelector("img");return {name:(s==null?undefined:s.getAttribute("title"))??"",url:(i==null?undefined:i.getAttribute("href"))??undefined,sex:undefined,face:""}}):undefined}parseStudio(){var t,n;const e=(n=(t=this.labels.製作商)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parsePublisher(){var t,n;const e=(n=(t=this.labels.發行商)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseCover(e){var n;const t=(n=e.querySelector(".container .bigImage img"))==null?undefined:n.getAttribute("src");if(t)return t.includes("https://")?{url:t}:{url:new URL(t,this.baseUrl).href,referer:this.detailUrl}}parseCoverSingle(e){var n;const t=(n=e.querySelector(".container .bigImage img"))==null?undefined:n.getAttribute("src");return t?{url:new URL(t.replace("_b","").replace("cover","thumb"),this.baseUrl).href,referer:this.searchUrl}:undefined}parsePreview(e){const t=e.querySelectorAll("#sample-waterfall a");return t.length?Array.from(t).map(n=>{var o;return {raw:n.getAttribute("href")??undefined,thumbnail:((o=n.querySelector("img"))==null?undefined:o.getAttribute("src"))??undefined}}).filter(n=>!!n.raw||!!n.thumbnail).map(n=>({raw:n.raw,thumbnail:n.thumbnail?new URL(n.thumbnail,this.baseUrl).href:undefined})):undefined}parseSeries(){var t,n;const e=(n=(t=this.labels.系列)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseCategory(){var t,n;const e=(n=(t=this.labels.類別)==null?undefined:t.nextElementSibling)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseComments(){return []}} exports("s", sl);class ll extends K{constructor(){super(...arguments),Object.defineProperty(this,"source",{enumerable:true,configurable:true,writable:true,value:Qe.JAVDB}),Object.defineProperty(this,"baseUrl",{enumerable:true,configurable:true,writable:true,value:"https://javdb.com"}),Object.defineProperty(this,"detailUrl",{enumerable:true,configurable:true,writable:true,value:""}),Object.defineProperty(this,"searchUrl",{enumerable:true,configurable:true,writable:true,value:""}),Object.defineProperty(this,"labels",{enumerable:true,configurable:true,writable:true,value:{}});}async getInfoByAvNumber(e){const t=new URLSearchParams({q:e}),n=new URL(`/search?${t.toString()}`,this.baseUrl).href;this.searchUrl=n;const o=await this.request.get(n);if(o.status===404)throw new K.NotFound;if(o.status!==200&&o.status!==302)throw new K.PageError;const a=this.getDetailUrl(await o.text());if(!a)throw new K.PageError;this.detailUrl=a;const i=await this.request.get(a);if(i.status===404)throw new K.NotFound;if(i.status!==200&&i.status!==302)throw new K.PageError;return await this.parseInfo(await i.text())}getDetailUrl(e){var o;const n=(o=new DOMParser().parseFromString(e,"text/html").querySelector(".movie-list .item a"))==null?undefined:o.getAttribute("href");return n?new URL(n,this.baseUrl).href:undefined}async parseInfoBefore(e){const t=this.getLabels(e);return this.labels=t,e}getLabels(e){const t=e.querySelectorAll(".container .panel-block strong");return Object.fromEntries(Array.from(t).map(n=>{var o;return [(o=n.textContent)==null?undefined:o.replace(":","").trim(),n]}))}parseAvNumber(){var t,n,o,a;return ((a=(o=(n=(t=this.labels.番號)==null?undefined:t.parentElement)==null?undefined:n.querySelector(".value"))==null?undefined:o.textContent)==null?undefined:a.trim())??undefined}parseTitle(e){var n,o;return ((o=(n=e.querySelector(".current-title"))==null?undefined:n.textContent)==null?undefined:o.trim())??undefined}parseDate(){var t,n,o,a;const e=(a=(o=(n=(t=this.labels.日期)==null?undefined:t.parentElement)==null?undefined:n.querySelector(".value"))==null?undefined:o.textContent)==null?undefined:a.trim();return e?Ke(e.replace(/[^\d-]/g,"")).valueOf():0}parseDuration(){var t,n,o,a;const e=(a=(o=(n=(t=this.labels.時長)==null?undefined:t.parentElement)==null?undefined:n.querySelector(".value"))==null?undefined:o.textContent)==null?undefined:a.trim();return e?Number(e.replace(/\D/g,"")):0}parseDirector(){var t,n;const e=(n=(t=this.labels.導演)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll(".value a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})).map(o=>({...o,url:o.url?new URL(o.url,this.baseUrl).href:undefined})):undefined}parseActor(){var t,n;const e=(n=(t=this.labels.演員)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll(".value a");return e!=null&&e.length?Array.from(e).map(o=>{var u,d;const a=o.getAttribute("href")??undefined,i=a?new URL(a,this.baseUrl).href:undefined,s=a==null?undefined:a.split("/").pop(),c=`https://c0.jdbstatic.com/avatars/${s==null?undefined:s.slice(0,2).toLowerCase()}/${s}.jpg`;return {name:o.textContent,url:i,face:c,sex:(u=o.nextElementSibling)!=null&&u.classList.contains("female")?1:(d=o.nextElementSibling)!=null&&d.classList.contains("male")?0:undefined}}):undefined}parseStudio(){var t,n;const e=(n=(t=this.labels.片商)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll(".value a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})).map(o=>({...o,url:o.url?new URL(o.url,this.baseUrl).href:undefined})):undefined}parsePublisher(){}parseCover(e){var n;const t=(n=e.querySelector("img.video-cover"))==null?undefined:n.getAttribute("src");return t?{url:new URL(t,this.baseUrl).href,referer:this.detailUrl}:undefined}parseCoverSingle(){return {url:"",referer:this.detailUrl}}parsePreview(e){const t=e.querySelectorAll(".preview-images .tile-item");return t.length?Array.from(t).map(n=>{var o;return {raw:(n==null?undefined:n.getAttribute("href"))??undefined,thumbnail:((o=n.querySelector("img"))==null?undefined:o.getAttribute("src"))??undefined}}).filter(n=>!!n.raw||!!n.thumbnail):undefined}parseSeries(){var t,n;const e=(n=(t=this.labels.系列)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll(".value a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})).map(o=>({...o,url:o.url?new URL(o.url,this.baseUrl).href:undefined})):undefined}parseCategory(){var t,n;const e=(n=(t=this.labels.類別)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll(".value a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})).map(o=>({...o,url:o.url?new URL(o.url,this.baseUrl).href:undefined})):undefined}parseComments(){return []}} exports("l", ll);class cl extends K{constructor(){super(...arguments),Object.defineProperty(this,"source",{enumerable:true,configurable:true,writable:true,value:Qe.MISSAV}),Object.defineProperty(this,"baseUrl",{enumerable:true,configurable:true,writable:true,value:"https://missav.ws/cn/"}),Object.defineProperty(this,"detailUrl",{enumerable:true,configurable:true,writable:true,value:""}),Object.defineProperty(this,"searchUrl",{enumerable:true,configurable:true,writable:true,value:""}),Object.defineProperty(this,"labels",{enumerable:true,configurable:true,writable:true,value:{}});}async getInfoByAvNumber(e){const t=new URL(e,this.baseUrl).href;if(!t)throw new K.NotFound;this.detailUrl=t;let n=await this.request.get(t);if(n.status===301){const o=n.headers.get("location");if(!o)throw new K.PageError;this.detailUrl=o,n=await this.request.get(o);}if(n.status===404)throw new K.NotFound;if(n.status!==200&&n.status!==302)throw new K.PageError;return await this.parseInfo(await n.text())}async parseInfoBefore(e){const t=this.getLabels(e);return this.labels=t,e}getLabels(e){const t=e.querySelectorAll(".space-y-2 > div > span:first-of-type");return Object.fromEntries(Array.from(t).map(n=>{var o;return [(o=n.textContent)==null?undefined:o.replace(":","").trim(),n]}))}parseAvNumber(){var t,n,o;return ((o=(n=(t=this.labels.番号)==null?undefined:t.nextElementSibling)==null?undefined:n.textContent)==null?undefined:o.trim())??undefined}parseTitle(){var t,n,o;return ((o=(n=(t=this.labels.标题)==null?undefined:t.nextElementSibling)==null?undefined:n.textContent)==null?undefined:o.trim())??undefined}parseDate(){var t,n,o;const e=(o=(n=(t=this.labels.日期)==null?undefined:t.nextElementSibling)==null?undefined:n.textContent)==null?undefined:o.trim();return e?Ke(e.replace(/[^\d-]/g,"")).valueOf():0}parseDuration(){}parseDirector(){var t,n;const e=(n=(t=this.labels.导演)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseActor(){var n,o,a,i;const e=(o=(n=this.labels.女优)==null?undefined:n.parentElement)==null?undefined:o.querySelectorAll("a"),t=(i=(a=this.labels.男优)==null?undefined:a.parentElement)==null?undefined:i.querySelectorAll("a");return [...e!=null&&e.length?Array.from(e).map(s=>({name:s.textContent,url:s.getAttribute("href")??undefined,sex:0})):[],...t!=null&&t.length?Array.from(t).map(s=>({name:s.textContent,url:s.getAttribute("href")??undefined,sex:1})):[]]}parseStudio(){}parsePublisher(){var t,n;const e=(n=(t=this.labels.发行商)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseCover(e){var n;const t=(n=e.querySelector("meta[property='og:image']"))==null?undefined:n.getAttribute("content");return t?{url:t}:undefined}parseCoverSingle(){}parsePreview(){}parseSeries(){var t,n;const e=(n=(t=this.labels.标籤)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})).map(o=>({...o,url:o.url?new URL(o.url,this.baseUrl).href:undefined})):undefined}parseCategory(){var t,n;const e=(n=(t=this.labels.类型)==null?undefined:t.parentElement)==null?undefined:n.querySelectorAll("a");return e!=null&&e.length?Array.from(e).map(o=>({name:o.textContent,url:o.getAttribute("href")??undefined})):undefined}parseComments(){}}const ul={key:1,class:"skeleton w-full h-full"},dl=["alt"],pl=["href","title","alt"],hl=["href","alt"],fl=["href","alt"],ml=["href","alt"],bl=["href","alt"],gl=defineComponent({__name:"index",props:{avNumber:{}},setup(r){const e=r,t=new sl,n=new ll,o=new cl,a={container:{main:"w-full px-20 h-24",content:"relative flex items-center gap-1 group h-full"},states:{error:"flex items-center justify-center flex-1",empty:"flex items-center justify-center flex-1"},cover:{container:"flex items-center justify-center w-36 h-24",link:"block w-full h-full"},main:{container:"flex-1 flex flex-col gap-2"},title:{container:"text-md text-neutral-500 ml-2",link:"hover:underline line-clamp-1 hover:text-primary transition-colors"},content:{container:"flex flex-1 items-start gap-5 ml-2",group:"flex flex-col gap-0.5 min-w-32"},item:{container:"flex items-start gap-2 text-xs",label:"w-8 h-5 text-neutral-500 shrink-0",value:"flex flex-1 gap-2 flex-wrap text-neutral-500 line-clamp-1",link:"hover:text-primary transition-colors hover:underline",badge:"bg-neutral-100 hover:bg-neutral-100 rounded px-1 py-[1px] text-xs"},secondary:"opacity-40",meta:{avNumber:"absolute right-4 bottom-2 text-xs text-neutral-300"}},i=ref(),s=eo(i,{once:true}),l=Oi(async()=>{const c=[t,n,o];for(const u of c){const d=await u.getInfoByCache(e.avNumber);if(d)return d}for(const[u,d]of Object.entries(c))try{return await d.getInfo(e.avNumber)}catch(p){if(Number(u)===c.length-1){if(p instanceof K.NotFound)return null;throw p}}},null,{immediate:false});return watch(s,c=>{c&&l.execute(0);}),onMounted(async()=>{}),(c,u)=>{var d,p,h,m,v,f,g,w,_,E,j,y,b,x,I,T,S,N,O,$,q,ee,G,Q,ue,de;return openBlock(),createElementBlock("div",{ref_key:"extInfoRef",ref:i,class:normalizeClass(a.container.main)},[createElementVNode("div",{class:normalizeClass(a.container.content)},[unref(l).error.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.states.error)},[createVNode(Ar,{message:unref(l).error.value,size:"mini"},null,8,["message"])],2)):unref(l).isLoading.value||!unref(l).isLoading.value&&!unref(l).isReady.value?(openBlock(),createElementBlock("div",ul)):unref(l).state.value?unref(l).state.value?(openBlock(),createElementBlock(Fragment,{key:3},[createElementVNode("div",{class:normalizeClass(a.cover.container)},[createElementVNode("a",{href:"javascript:void(0)",alt:(d=unref(l).state.value)==null?undefined:d.title,class:normalizeClass(a.cover.link)},[createVNode(Ws,{"skeleton-mode":"light",src:((h=(p=unref(l).state.value)==null?undefined:p.cover)==null?undefined:h.url)??"",alt:((m=unref(l).state.value)==null?undefined:m.title)??"",referer:(f=(v=unref(l).state.value)==null?undefined:v.cover)==null?undefined:f.referer,cache:""},null,8,["src","alt","referer"])],10,dl)],2),createElementVNode("div",{class:normalizeClass(a.main.container)},[createElementVNode("div",{class:normalizeClass(a.title.container)},[createElementVNode("a",{href:(g=unref(l).state.value)==null?undefined:g.detailUrl,target:"_blank",title:(w=unref(l).state.value)==null?undefined:w.title,alt:(_=unref(l).state.value)==null?undefined:_.title,class:normalizeClass(a.title.link)},toDisplayString((E=unref(l).state.value)==null?undefined:E.source)+" "+toDisplayString((j=unref(l).state.value)==null?undefined:j.title),11,pl)],2),createElementVNode("div",{class:normalizeClass(a.content.container)},[createElementVNode("div",{class:normalizeClass(a.content.group)},[createElementVNode("div",{class:normalizeClass(a.item.container)},[createElementVNode("span",{class:normalizeClass(a.item.label)},"番号",2),(y=unref(l).state.value)!=null&&y.avNumber?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.item.value)},[createElementVNode("a",{href:(b=unref(l).state.value)==null?undefined:b.detailUrl,target:"_blank",alt:(x=unref(l).state.value)==null?undefined:x.title,class:normalizeClass(a.item.link)},toDisplayString((I=unref(l).state.value)==null?undefined:I.avNumber),11,hl)],2)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(a.item.value)},"-",2))],2),createElementVNode("div",{class:normalizeClass([a.item.container,a.secondary])},[createElementVNode("span",{class:normalizeClass(a.item.label)},"日期",2),(T=unref(l).state.value)!=null&&T.date?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.item.value)},toDisplayString(unref(el)((S=unref(l).state.value)==null?undefined:S.date)),3)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(a.item.value)},"-",2))],2),createElementVNode("div",{class:normalizeClass([a.item.container,a.secondary])},[createElementVNode("span",{class:normalizeClass(a.item.label)},"时长",2),(N=unref(l).state.value)!=null&&N.duration?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.item.value)},toDisplayString(unref(tl)((O=unref(l).state.value)==null?undefined:O.duration)),3)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(a.item.value)},"-",2))],2)],2),createElementVNode("div",{class:normalizeClass(a.content.group)},[createElementVNode("div",{class:normalizeClass(a.item.container)},[createElementVNode("span",{class:normalizeClass(a.item.label)},"演员",2),($=unref(l).state.value)!=null&&$.actors?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.item.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((q=unref(l).state.value)==null?undefined:q.actors,Y=>(openBlock(),createElementBlock("a",{key:Y.url,href:Y.url,target:"_blank",alt:Y.name,class:normalizeClass(a.item.link)},toDisplayString(Y.name),11,fl))),128))],2)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(a.item.value)},"-",2))],2),createElementVNode("div",{class:normalizeClass([a.item.container,a.secondary])},[createElementVNode("span",{class:normalizeClass(a.item.label)},"导演",2),(ee=unref(l).state.value)!=null&&ee.director?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.item.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((G=unref(l).state.value)==null?undefined:G.director,Y=>(openBlock(),createElementBlock("a",{key:Y.url,href:Y.url,target:"_blank",alt:Y.name,class:normalizeClass(a.item.link)},toDisplayString(Y.name),11,ml))),128))],2)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(a.item.value)},"-",2))],2),(Q=unref(l).state.value)!=null&&Q.category?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([a.item.container,a.secondary])},[createElementVNode("span",{class:normalizeClass(a.item.label)},"分类",2),(ue=unref(l).state.value)!=null&&ue.category?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.item.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((de=unref(l).state.value)==null?undefined:de.category,Y=>(openBlock(),createElementBlock("a",{key:Y.url,href:Y.url,target:"_blank",alt:Y.name,class:normalizeClass(a.item.badge)},toDisplayString(Y.name),11,bl))),128))],2)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(a.item.value)},"-",2))],2)):createCommentVNode("",true)],2)],2)],2),createElementVNode("div",{class:normalizeClass(a.meta.avNumber)},toDisplayString(e.avNumber),3)],64)):createCommentVNode("",true):(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(a.states.empty)},[createVNode(Qs,{description:`未找到番号 [${e.avNumber}] 信息`,size:"sm"},null,8,["description"])],2))],2)],2)}}});class vl extends Te{constructor(){super(...arguments),Object.defineProperty(this,"IS_PLUS",{enumerable:true,configurable:true,writable:true,value:true}),Object.defineProperty(this,"ENABLE_KEY_IN_USER_SETTING",{enumerable:true,configurable:true,writable:true,value:"enableFilelistPreview"}),Object.defineProperty(this,"vueApp",{enumerable:true,configurable:true,writable:true,value:null});}onLoad(){if(this.itemInfo.fileListType===ge.grid||this.itemInfo.attributes.iv!==fe.Yes&&this.itemInfo.attributes.file_type!==Vt.folder||!this.itemInfo.avNumber)return;this.itemNode.classList.add("with-ext-info");const e=document.createElement("div");e.style.width="100%",this.itemNode.append(e);const t=e.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=vr,t.appendChild(n);const o=document.createElement("div");o.className="ext-info-root",o.setAttribute("data-theme","light"),t.appendChild(o);const a=createApp(gl,{avNumber:this.itemInfo.avNumber});a.mount(o),this.vueApp=a;}onDestroy(){defer(()=>{var e;(e=this.vueApp)==null||e.unmount();});}}const wl=exports("w", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAC+lBMVEUAAAAhISIeHh4tLS4iIiMeHh8tLS5VVlckJSUrLCxXV1goKCpERUYxMjIjIyNKS0tOT08DAwMhISJCQkM2Njc+P0ASEhI2NjdBQUErLCweHx8ICQkAAABPT1A5OTolJSZHSEgcHB1KSkogICA7OzseHh87OzweHx8dHh8fICAhISEjIyMhIiIkJCVHR0hJSUpCQ0RERUY8PD06Ojs4ODk/QEE2Njc+Pj8jJCcmJycfHyA0NTVBQUIdHR4yMzMkJSowMDElJy4pKSoApP4/QUgbGxsAlf0tLi8Aq/4Akf1CREgrKywAnP4Amf0Asv4nKjwkJzInLEEAtv4AqP4Auv48QEwlKTcAxP40NjwAr/45PlY3Oj8An/4wMjkAyf4nLUYpL0woKTQAv/46P1A6PEIA0v4Ajfw7PkYtLDdIUP8tLUAoKS8Azf4tLEcAifkAhfQwL1Y1OFEAfOUAcdpZWls4P1s3O0siJSx2Ov02OEZLSP8fIiYAof4AkvhEWP8A2/4zMV4pMFMyM0MaHSMAf+4A1v4A4PwAhu0qMlguLVAAjPM4OYM3NWc3PWQBeNo4OnwAXbQBcNA4OV8uN1IdAwBLQP9FOOMAV6w5PG8aEQRbNOEAlLIDZrJENaExQpwzNHAzM01tOvkFnrkAiLIsM10zOFsDts0Ccr8AY74AfLUAZ8cAcrIyMWgvMWIA5P1mOPEA1O4Af+kAduQFwdgfPW5SU1RBVPg+W/cA2vUAv/AAfcsAp8A7M3IlQW4AsfQBuOYAi99sNNwAhcEApPMAmeoFmt5BMwo0BAAqAgABquk4VecAyuIAk9AIk8EzOHsAyfQAjOoEiNIAnMsAm/QByuo6T+YAs9sAqMouaZkOQ3YjV2IbJDJCRPM2WOYApt8JqNUhj6c/NJIZdYgcOWYXMFE7Niw5HgEeGAFXMMEJhpoFW5cISI8gXXw8MhsvHRY8PsUler0Bd6MzPpYTQmE3TF0gRUw9P9wCZ6ALToUZOEMzUtpnM9MwSLU1LinSLbX4AAAAK3RSTlMA/ggG+5D7jPuP/vv7+4CA/RyM+5D8NPuNTj8qDtz7cGpcrennxr24ouXd8KKL5wAADXtJREFUeNrslEuOozAURS1brZasSgOqaggh0AhFDPkYjAdhBb0etpb91XMl6IniY6cy5SCG+B7d9zDZ2dnZ2THBplAjbMpr4fq4F/210o8/JYR60SlM09TR/LbBQdI0PEUenPITBwbfeKGTxQPnAzwPhhX4yO2Be6d04/wYeoQ9qwDO/jHm3C16JdTfkfcHb6u8j9w/kLIqyjL+OLGnFBglUcZ5IZJEKCn7vgJqTfGgXKC4U2sqTd9LqZRKRFUWmU/sDSilDucyaIRSkH83MCkUi/lfBkIkong7nim1zfeyoYZ4MRWopwJGAxQAElXkEaNW+SyKeRIIYN4A5j8pIJqkvvg2BpRG8e3QAMsC5h3AEfQoAOcllY0Box7mL4zAegmnAo0m6C8RZcYCMg75LzUALDXQtkGVnw0GlPwbgrZtbQXczRHISQOtNvjD6PYAIl5dUUBsC7hfr2sQECjQNspnbPMPyG6HFpguAZRpaMBWIJD51m3AmH9ruk0BNEAH0wqgANCcNiqg5AgFdChgWAIcwKKAnAt0gfq1sQXUi/tr960CiRXYXsXVTGDMh8Mv3qoAI6EL+U/NwLX7CVEgaELCVifguActoJkJLBnYF4AC4oPQ9UuoBgGsAAWwABAYWc7HAoBZPjSQn9cEmBeLKwos3ET/x3yUgAepDQUA1+7isZV89slonbU2EUUBHAeFgIgLIir6oH4B12iRkRDawamN9sEaOk06FezUaI1LlAYr1orYuiUGG5RQ3DH1SatENIILIibRoigohKKYCAkVbC1SfXABz7l3JjeTOJM5oIhC/z/PPSldMBP+HYe9gCIggDoYFNRpCDp9HQAI5s6ZrCeYv9TGcf8FwFfkIW8soC9k3Oc4zgpXqPch0ABQIMtyFXuCAgHeQjskbvQADLDaulgXsGjpNBBCnwGqAIACnucBUD7L6WmyfMUFzLUuNAFAgdtNVwBfilem0F1WtyqBswL+SIfk9fsMMA0Ak3QBFgZwI0CG8azyeIoAmOT5xER6fHw8PZFILKuDIHZZnvXLFoCA6bqAGUsIgArcMDIBwPAlk0u/2dBcU9Pw7G06l+B5eCMYktftmwfgCkQA4GC/AHDWKXnn6HhXV9fG5kM1DbW1z9OJUX4VvRSaJ32dB+Bs06yz9QHLLZwNAaJVVPoM4HTCL6WfPnWqa+MGANQ0NDQ1Pf+az/H4eWXD/v8wmr5t2uop+oBlFhsCQCCK6gJQ4FQHBR6PfOa4AsAV1NbXv5rIr/DQ7xqkXt7Hwb4xYJ4KEBkA85rxOHNf7xAAuYKG2qam+k2PM9a8LGOziuXL+sYA/HFkLQWIKqCzE/p+qLbiOFsJoHX0wnEArCusoKm+ftPmF+n8qGfFSlrW7ZsDSCjAPIwfBvN0EOD3527cKQNs2rz109dkzkOitE77mgcwBbBJkoij9knZ1eqCgT9Av7PzrApoLgJsbtz6aiK5UrbSMsuzA6QAzgCwCjcgcaV9F44i8PvdYRWAK6BHgICtjS0PMn/zsptmoc76DGCvCJDIBo7Svs/vo+kOV0cHCgAgBs8wgLoCBIDA++RzckzGn2tZXts3BlQxAO37SFydEsDGMkBjo9f7aTj5171aMxzrmwQcPQoAyPuK8sEgEmAl0qMz+xBQegQIaGlpafNe8ydFN8exPs2rAJsBYIXFTjeAANLvIxOEOtwh/AZ/yQClR4AAr7et510mn3SLXNGo+QqA2QCwAwD7V674fNEojWM/8v3SaReuIKwA1pe8AQO09XTH4BTcmFXzDGAxAYAXIP0+tR/p+P7z/ftff4KuqBGACtpQ0D0wnLSLJMvylQErGYD0A4EImWD257179+5//OOLhsPtKgDfQHMEDNDT3Ru/JiVFyc7yJgHbQYALgP1Dv6+PAr592HH48OH7v16DgAH0jgAB3b23bmdSSdFeMkJFwHZlAdgPZLOhSAgEPw8SwMfvGoD+ESCg99at2HDKZhM0fcFiNwBYEUAWsDd6JBB4ONLfP5KNhEKh8wrgUgGwmwHK34ACgBDPpMYkQWB5U4B2BBw5EoiODA4O9o+EKGAHAVxRAHt2r2dHwN6g6AqxDxP7kZIcAhtTG9hF+oHA76tXrw72Z4sB4esA2L/vGAGwI6j93xEgIN4b+zEmOMwCVlsEsgEKePiUAC6GTp8uApzYxQDlH8QSQG/89u0BaY3gKBAcFvusCoD2drqByw+fHjigBbxEgLKBbQqg2egIADA0lEkBAAbzDmMAN7UACGgB5w4ywF0K0D8CEAAACHFYwFBsYHjMUe1QxyJUAIBg10m2AQbYoQC2aAAGH8RupT/wOSVUV5sHtBPATTMAo+/GPZh/NxQDwJfUzmqYyoB/lNlNSJNxAMdxegNDCOpWHaLzeu7bYNkGo0OHucs67unYG0kdFq2gscBlURutZKmM0mo5d+iFoBcqKqEoX9JKplJkwlIDsQiTLv1+//+z/X3Sx2f7KTKC+H72/z/ZYet31u/ebQBO91gBggoAwbIPAQXIy/7jxwC4KKgGcFBcgQIcXwx48B/A4rcxBYcGBj58eIvzR//xxGuviwISfPUrA/bsk4CmMuDa1Y5+ATghAHpXTAEs72AAQ/+e6F+/Pvrahfnk6vesANhVf1ACzgLQsywgYQVQd7B3YODhw4fPnn26eXME+etTaadDg6A6wMF9AIinsALI9l8UgP1mAB+CJf8lQ4C4yH9Cnv22hZIZsM4WYNzB+SWAjwQEFMD0EFAAAuvMfxnh229ra/uddq5yaBTUAuAdNH0XD+G5bH9/BRAWgLsKoO6AgqeYOT/1Ox1176gJYNxBU6HryV/+K+zJZgG4bABiesgCAAHyb968+fz5y8jQEPLYRJR9AcBsAbslICAFpxPnOzrOFbIYAScA+BmsAChQv415CZX80NBQXx/zU6Npf9RjADgCfDYACASAgkIsVujBbswagH6cQOO3JYCTELzEmO+V+c7Ots4fHrx9j9u9Qz4DcjYAX+UIdCEQ60l8HecdjM/qMT1MwJ0j6g6E4CX3qre39927d319ndzEQtoT9aCPA6gaUOfziiOQAhCaurjCpY4r4+PjswVdD4e9BFQeAghAGB4efvUKfeZfvGB+7lc6gzz76gBsAXvqXF5eQigQDB7GNYCQEOvSs3gcdD0WDocjZUBFsCj/wsiPZnj67PMCqgVsAKB8BIKg4xRiWAJfBwJBnH84GHR+S/EhMACnMOafP3/+/j3yt7G5H2M8ffaNC6gB0NCgBGEQuJhAJGK4gGAFAAGGfMvg4KDIP0Kem15I+1Ve9hWgzgbgavAKQQgCEDi9PB5AIOCc7D52l78LuZaWlnL+kczPi8u36BPgsgNQsI8CDAQgOOZFPwRASjwFXHMz+6g/unXrdj6fnytm0vG4n3n2xf3XBNAEwNvIMwiFSOCkAS/QD0XCudQxCs40NzffuXP0wgWRv5XH/oyl/chjzJf7CoBXKwJ8dZqzAQISGoVAGYJGvzEyluym4Chnyk9PMr+kz6HNepUAKQCBxxDgZD0AEv7Y39rdnQLhApdKpZhvz+fnf2UycQ/y6vjZV6sOoDmdvAUxIeBoMPpYaSaXA0GuG/l2bL7ox+Wrt6/6tQOMQ+DYo0GOfdxA6X4ySQKXy+XaOV4+87Z9e4AGgCLAwOEk6GA/EomOtSZJ4GQel59B3uLt1w5gn4soAhH84UU/UiomSTDWPi0u36pfO4ACSTCfA/PoO6PRaGkm2SoGR2vRn8HlY8zb9QnYtDJAnYFURCJlgxd9CfD4/xiA6aK8fPPbl/3aAdsUwHQKEYlgv8EJgDvuyUwWZ2ZmipP+DPI19Amw/sxom2utZsxMiNCAH3gpAO54vJThTHm7vj1gOwCyruFLCdScWHTVDrfbE5fzm98++2YAXzvEC37hu07bZv3RrUtzcIibtjjPEyAAQ1nmzX3OiC+3tdp2K8CaLeW/omn/CfhtzMETEAJTXvVtpjk2WwK21muLCAphmmMVABTI1d5fa/nx/eqN/9o3oxUHYSCKbjRCnwR9ELYVioioncwH7P//2M7dqWSLmybawr54DGmZktzxmkoeJrcH25bV+DsVJiSADFbycX2ddK7yYAnH+GX/GuJBftAHXj1dH0tgaLNgEUstCUTA/WsGHqf6iQkUIhQs42GmGEblduqTJf0TBBcBJVkAvLrqp2XAfZU9KeUqUp6BcSsS1fEEpjx7VsyWoC9trU9pDhhyKGYLkuWTWHCfygCVRMNoFVp5cJfXRstXH7nHBMsjyvmeWXBS5TDIZcnBuIdgbCSy8waE9gR80vmC1yIHHoLSIteJ61hdbdaObKMOeOlNDvy8hPJoWe+NbcwB59YOuKgDlvpLTB/rsOnZOsFIM+jR9ANR7RYx/XUJ6QhE/ABdKNJbOp3xABIygAduH2QCQbLcJ+kjg2pk8cu9E2t4uOTJ5fVtadnAhfcgd8OmRnl/IpJpMzkmY60xL2rLHCLvxvPGIxayP5tmw0SS/gvg3cOmn84Z9DcfcumKYbaOFpjRgO89uullBNEpzs5D0VW5yu845tNWzWd3Lcu6LjZS12V57T6bqtW7+beDTpjj5aNe2U4w9uPg4ODgIMI32++Q0g6QJOYAAAAASUVORK5CYII=");function Kd(r){const e={bin:"/opt/homebrew/bin/mpv",url:r.url.url,userAgent:navigator.userAgent};return `shortcuts://run-shortcut?name=115MasterWebLink&input=text&text=${encodeURIComponent(JSON.stringify(e))}`}function yl(r){var e,t;return `iina://weblink?url=${encodeURIComponent(r.url.url)}&mpv_http-header-fields=${encodeURIComponent(`User-Agent: ${navigator.userAgent.replace(",","\\,")},Cookie: ${(e=r.url.auth_cookie)==null?undefined:e.name}=${(t=r.url.auth_cookie)==null?undefined:t.value}`)}`}class xl extends Te{get buttonConfig(){return [{class:"115-player",title:"使用【115官方播放器】",text:"5️⃣ 官方播放",visible:this.itemInfo.attributes.iv===fe.Yes,click:()=>{Et(new URL(`/?pickcode=${this.itemInfo.attributes.pick_code}&share_id=0`,hr).href,{active:true});}},...ri?[{class:"iina-player",title:"使用【iina】",text:"IINA",icon:wl,visible:this.itemInfo.attributes.iv===fe.Yes,click:async()=>{try{const e=await St.getFileDownloadUrl(this.itemInfo.attributes.pick_code);open(yl(e));}catch{alert("打开iina失败");}}}]:[],{class:"master-player",title:"使用【Master播放器】",text:"▶️ Master 播放",visible:this.itemInfo.attributes.iv===fe.Yes,click:()=>{mr({pickCode:this.itemInfo.attributes.pick_code,cid:this.itemInfo.attributes.cid},true);}}]}get fileOprNode(){return this.itemNode.querySelector(".file-opr")??this.itemNode.querySelector(".file-opt")}onLoad(){this.itemInfo.fileListType!==ge.grid&&this.createButtons();}onDestroy(){}createButtons(){this.buttonConfig.forEach(e=>{var n;if(!e.visible)return;const t=this.createNormalItemButtonElement(e);(n=this.fileOprNode)==null||n.prepend(t),t.addEventListener("mousedown",async o=>{o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),e.click();});});}createNormalItemButtonElement(e){const t=document.createElement("a");if(t.href="javascript:void(0)",t.className=e.class,t.title=e.title,t.style.cssText=`
      pointer-events: all;
      position: relative;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 4px;
    `,e.icon){const o=document.createElement("img");o.src=e.icon,o.style.cssText="width: 16px; height: 16px;",t.prepend(o);}const n=document.createElement("span");return n.textContent=e.text,n.style.pointerEvents="none",t.appendChild(n),t}}const kl=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),_l=function(r){return "/"+r},Kr={},fo=exports("f", function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?undefined:i.nonce)||(i==null?undefined:i.getAttribute("nonce"));o=Promise.allSettled(t.map(l=>{if(l=_l(l),l in Kr)return;Kr[l]=true;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":kl,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)));})}));}function a(i){const s=new Event("vite:preloadError",{cancelable:true});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return o.then(i=>{for(const s of i||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})});function Xr(r){return new Promise(e=>setTimeout(e,r))}var Ie;(function(r){r.ERROR="ERROR",r.INFO="INFO",r.DATA="DATA",r.DEMUX_DATA="DEMUX_DATA",r.DONE="DONE";})(Ie||(Ie={}));var Ee=Object.create||Bl,Al=Object.keys||zl,El=Function.prototype.bind||$l;let Bt=10;const kt=class kt{constructor(){A(this,"_maxListeners");A(this,"_eventsCount");A(this,"_events");(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=Ee(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined;}static listenerCount(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Rl.call(e,t)}emit(e,...t){var n,o,a,i,s,l,c=e==="error";if(l=this._events,l)c=c&&l.error==null;else if(!c)return  false;if(c){if(arguments.length>1&&(n=arguments[1]),n instanceof Error)throw n;var u=new Error('Unhandled "error" event. ('+n+")");throw u.context=n,u}if(o=l[e],!o)return  false;var d=typeof o=="function";switch(a=arguments.length,a){case 1:Sl(o,d,this);break;case 2:Il(o,d,this,arguments[1]);break;case 3:Pl(o,d,this,arguments[1],arguments[2]);break;case 4:Tl(o,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(a-1),s=1;s<a;s++)i[s-1]=arguments[s];Ll(o,d,this,i);}return  true}on(e,t){return Ol(this,e,t)}once(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,Dl(this,e,t)),this}off(e,t){return Ml.call(this,e,t)}removeAllListeners(e){var t,n,o;if(n=this._events,!n)return this;if(!n.off)return arguments.length===0?(this._events=Ee(null),this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=Ee(null):delete n[e]),this;if(arguments.length===0){var a=Al(n),i;for(o=0;o<a.length;++o)i=a[o],i!=="off"&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=Ee(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.off(e,t);else if(t)for(o=t.length-1;o>=0;o--)this.off(e,t[o]);return this}listeners(e){return Zr(this,e,true)}rawListeners(e){return Zr(this,e,false)}listenerCount(){return kt.listenerCount.apply(this,arguments)}};A(kt,"defaultMaxListeners");let ce=kt,Zt;try{var Jr={};Object.defineProperty&&Object.defineProperty(Jr,"x",{value:0}),Zt=Jr.x===0;}catch{Zt=false;}Zt?Object.defineProperty(ce,"defaultMaxListeners",{enumerable:true,get:function(){return Bt},set:function(r){if(typeof r!="number"||r<0||r!==r)throw new TypeError('"defaultMaxListeners" must be a positive number');Bt=r;}}):ce.defaultMaxListeners=Bt;function Cl(r){return r._maxListeners===undefined?ce.defaultMaxListeners:r._maxListeners}function Sl(r,e,t){if(e)r.call(t);else for(var n=r.length,o=Le(r,n),a=0;a<n;++a)try{o[a].call(t);}catch(i){console.error(i);}}function Il(r,e,t,n){if(e)r.call(t,n);else for(var o=r.length,a=Le(r,o),i=0;i<o;++i)try{a[i].call(t,n);}catch(s){console.error(s);}}function Pl(r,e,t,n,o){if(e)r.call(t,n,o);else for(var a=r.length,i=Le(r,a),s=0;s<a;++s)try{i[s].call(t,n,o);}catch(l){console.error(l);}}function Tl(r,e,t,n,o,a){if(e)r.call(t,n,o,a);else for(var i=r.length,s=Le(r,i),l=0;l<i;++l)try{s[l].call(t,n,o,a);}catch(c){console.error(c);}}function Ll(r,e,t,n){if(e)r.apply(t,n);else for(var o=r.length,a=Le(r,o),i=0;i<o;++i)try{a[i].apply(t,n);}catch(s){console.error(s);}}function Ol(r,e,t){var n,o,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(o=r._events,o?(o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]):(o=r._events=Ee(null),r._eventsCount=0),!a)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=[a,t]:a.push(t),!a.warned&&(n=Cl(r),n&&n>0&&a.length>n)){a.warned=true;class i extends Error{constructor(){super(...arguments);A(this,"emitter");A(this,"type");A(this,"count");}}let s=new i("Possible Dispatcher memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=r,s.type=e,s.count=a.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",s.name,s.message);}return r}function Ml(r,e){var t,n,o,a,i;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(t=n[r],!t)return this;if(t===e||t.listener===e)--this._eventsCount===0?this._events=Ee(null):(delete n[r],n.off&&this.emit("off",r,t.listener||e));else if(typeof t!="function"){for(o=-1,a=t.length-1;a>=0;a--)if(t[a]===e||t[a].listener===e){i=t[a].listener,o=a;break}if(o<0)return this;o===0?t.shift():jl(t,o),t.length===1&&(n[r]=t[0]),n.off&&this.emit("off",r,i||e);}return this}function Nl(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=true,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var r=new Array(arguments.length),e=0;e<r.length;++e)r[e]=arguments[e];this.listener.apply(this.target,r);}}function Dl(r,e,t){var n={fired:false,wrapFn:undefined,target:r,type:e,listener:t},o=El.call(Nl,n);return o.listener=t,n.wrapFn=o,o}function Zr(r,e,t){var n=r._events;if(!n)return [];var o=n[e];return o?typeof o=="function"?t?[o.listener||o]:[o]:t?Ul(o):Le(o,o.length):[]}function Rl(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}function jl(r,e){for(var t=e,n=t+1,o=r.length;n<o;t+=1,n+=1)r[t]=r[n];r.pop();}function Le(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function Ul(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Bl(r){var e=function(){};return e.prototype=r,new e}function zl(r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e);return e}function $l(r){var e=this;return function(){return e.apply(r,arguments)}}class Fl extends ce{}var mo=Object.prototype.toString;function bo(r){return !!r&&typeof r=="object"}function er(r){return typeof r=="number"&&!isNaN(r)}function en(r){return bo(r)&&mo.call(r).toLowerCase()==="[object arraybuffer]"}function Hl(r){return bo(r)&&mo.call(r).toLowerCase()==="[object uint8array]"}class Ze{constructor(){A(this,"byteLength_");A(this,"list_",[]);}get byteLength(){if(!er(this.byteLength_)){let e=0;for(let t=0,n;t<this.list_.length;t++)n=this.list_[t],e+=n.byteLength;this.byteLength_=e;}return this.byteLength_}get bytes(){const{bufferList:e}=this;let t=null;return e.length>0&&(e.length===0?t=e[0]:t=this.toNewBytes()),t}get empty(){return this.list_.length===0}get bufferList(){return this.list_}clear(){let e=this.list_.length;e>0&&this.list_.splice(0,e),this.byteLength_=null;}toNewBytes(){let e=null,t=0,n=50;for(;e===null;)try{t++,e=new Uint8Array(this.byteLength);}catch(o){if(t>n)throw o}for(let o=0,a=0;o<this.list_.length;o++){let i=this.list_[o];e.set(i,a),a+=i.byteLength;}return e}append(e){e instanceof Ze?this.list_=this.list_.concat(e.bufferList):this.list_.push(e),this.byteLength_=null;}cut(e,t=true){let n=null;if(e>0&&!this.empty){let o=this.list_,a=0,i=0;for(;o.length>0;){let s=o.shift();if(i===0)if(s.byteLength>=e){t&&(n=s.subarray(0,e)),s.byteLength>e&&(s=s.subarray(e),o.unshift(s));break}else {if(t){try{n=new Uint8Array(e);}catch(l){throw `alloc_memory_error@ cache buffer: ${e} ${l.message}`}n.set(s,0);}a+=s.byteLength;}else {let l=e-a;if(s.byteLength>=l){t&&n.set(s.subarray(0,l),a),s=s.subarray(l),s.byteLength>0&&o.unshift(s);break}else {t&&n.set(s,a),a+=s.byteLength;break}}i++;}this.byteLength_=null;}return n}}class ql{constructor(){A(this,"map_");this.map_={};}push(e,t){Object.prototype.hasOwnProperty.call(this.map_,e)?this.map_[e].push(t):this.map_[e]=[t];}get(e){let t=this.map_[e];return t?t.slice():null}getAll(){let e=[];for(let t in this.map_)e.push.apply(e,this.map_[t]);return e}remove(e,t){let n=this.map_[e];if(n)for(let o=0;o<n.length;++o)n[o]==t&&(n.splice(o,1),--o);}clear(){this.map_={};}forEach(e){for(let t in this.map_)e(t,this.map_[t]);}}class Vl{constructor(e,t,n){A(this,"target");A(this,"type");A(this,"listener");this.target=e,this.type=t,this.listener=n,this.target.addEventListener?this.target.addEventListener(t,n,false):this.target.on&&this.target.on(t,n,false);}off(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,false):this.target.off&&this.target.off(this.type,this.listener,false),this.target=null,this.listener=null;}}class Gl{constructor(){A(this,"bindingMap_");this.bindingMap_=new ql;}destroy(){this.removeAll(),this.bindingMap_=null;}on(e,t,n){if(!this.bindingMap_)return;let o=new Vl(e,t,n);return this.bindingMap_.push(t,o),this}once(e,t,n){this.on(e,t,(function(o){this.off(e,t),n(o);}).bind(this));}off(e,t){if(!this.bindingMap_)return;let n=this.bindingMap_.get(t)||[];for(let o=0;o<n.length;++o){let a=n[o];a.target==e&&(a.off(),this.bindingMap_.remove(t,a));}}removeAll(){if(!this.bindingMap_)return;let e=this.bindingMap_.getAll();for(let t=0;t<e.length;++t)e[t].off();this.bindingMap_.clear();}}let tr;typeof window>"u"?tr=self:tr=window;var Ql=tr;let oe=Ql.console;const it=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof importScripts<"u",Re=">>>";class Yl extends ce{constructor(){super();A(this,"MSG_NAME");A(this,"_enable");this._enable=false;}get enable(){return this._enable}set enable(t){this._enable=t,this.MSG_NAME="__log__";}log(...t){it?te.emit(this.MSG_NAME,"log",[...t].join("")):this._enable&&oe.log.call(oe,Re,...t);}debug(...t){it?te.emit(this.MSG_NAME,"debug",[...t].join("")):this._enable&&oe.debug&&oe.debug.call(oe,Re,...t);}assert(...t){if(this._enable&&oe.assert){let n=t[0],o=Array.prototype.slice.call(t,1);o.unshift(Re),oe.assert.call(oe,n,...o);}}warn(...t){it?te.emit(this.MSG_NAME,"warn",[...t].join("")):this._enable&&oe.warn.call(oe,Re,...t);}error(...t){it?te.emit(this.MSG_NAME,"error",[...t].join("")):this._enable&&oe.error.call(oe,Re,...t);}}let te=new Yl;class Oe extends ce{constructor(){super();}pipe(e){return this.on("reset",function(){e.reset();}),this.on("data",function(t){e.push(t);}),this.on("done",function(t){e.flush(t);}),e}unpipe(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}push(e,t){this.emit("data",e);}flush(e){this.emit("done",e);}reset(){this.emit("reset");}}class Wl extends Oe{constructor(t={}){super();A(this,"eventManager_");A(this,"ctx_");A(this,"options_");A(this,"cache_buffer_");t.debug&&(te.enable=true),this.ctx_=new Fl,this.options_=t,this.cache_buffer_=new Ze;}listenEndStream_(){this.eventManager_=new Gl,this.eventManager_.on(this.endStream,"data",t=>{this.emit(Ie.DEMUX_DATA,t);}).on(this.endStream,"done",t=>{this.emit(Ie.DONE,t);}).on(this.ctx_,"error",t=>{this.emit(Ie.ERROR,t);});}constraintPushData_(t){let n=null;return !en(t)&&!Hl(t)?(te.error(`Data pushed is not an ArrayBuffer or Uint8Array: ${t}`),n):(en(t)?n=new Uint8Array(t):n=t,n)}reset(){}destroy(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll();}}var rr;(function(r){r[r.WORKER_EXCEPTION=0]="WORKER_EXCEPTION",r[r.WORKER_MSG_EXCEPTION=1]="WORKER_MSG_EXCEPTION",r[r.TS_SYNC_BYTE=2]="TS_SYNC_BYTE",r[r.FLV_HEAD_SIGNATURE=3]="FLV_HEAD_SIGNATURE",r[r.FLV_NOT_EXPECTED_ADJACENT_DATA=4]="FLV_NOT_EXPECTED_ADJACENT_DATA";})(rr||(rr={}));var Kl=rr;class Xl{constructor(e){A(this,"pmtTable");let t=(e[1]&15)<<8|e[2];var n=0,o,a=t-4-5;for(this.pmtTable=[];n<a;n+=4)if(o=e[n+8]<<8|e[n+9],o==0){let i=(e[10+n]&31)<<8|e[11+n];te.log("packet->network_PID %0x /n/n",i);}else this.pmtTable.push({programNum:o,program_map_PID:(e[10+n]&31)<<8|e[11+n]});}}class Jl{constructor(e){A(this,"pes_table");let t=(e[1]&15)<<8|e[2];const n=(e[10]&15)<<8|e[11];if(n<0)return;if(n>2){let l=0;for(;l<n;){let c=e[13+l];l+=c;}}var o=12+n,a=t-n-9-4,i=o+a;if(o>=i){te.warn(`es_section_pos < es_section_end ${o}, ${i}`);return}this.pes_table=[];let s=0;for(;s<a;){let l=o+s,c=e[l],u=(e[l+1]<<8|e[l+2])&8191,d=(e[l+3]<<8|e[l+4])&4095;this.pes_table.push({streamType:c,PID:u}),s+=d+5;}}}const Zl=0,ec=1,tc=2,rc=17;class nc{constructor(){A(this,"pat_table");A(this,"pes_streams");this.pat_table=[],this.pes_streams=[];}get currentProgramPID(){let e=[];for(let t=0;t<this.pat_table.length;t++)e.push(this.pat_table[t].pid);return e.length>0?e[0]:-1}get tracks(){return this.pes_streams}reset(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length);}parse(e){const t=this;Zl===e.PID?this._parsePat(e):ec===e.PID||tc===e.PID||3<=e.PID&&e.PID<=15||rc===e.PID||e.PID===t.currentProgramPID&&this._parsePmt(e);}findTrack(e){let t=null,n=this.pes_streams;for(let o=0;o<n.length;o++)if(n[o].id===e){t=n[o];break}return t}_parsePat(e){let t;if(e.payload_unit_start_indicator){let a=e.payload[0];t=e.payload.subarray(a+1);}else t=e.payload;let n=new Xl(t);for(var o=0;o<n.pmtTable.length;o++)this._add_pid_to_pmt(n.pmtTable[o].programNum,n.pmtTable[o].program_map_PID);return n}_add_pid_to_pmt(e,t){let n=this.pat_table;function o(i){for(let s=0,l;s<n.length;s++)if(l=n[s],l.id===i)return {idx:s,item:l};return null}o(e)||n.push({id:e,pid:t});}_parsePmt(e){let t;if(e.payload_unit_start_indicator){let a=e.payload[0];t=e.payload.subarray(a+1);}else t=e.payload;let n=new Jl(t);for(var o=0;o<n.pes_table.length;o++)this._add_pes_stream(n.pes_table[o]);return n}_add_pes_stream(e){let t=this.pes_streams;function n(a){for(let i=0,s;i<t.length;i++)if(s=t[i],s.id===a)return {idx:i,item:s};return null}n(e.PID)||t.push({id:e.PID,stream_type:e.streamType,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0});}}class oc extends Oe{constructor(e,t){super(),this.context=e,this.PSI=t,this.videoTrack=null,this.audioTrack=null,this.captionTrack=null;}push(e){let t=e;for(let n=0,o;n<t.length;n++)switch(o=t[n],o.type){case "video":this._complexVideo(o);break;case "audio":this._complexAudio(o);break;case "caption":this._complexCaption(o);break}}flush(){this.emit("done"),this._clearStream();}reset(){this._clearStream();}_clearStream(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null;}_complexVideo(e){let t=this.PSI.findTrack(e.trackId);t&&(t.type="video",t.gops=e,t.firstDTS=e[0][0].dts,t.firstPTS=e[0][0].pts,t.duration=Number.POSITIVE_INFINITY,this.videoTrack=t,this.emit("data",{videoTrack:this.videoTrack}));}_complexAudio(e){let t=this.PSI.findTrack(e.trackId);t&&(t.type="audio",t.frames=e,t.firstPTS=t.firstDTS=e[0].dts,t.duration=Number.POSITIVE_INFINITY,this.audioTrack=t,this.emit("data",{audioTrack:this.audioTrack}));}_complexCaption(){}}const Lt={mac:false,iphone:false,android:false},ie={version:false,CHROME:false,SAFARI:false,FIREFOX:false,IE11:false,IE:false,EDGE:false,WECHAT:false};let ac=navigator,z=ac.userAgent.toLowerCase();var we=/(edge)\/([\w.]+)/.exec(z)||/(opr)[/]([\w.]+)/.exec(z)||/(chrome)[ /]([\w.]+)/.exec(z)||/(firefox)[ /]([\w.]+)/.exec(z)||/(iemobile)[/]([\w.]+)/.exec(z)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(z)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(z)||/(webkit)[ /]([\w.]+)/.exec(z)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(z)||/(msie) ([\w.]+)/.exec(z)||z.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(z)||z.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(z)||[],ic=/(ipad)/.exec(z)||/(ipod)/.exec(z)||/(windows phone)/.exec(z)||/(iphone)/.exec(z)||/(kindle)/.exec(z)||/(silk)/.exec(z)||/(android)/.exec(z)||/(win)/.exec(z)||/(mac)/.exec(z)||/(linux)/.exec(z)||/(cros)/.exec(z)||/(playbook)/.exec(z)||/(bb)/.exec(z)||/(blackberry)/.exec(z)||[],le={version:undefined},he={browser:we[5]||we[3]||we[1]||"",version:we[2]||we[4]||"0",versionNumber:we[4]||we[2]||"0",platform:ic[0]||""};if(he.browser){le[he.browser]=true;let r=he.versionNumber.split(".");le.version={major:parseInt(he.versionNumber,10),string:he.version},r.length>1&&(le.version.minor=parseInt(r[1],10)),r.length>2&&(le.version.build=parseInt(r[2],10));}ie.version=le.version;ie.CHROME=!!le.chrome;ie.SAFARI=!!le.safari&&!ie.CHROME;ie.FIREFOX=!!le.firefox;ie.IE11=/rv:11/.test(z);ie.IE=!!le.msie||ie.IE11;ie.EDGE=!!le.edge;ie.WECHAT=/(wechat)|(micromessenger)/.test(z);Lt.mac=!!he.platform.mac;Lt.iphone=!!he.platform.iphone;Lt.android=!!he.platform.android;var tn={browser:ie,os:Lt};const rn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var sc=(r,e,t)=>{let n,o=r,a;if(e>rn.length-1){te.error(`invalid sampling index:${e}`);return}return tn.browser.FIREFOX?e>=6?(r=5,a=new Array(4),n=e-3):(r=2,a=new Array(2),n=e):tn.os.android?(r=2,a=new Array(2),n=e):(r=5,a=new Array(4),e>=6?n=e-3:(t===1&&(r=2,a=new Array(2)),n=e)),a[0]=r<<3,a[0]|=(e&14)>>1,a[1]|=(e&1)<<7,a[1]|=t<<3,r===5&&(a[1]|=(n&14)>>1,a[2]=(n&1)<<7,a[2]|=8,a[3]=0),{config:a,sampleRate:rn[e],channelCount:t,codec:"mp4a.40."+r,realCodec:"mp4a.40."+o}};const nn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class lc extends ce{constructor(){super();}push(e){let{pts:t,dts:n,payload:o}=e,a=o,i=0,s=0,l,c,u,d,p;for(;i+5<a.length;){if(a[i]!==255||(a[i+1]&246)!==240){i++;continue}if(c=(~a[i+1]&1)*2,l=(a[i+3]&3)<<11|a[i+4]<<3|(a[i+5]&224)>>5,d=((a[i+6]&3)+1)*1024,p=d*9e4/nn[(a[i+2]&60)>>>2],u=i+l,a.byteLength<u)return;let h={pts:t+s*p,dts:n+s*p,sampleCount:d,audioObjectType:(a[i+2]>>>6&3)+1,channelCount:(a[i+2]&1)<<2|(a[i+3]&192)>>>6,sampleRate:nn[(a[i+2]&60)>>>2],samplingFrequencyIndex:(a[i+2]&60)>>>2,sampleSize:16,data:a.subarray(i+7+c,u)};if(this.emit("frame",h),a.byteLength===u){a=undefined,this.emit("done");return}s++,a=a.subarray(u);}}}class cc extends Oe{constructor(t){super();A(this,"PSI");A(this,"trackId");A(this,"codec");A(this,"frames");this.PSI=t,this.trackId=null,this.codec=new lc,this.codec.on("frame",n=>{this.frames.push(n),this.frames.byteLength+=n.data.byteLength,this.frames.trackId=this.trackId;}),this._newFrames();}push(t){t.stream_type===15&&(this.trackId=t.pid,this.codec.push({dts:t.pes.DTS,pts:t.pes.PTS,payload:t.pes.data_byte}));}flush(){if(this.frames.length>0){let t=this.frames.length,n=this.frames[0],o=this.frames[t-1],a=o.sampleRate*o.sampleCount/9e4;this.frames.firstDTS=n.dts,this.frames.firstPTS=n.pts,t===1?this.frames.duration=a:this.frames.duration=a+(o.pts-n.pts),this._updateTrackMeta(n),this.emit("data",this.frames),this.reset(),this.emit("done");}}reset(){this.trackId=null,this._newFrames();}_newFrames(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0;}_updateTrackMeta(t){let n=this.PSI.findTrack(this.trackId),o=sc(t.audioObjectType,t.samplingFrequencyIndex,t.channelCount);n.config=o.config,n.sampleRate=o.sampleRate,n.inputTimeScale=n.inputTimeScale||n.timescale,n.timescale=o.sampleRate,n.channelCount=o.channelCount,n.codec=o.codec,n.realCodec=o.realCodec,n.isAAC=true;}}function zt(r){let e=0;return ArrayBuffer.isView(r)&&(e=r.byteOffset,r=r.buffer),new DataView(r,e)}class uc{constructor(){}readUint8(e,t){return zt(e).getUint8(t)}readUint16(e,t,n=false){return zt(e).getUint16(t,n)}readUint32(e,t,n=false){return zt(e).getUint32(t,n)}}function dc(r){let e=r.byteLength,t=[],n=1,o,a=new Uint8Array(0);for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;o=e-t.length;try{a=new Uint8Array(o);}catch{throw `epsb alloc mem error ${o}`}let i=0;for(n=0;n<o;i++,n++)i===t[0]&&(i++,t.shift()),a[n]=r[i];return a}function go(r,e=0,t=1){let n=0,o=0,a=0,i="",s=0;for(let l=e;l<e+t;l++)n=Math.floor(l/8),o=7-l%8,s=r[n]>>o&1,i+=s;return a=parseInt(i,2),a}function pc(r,e=0){return go(r,e,8)}function vo(r,e=0){let t=[],n=r.byteLength*8,o=false,a=0,i=0,s=0,l="";for(let u=e;u<n;u++)if(a=Math.floor(u/8),i=7-u%8,s=r[a]>>i&1,!o)if(s===0)t.push(0);else {o=true,e=u;break}let c=t.length+1;for(let u=e;u<e+c;u++)a=Math.floor(u/8),i=7-u%8,s=r[a]>>i&1,l+=s;return {bitLength:t.length+c,value:parseInt(l,2)-1}}function hc(r,e=0){let t=vo(r,e),n=t.value,o=Math.pow(-1,n+1)*Math.ceil(n/2);return {bitLength:t.bitLength,value:o}}var P={readUEV:vo,readSEV:hc,readBit:go,readByte:pc};let k=0;function on(r,e){let t=8,n=8,o;for(var a=0;a<e;a++)n!=0&&(o=P.readUEV(r,k),k+=o.bitLength,n=(t+o.value+256)%256),t=r[a];}function fc(r){k=0;let e=r[0],t=r[1],n=r[2],o=r.subarray(3),a=0,i,s,l,c,u=[1,1],d=1,p,h=0,m,v,f=true,g=P.readUEV(o,k);if(k+=g.bitLength,e==100||e==110||e==122||e==244||e==44||e==83||e==86||e==118||e==128){let q=P.readUEV(o,k);k+=q.bitLength,q.value==3&&(k+=1);let ee=P.readUEV(o,k);k+=ee.bitLength;let G=P.readUEV(o,k);if(k+=G.bitLength,k+=1,a=P.readBit(o,k),k+=1,a)for(let Q=0;Q<(q.value!=3?8:12);Q++){let ue=P.readBit(o,k);k+=1,ue&&(Q<6?on(o,16):on(o,64));}}let w=P.readUEV(o,k);k+=w.bitLength;let _=P.readUEV(o,k),E=_.value;if(k+=_.bitLength,E===0)i=P.readUEV(o,k),k+=i.bitLength;else if(E===1){k+=1,s=P.readSEV(o,k),k+=s.bitLength,l=P.readSEV(o,k),k+=l.bitLength,c=P.readUEV(o,k),k+=c.bitLength;for(let q=0,ee;q<c.value;q++)ee=P.readSEV(o,k),k+=ee.bitLength;}let j=P.readUEV(o,k);k+=j.bitLength,k+=1;let y=P.readUEV(o,k);k+=y.bitLength;let b=P.readUEV(o,k);k+=b.bitLength;let x=P.readBit(o,k);k+=1,x||(k+=1),k+=1;let I=P.readBit(o,k);k+=1;let T=0,S=0,N=0,O=0;if(I){let q=P.readUEV(o,k);k+=q.bitLength,T=q.value;let ee=P.readUEV(o,k);k+=ee.bitLength,S=ee.value;let G=P.readUEV(o,k);k+=G.bitLength,N=G.value;let Q=P.readUEV(o,k);k+=Q.bitLength,O=Q.value;}let $=P.readBit(o,k);if(k+=1,$){let q=P.readBit(o,k);if(k+=1,q){const de=P.readByte(o,k);switch(k+=8,de){case 1:u=[1,1];break;case 2:u=[12,11];break;case 3:u=[10,11];break;case 4:u=[16,11];break;case 5:u=[40,33];break;case 6:u=[24,11];break;case 7:u=[20,11];break;case 8:u=[32,11];break;case 9:u=[80,33];break;case 10:u=[18,11];break;case 11:u=[15,11];break;case 12:u=[64,33];break;case 13:u=[160,99];break;case 14:u=[4,3];break;case 15:u=[3,2];break;case 16:u=[2,1];break;case 255:{let Y=P.readByte(o,k);k+=8;let $o=P.readByte(o,k);k+=8;let Fo=P.readByte(o,k);k+=8;let Ho=P.readByte(o,k);k+=8,u=[Y<<8|$o,Fo<<8|Ho];break}}u&&(d=u[0]/u[1]),de===255&&(k+=16,k+=16);}let ee=P.readBit(o,k);k+=1,ee&&(k+=1);let G=P.readBit(o,k);if(k+=1,G){p=P.readBit(o,k,3),k+=3,k+=1;let de=P.readBit(o,k);k+=1,de&&(k+=24);}let Q=P.readBit(o,k);if(k+=1,Q){let de=P.readUEV(o,k);k+=de.bitLength;let Y=P.readUEV(o,k);k+=Y.bitLength;}let ue=P.readBit(o,k);k+=1,ue&&(m=P.readBit(o,k,32),k+=32,v=P.readBit(o,k,32),k+=32,f=!!P.readBit(o,k),k+=1,h=v/(m*2));}return {payload:o,profile_idc:e,profile_compatibility:t,level_idc:n,sps_id:g.value,log2_max_frame_num_minus4:_.value,pic_order_cnt_type:E,log2_max_pic_order_cnt_lsb_minus4:i?i.value:0,width:Math.ceil(((y.value+1)*16-T*2-S*2)*d),height:(2-x)*(b.value+1)*16-N*2-O*2,pixelRatio:u,video_format:p,fps:h,fixedFPS:f}}function mc(r){let e=0,t=r,n=[],o,a,i=0,s=P.readUEV(t,e);e+=s.bitLength;let l=P.readUEV(t,e);e+=l.bitLength,e+=1,e+=1;let c=P.readUEV(t,e);if(e+=c.bitLength,c.value>0){let v=P.readUEV(t,e);e+=v.bitLength;let f=0,g;switch(v.value){case 0:for(f=0;f<=v.value;f++)g=P.readUEV(t,e),e+=g.bitLength;break;case 2:for(f=0;f<=v.value;f++)g=P.readUEV(t,e),e+=g.bitLength,g=P.readUEV(t,e),e+=g.bitLength;break;case 3:case 4:case 5:e+=1,o=P.readUEV(t,e),e+=o.bitLength;break;case 6:{a=P.readUEV(t,e),e+=a.bitLength;let w=Math.ceil(Math.log2(c.value+1));for(i=0;i<=a.value;i++)n.push(P.readBit(t,e,w)),e+=w;}break}}let u=P.readUEV(t,e);e+=u.bitLength;let d=P.readUEV(t,e);e+=d.bitLength,e+=1,e+=1;let p=P.readSEV(t,e);e+=p.bitLength;let h=P.readSEV(t,e);e+=h.bitLength;let m=P.readSEV(t,e);return e+=m.bitLength,e+=1,e+=1,e+=1,{sliceGroupNum:c.value+1}}function bc(r){return {}}function gc(r){return r[0]>>5}class vc extends uc{constructor(t){super();A(this,"forbidden_zero_bit");A(this,"ref_idc");A(this,"unit_type");A(this,"data");A(this,"rawData");A(this,"sps");A(this,"pps");A(this,"sei");A(this,"primary_pic_type");A(this,"pts");A(this,"dts");switch(this.forbidden_zero_bit=t[0]>>7,this.ref_idc=t[0]>>5&3,this.unit_type=t[0]&31,this.data=dc(t.subarray(1)),this.rawData=t,this.unit_type){case 1:break;case 2:case 3:case 4:break;case 5:break;case 7:this.sps=fc(this.data);break;case 8:this.pps=mc(this.data);break;case 6:this.sei=bc(this.data);break;case 9:this.primary_pic_type=gc(this.data);break}}}class wo extends ce{constructor(){super(...arguments);A(this,"lastState",null);A(this,"lastNALu",null);A(this,"lastNALuState",null);}spitNalu_(t,n,o){let a=new vc(t);a.pts=n,a.dts=o,this.lastNALu=a,this.emit("nalu",a);}push(t){const{lastState:n,lastNALuState:o}=this;let a=0,i=-1,{pts:s,dts:l,payload:c,naluSizeLength:u}=t;if(u){let d=0,p=0,h=0,m=c.length;do{p=0;for(let v=0;v<u;v++)p=p|c[d+v]<<(u-v-1)*8;d+=u,h=d+p,h>m&&(h=m),this.spitNalu_(c.subarray(d,h),s,l),d=h;}while(d<m)}else {let d=c.byteLength-1,p=0;do{if(c[d]===0)p++;else break;d--;}while(d>0);p>=3&&(c=c.subarray(0,d+1));const h=c.length;let m=0;do{let v=c[a++];if(m===0){m=v?0:1;continue}else if(m===1){m=v?0:2;continue}if(!v)m=3;else if(v===1){if(i>=0)this.lastNALuState=m,this.spitNalu_(c.subarray(i,a-1-m),s,l);else {const f=this.lastNALu;if(f){n&&a<=4-n&&o&&(f.rawData=f.rawData.subarray(0,f.rawData.byteLength-n));let g=a-m-1;if(g>0){te.log(`overflow NALU found: ${g}/${s}/${l}`);let w=new Ze;w.append(f.rawData),w.append(c.subarray(0,g));let _=w.toNewBytes();w.clear(),f.rawData=_;}}}a<h&&(i=a,m=0);}else m=0;}while(a<h);i>=0&&m>=0&&(this.lastNALuState=m,this.spitNalu_(c.subarray(i,h),s,l)),this.lastState=m;}this.emit("done");}reset(){this.lastState=null,this.lastNALu=null,this.lastNALuState=null;}}function yo(r){let e=r.profile_idc,t=r.profile_compatibility,n=r.level_idc,o="avc1.",a=[e,t,n];for(let i=0;i<a.length;i++){let s=a[i].toString(16);s.length<2&&(s="0"+s),o+=s;}return {codec:o}}class wc extends Oe{constructor(t){super();A(this,"PSI");A(this,"trackId");A(this,"currentFrame");A(this,"prevFrame");A(this,"codec");A(this,"gop");A(this,"gops");this.PSI=t,this.trackId=null,this.currentFrame=[],this.codec=new wo,this._newGop(),this._newGops(),this.codec.on("nalu",n=>{if(n.unit_type===7){let o=this.PSI.findTrack(this.trackId),a=yo(n.sps);o.codec=a.codec,o.width=n.sps.width,o.height=n.sps.height,o.profileIdc=n.sps.profile_idc,o.profileCompatibility=n.sps.profile_compatibility,o.levelIdc=n.sps.level_idc,o.pixelRatio=n.sps.pixelRatio,o.sps=[n.rawData];}else if(n.unit_type===8){let o=this.PSI.findTrack(this.trackId);o.pps=[n.rawData];}this.emit("nalu",n),this._grouping(n);});}push(t){const{stream_type:n,pes:o,pid:a}=t;if(n===27||n===36){this.trackId=a;let i={pts:o.PTS,dts:o.DTS,payload:o.data_byte};this.codec.push(i);}}flush(){this.currentFrame.length>0&&(this.prevFrame&&(!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this._pushFrameIntoGop(),this.currentFrame=[]),this.gop.length>0&&this._pushGopIntoGroup();}reset(){this.codec.reset(),this.currentFrame=[],this._newGop(),this._newGops();}_grouping(t){t.unit_type===9?(this.currentFrame.length>0&&(this.currentFrame.duration=t.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this._pushGopIntoGroup()),this.currentFrame.keyframe||this.gop.length>0?this._pushFrameIntoGop():te.warn("h264 codec drop frame")),this.emit("frame",this.currentFrame),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=false,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=t.pts/9e4,this.currentFrame.dts=t.dts/9e4):(t.unit_type===5&&(this.currentFrame.keyframe=true),this.currentFrame.byteLength+=t.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(t)),this.currentFrame.duration=t.dts-this.currentFrame.dts;}_newGop(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0;}_pushFrameIntoGop(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount;}_newGops(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0;}_pushGopIntoGroup(){let t=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=t.dts,this.gops.firstPTS=t.pts,this.gops.push(this.gop),this.emit("data",this.gops),this._newGop(),this._newGops(),this.emit("done");}}class yc extends Oe{constructor(t,n,o={}){super();A(this,"context");A(this,"PSI");A(this,"options");A(this,"tracks");A(this,"adtsStream");A(this,"avcStream");A(this,"streams");this.context=t,this.PSI=n,this.options=o,this.tracks=[],this.adtsStream=new cc(n),this.avcStream=new wc(n),this.streams=[this.adtsStream,this.avcStream],o.decodeCodec&&(this.avcStream.on("data",a=>{let i=o.config.stubTime;if(er(i)){let s=(a.firstPTS+a.duration)/9e4;if(s<i){te.warn(`drop avc gop, start/end/stubTime(${a.firstPTS}/${s}/${i})`);return}}this.tracks.push(a),this.emit("data",this.tracks),this.tracks=[],this.adtsStream.flush();}),this.adtsStream.on("data",a=>{let i=o.config.stubTime;if(er(i)){let s=(a.firstPTS+a.duration)/9e4;if(s<i){te.warn(`drop adts, start/end/stubTime(${a.firstPTS}/${s}/${i})`);return}}this.tracks.push(a),this.emit("data",this.tracks),this.tracks=[];}));}push(t){const{options:n,adtsStream:o,avcStream:a}=this;let{stream_type:i}=t;if(n.decodeCodec)switch(i){case 27:case 36:a.push(t);break;case 15:o.push(t);break;default:te.warn(`ts elementary encounter unknown stream type ${i}`);}else this.emit("data",t);}flush(){let{streams:t,tracks:n}=this;for(let o=0;o<this.streams.length;o++)t[o].flush();n.length>0&&this.emit("data",n),this.emit("done"),n.splice(0,n.length);}reset(){this.tracks=[];for(let t=0;t<this.streams.length;t++)this.streams[t].reset();this.emit("reset");}}class xc{constructor(e){A(this,"PTS");A(this,"DTS");A(this,"data_byte");let t=e[7]>>6,n=e[8];this.PTS=0,(t&2)==2&&(this.PTS=this.calcTimestamp_(e,9)),this.DTS=this.PTS,(t&1)==1&&(this.DTS=this.calcTimestamp_(e,14)),this.data_byte=e.subarray(9+n);}calcTimestamp_(e,t){return (e[t]&14)*536870912+(e[t+1]<<22)+(e[t+2]>>1<<15)+(e[t+3]<<7)+(e[t+4]>>1)}}class kc extends Oe{constructor(t,n){super();A(this,"context");A(this,"PSI");A(this,"PID");A(this,"cache_buffer");this.context=t,this.PSI=n,this.PID=null,this.cache_buffer=new Ze;}push(t){const n=this;t.PID>31&&t.PID<8191&&(this.PSI.currentProgramPID==-1?n._pushPacket(t):this.PSI.currentProgramPID!==t.PID&&(t.payload_unit_start_indicator===1&&n._assembleOnePES(),n._pushPacket(t)));}flush(){const t=this;t._assembleOnePES(),t.emit("done");}reset(){this._clearCached(),this.emit("reset");}_clearCached(){this.PID=null,this.cache_buffer.clear();}_pushPacket(t){let n=this.cache_buffer.empty;n&&t.payload_unit_start_indicator===0||(n&&(this.PID=t.PID),this.cache_buffer.append(t.payload));}_assembleOnePES(){const t=this;if(!this.cache_buffer.empty){let n;try{n=this.cache_buffer.toNewBytes();}catch{throw `pes alloc mem err ${this.cache_buffer.byteLength}`}let o=new xc(n),a=this.PSI.findTrack(this.PID);if(a){let i={pid:a.id,stream_type:a.stream_type,pes:o};t.emit("data",i);}t._clearCached();}}}const _c=71;class Ac{constructor(e){A(this,"sync_byte");A(this,"payload_unit_start_indicator");A(this,"PID");A(this,"afc");A(this,"has_payload");A(this,"has_adaptation");A(this,"payload");if(this.sync_byte=e[0],this.payload_unit_start_indicator=e[1]>>6&1,this.PID=(e[1]<<8|e[2])&8191,this.afc=e[3]>>4&3,this.has_payload=this.afc&1,this.has_adaptation=this.afc&2,this.has_payload)if(this.has_adaptation){let t=e[4];this.payload=e.subarray(5+t);}else this.payload=e.subarray(4);}valid(){return this.sync_byte===_c&&this.has_payload===1}}const an=188;class Ec extends Wl{constructor(t={}){super(t);A(this,"psi_");A(this,"pesStream_");A(this,"elementaryStream_");A(this,"complexStream_");this.psi_=new nc,this.pesStream_=new kc(this.ctx_,this.psi_),this.elementaryStream_=new yc(this.ctx_,this.psi_,t),this.complexStream_=new oc(this.ctx_,this.psi_),this.pipe(this.pesStream_),this.pesStream_.pipe(this.elementaryStream_),this.elementaryStream_.pipe(this.complexStream_),super.listenEndStream_();}get endStream(){let t=this.elementaryStream_;return this.options_.decodeCodec&&(t=this.complexStream_),t}push(t,n={}){const{done:o}=n,{options_:a,ctx_:i,cache_buffer_:s,psi_:l}=this;let c=super.constraintPushData_(t),u=s.byteLength,d=null;for(a.config=n,te.log(`hls demux received ${c.byteLength} bytes, cache ${u} bytes. ${o?"chunk done":""}`),s.append(c);s.byteLength>=an;){let p=s.cut(an);if(p){let h=new Ac(p);if(h.valid())l.parse(h),this.emit("data",h);else {let m=`Encounter invalid ts packet, packet_length(${p.length}), cache_length(${this.cache_buffer_.byteLength}), has_payload(${h.has_payload}), data(${p})`;te.error(m),this.reset(),i.emit("error",Kl.TS_SYNC_BYTE,m,{startByte:d,endByte:d+p.byteLength});break}d+=p.byteLength;}}s.empty&&o&&this.emit("done");}reset(){this.cache_buffer_.clear(),this.emit("reset");}}var sn;(function(r){r[r.HEAD=0]="HEAD",r[r.BODY=1]="BODY";})(sn||(sn={}));var ln;(function(r){r[r.SCRIPT_DATA=18]="SCRIPT_DATA",r[r.VIDEO=9]="VIDEO",r[r.AUDIO=8]="AUDIO";})(ln||(ln={}));var cn;(function(r){r[r.G711A=7]="G711A",r[r.G711U=8]="G711U",r[r.AAC=10]="AAC",r[r.OPUS=13]="OPUS";})(cn||(cn={}));var un;(function(r){r[r.MONO=0]="MONO",r[r.STEREO=1]="STEREO";})(un||(un={}));var dn;(function(r){r[r.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",r[r.AAC_RAW=1]="AAC_RAW";})(dn||(dn={}));var pn;(function(r){r[r.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",r[r.RAW=1]="RAW";})(pn||(pn={}));var hn;(function(r){r[r.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",r[r.NALU=1]="NALU",r[r.SEQUENCE_END=2]="SEQUENCE_END";})(hn||(hn={}));const Cc=new wo;Cc.on("nalu",r=>{});var fn;(function(r){r[r.AVC=7]="AVC";})(fn||(fn={}));class Sc{constructor(e){Object.defineProperty(this,"demux",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"firstOnDataTime",{enumerable:true,configurable:true,writable:true,value:0}),Object.defineProperty(this,"_onDecodeChunk",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"_onConfig",{enumerable:true,configurable:true,writable:true,value:undefined}),this.demux=new Ec({debug:false,decodeCodec:true}),this.demux.on(Ie.DONE,this._onDeMuxDataDone.bind(this)),this.demux.elementaryStream_.avcStream.on("frame",this._onDemuxFrame.bind(this)),this._onDecodeChunk=e.onDecodeChunk,this._onConfig=e.onConfig;}push(e,t){if(!this.demux)throw new Error("解复用器未初始化");this.demux.push(new Uint8Array(e),{...t||{}});}destroy(){var e;(e=this.demux)==null||e.destroy(),this.demux=undefined;}_onDemuxFrame(e){const t=this._createFrameData(e);t&&this._sendVideoFrame(e,t);}_createFrameData(e){try{const t=[],n=new Uint8Array([0,0,0,1]);for(let s=0,l=e.length;s<l;s++){const c=e[s];if(!c||!c.rawData||c.rawData.byteLength===0)continue;if(c.unit_type===7){const d=yo(c.sps);this._onConfig({codec:d.codec,width:c.sps.width,height:c.sps.height});}const u=new Uint8Array(n.length+c.rawData.byteLength);u.set(n,0),u.set(new Uint8Array(c.rawData),n.length),t.push(u);}if(t.length===0)return null;const o=t.reduce((s,l)=>s+l.byteLength,0),a=new Uint8Array(o);let i=0;for(const s of t)a.set(s,i),i+=s.byteLength;return a}catch(t){return console.error("创建关键帧数据时出错:",t),null}}_sendVideoFrame(e,t){try{if(!t||t.byteLength===0){console.warn("尝试发送无效帧数据");return}this._onDecodeChunk({avcFrame:e,rawData:t});}catch(n){console.error("发送视频帧时出错:",n);}}_onDeMuxDataDone(){const t=performance.now()-this.firstOnDataTime;console.log(`解复用完成，耗时: ${t} 毫秒`);}}class Ic{async fetchBufferRange(e,t,n){return fetch(e,{method:"GET",headers:{Range:`bytes=${t}-${n}`},priority:"low"})}async streamChunks(e,t,n={}){const o=n.stepChunkSize||385024;let a=0,i=true;try{for(;i;){const s=await this.fetchBufferRange(e,a,a+o-1);if(s.status!==206){i=!1;break}i=await t(await s.arrayBuffer(),a),a+=o;}}catch(s){throw console.error("流式读取数据出错:",s),s}}}class Pc{constructor(){Object.defineProperty(this,"info",{enumerable:true,configurable:true,writable:true,value:undefined}),Object.defineProperty(this,"segmentIndex",{enumerable:true,configurable:true,writable:true,value:0}),Object.defineProperty(this,"segments",{enumerable:true,configurable:true,writable:true,value:[]}),Object.defineProperty(this,"duration",{enumerable:true,configurable:true,writable:true,value:0});}get segment(){return this.segments[this.segmentIndex]}get segmentUrl(){if(!this.info)throw new Error("info is undefined");return new URL(this.segment.uri,this.info.url).href}async open(e){this.info=e,await this.fetchMasterPlaylist();}async read(e){var n;return await(await fetch(this.segments[this.segmentIndex].uri,{headers:{Range:`bytes=${e.start}-${e.end}`},...((n=this.info)==null?undefined:n.fetchOptions)??{}})).arrayBuffer()}async seek(e){if(this.segmentIndex=this.segments.findIndex(t=>t.timestamp<=e&&e<=t.timestamp+t.duration),this.segmentIndex===-1)throw new Error("时间超出范围");return this.segment}destroy(){this.segments=[],this.segmentIndex=0,this.duration=0,this.info=undefined;}async fetchMasterPlaylist(){if(!this.info)throw new Error("info is undefined");const t=await(await fetch(this.info.url,{headers:this.info.headers})).text(),n=new Parser({url:this.info.url});n.push(t),n.end();let o=0;this.segments=n.manifest.segments.map(a=>{var s;const i=o;return o+=a.duration,{...a,duration:a.duration,timestamp:i,url:new URL(a.uri,(s=this.info)==null?undefined:s.url).href}}),this.duration=o;}}const Tc={num:1,den:1e6},Lc={num:1,den:1};function Oc(r,e,t){return r*e.num/e.den*t.den/t.num}const Mc=5e3;class Nc{constructor(e){Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:e}),Object.defineProperty(this,"hlsIo",{enumerable:true,configurable:true,writable:true,value:undefined}),this.hlsIo=new Pc;}destroy(){this.hlsIo.destroy();}async open(){await this.hlsIo.open(this.options);}async seek(e,t=false){const n=Date.now();let o,a=true;const i=await this.hlsIo.seek(e),s=new Ic,l=[],c=new VideoDecoder({output:p=>{const h=this._getFrameRealTime(p.timestamp);if(t&&!o){o=p;return}if(h>=e&&!o){o=p;return}p.close();},error:p=>{console.error(p.message),console.error("解码器错误",this.hlsIo.segmentUrl),d();}}),u=new Sc({onConfig:p=>{c.configure({codec:p.codec});},onDecodeChunk:p=>{const h=new EncodedVideoChunk({type:p.avcFrame.keyframe?"key":"delta",timestamp:p.avcFrame.pts*1e6,duration:p.avcFrame.duration*1e6,data:p.rawData});l.push(h);},onDone:()=>{c.flush();}}),d=()=>{a=false,u.destroy(),c.state!=="closed"&&c.close();};if(t)s.streamChunks(i.url,async p=>{if(u.demux)u.push(new Uint8Array(p));else return  false;return await Xr(100),o?false:(console.count("继续读取"),true)});else {const h=await(await s.fetchBufferRange(i.url,0,-1)).arrayBuffer();u.push(h,{done:true});}for(;a;){if(o)return a=false,d(),{videoFrame:o,frameTime:this._getFrameRealTime(o.timestamp),seekTime:e,consumedTime:Date.now()-n};if(Date.now()-n>Mc){console.error(`m3u8Clipper seek timeout, time: ${e}`),a=false,d();return}if(l.length>0){const p=l.shift();p&&(c.decode(p),await c.flush());}else await Xr(0);}}_getFrameRealTime(e){return Oc(e,Tc,Lc)}} exports("E", Nc);var F;(function(r){r.Pending="pending",r.Running="running",r.Paused="paused",r.Cancelled="cancelled",r.Completed="completed",r.Failed="failed";})(F||(F={}));class ae{} exports("J", ae);Object.defineProperty(ae,"TaskExist",{enumerable:true,configurable:true,writable:true,value:class extends Error{constructor(){super("Task Exist");}}});Object.defineProperty(ae,"TaskCancelled",{enumerable:true,configurable:true,writable:true,value:class extends Error{constructor(){super("Task Cancelled");}}});Object.defineProperty(ae,"QueueCleared",{enumerable:true,configurable:true,writable:true,value:class extends Error{constructor(){super("Queue Cleared");}}});Object.defineProperty(ae,"QueueFull",{enumerable:true,configurable:true,writable:true,value:class extends Error{constructor(){super("Queue Full");}}});Object.defineProperty(ae,"TaskTimeout",{enumerable:true,configurable:true,writable:true,value:class extends Error{constructor(){super("Task Timeout");}}});class Dc{constructor(e={}){Object.defineProperty(this,"queue",{enumerable:true,configurable:true,writable:true,value:[]}),Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:{maxConcurrent:3,maxQueueLength:1/0,defaultRetryDelay:1e3,laneConfig:{}}}),Object.defineProperty(this,"running",{enumerable:true,configurable:true,writable:true,value:new Map}),Object.defineProperty(this,"laneRunningCount",{enumerable:true,configurable:true,writable:true,value:new Map}),this.options={...this.options,...e},Object.keys(this.options.laneConfig).forEach(t=>{this.laneRunningCount.set(t,0);});}get length(){return this.queue.length}get runningCount(){return this.running.size}async add(e,t={}){if(this.queue.length>=this.options.maxQueueLength)throw new ae.QueueFull;if(t.id&&this.get(t.id))throw new ae.TaskExist;let n,o;const a=new Promise((s,l)=>{n=s,o=l;}),i={execute:e,promise:a,priority:t.priority||0,resolve:n,reject:o,timeout:t.timeout,retries:t.retries||0,id:t.id||Math.random().toString(36).substr(2,9),lane:t.lane,status:F.Pending,immediate:t.immediate,action:t.action};return i.lane&&this.isPaused(i.lane)&&(i.status=F.Paused),i.action==="push"?this.queue.push(i):this.queue.unshift(i),this.sort(),i.immediate&&this.processQueue(),i.promise}pause(e){this.running.forEach(t=>{(!e||t.id===e||t.lane===e)&&(t.status=F.Paused);}),this.queue.forEach(t=>{(!e||t.id===e||t.lane===e)&&(t.status=F.Paused);});}resume(e){this.queue.forEach(t=>{(!e||t.id===e||t.lane===e)&&t.status===F.Paused&&(t.status=F.Pending);}),this.sort(),this.processQueue();}cancel(e){this.queue=this.queue.filter(t=>t.id===e||t.lane===e?(t.status=F.Cancelled,t.reject(new ae.TaskCancelled),false):true),this.running.forEach((t,n)=>{(t.id===e||t.lane===e)&&(t.status=F.Cancelled,t.reject(new ae.TaskCancelled),this.running.delete(n),t.lane&&this.decrementLaneRunningCount(t.lane));});}remove(e){this.cancel(e),this.queue=this.queue.filter(t=>t.id!==e&&t.lane!==e);}retry(e,t){const n=[];this.queue.forEach(o=>{(o.id===e||o.lane===e)&&o.status===F.Failed&&(o.retries=t??o.retries,o.status=F.Pending,n.push(o));}),n.forEach(o=>{this.queue.push(o);}),this.processQueue();}isPaused(e){return !!this.queue.some(t=>t.lane===e&&t.status===F.Paused)}isPending(e){return !!this.queue.some(t=>t.lane===e&&t.status===F.Pending)}getStatus(){const e={};return this.laneRunningCount.forEach((t,n)=>{var o;e[n]={running:t,maxConcurrent:((o=this.options.laneConfig[n])==null?undefined:o.maxConcurrent)||0};}),{queueLength:this.queue.length,runningCount:this.running.size,maxConcurrent:this.options.maxConcurrent,lanes:e,tasks:{pending:this.queue.filter(t=>t.status==="pending").length,running:this.running.size,paused:this.queue.filter(t=>t.status==="paused").length,failed:this.queue.filter(t=>t.status==="failed").length,completed:this.queue.filter(t=>t.status==="completed").length,cancelled:this.queue.filter(t=>t.status==="cancelled").length}}}get(e){return this.queue.find(t=>t.id===e||t.lane===e)??this.running.get(e)}hasRunning(){return this.running.size>0}getLaneStatus(e){const t=this.options.laneConfig[e],n=this.getLaneRunningCount(e);return {name:e,running:n,maxConcurrent:(t==null?undefined:t.maxConcurrent)||0,priority:(t==null?undefined:t.priority)||0,hasConfig:!!t}}tryOvertaking(e,t,n){const o=this.get(e);return o&&(o.status===F.Pending||o.status===F.Running||o.status===F.Paused)?(o.lane=t,o.priority=n??o.priority,this.sort(),this.processQueue(),true):false}tryResume(e){const t=this.get(e);return t&&t.status===F.Paused?(this.resume(e),true):false}setLaneConfig(e,t){const n=this.options.laneConfig[e]||{name:e,priority:0,maxConcurrent:this.options.maxConcurrent};this.options.laneConfig[e]={...n,...t},this.laneRunningCount.has(e)||this.laneRunningCount.set(e,0),this.sort(),this.processQueue();}async waitIdle(e=100){this.hasRunning()&&(await new Promise(t=>setTimeout(t,e)),await this.waitIdle());}async waitLaneIdle(e,t=100){this.getLaneRunningCount(e)!==0&&(await new Promise(n=>setTimeout(n,t)),await this.waitLaneIdle(e,t));}clear(){this.queue.forEach(e=>{e.status=F.Cancelled,e.reject(new ae.QueueCleared);}),this.queue=[],this.running.clear(),this.laneRunningCount.clear(),Object.keys(this.options.laneConfig).forEach(e=>{this.laneRunningCount.set(e,0);});}incrementLaneRunningCount(e){const t=this.laneRunningCount.get(e)||0;this.laneRunningCount.set(e,t+1);}decrementLaneRunningCount(e){const t=this.laneRunningCount.get(e)||0;t>0&&this.laneRunningCount.set(e,t-1);}getLaneRunningCount(e){return this.laneRunningCount.get(e)||0}canLaneRunMoreTasks(e){const t=this.options.laneConfig[e];return t?this.getLaneRunningCount(e)<t.maxConcurrent:true}async processQueue(){if(this.running.size>=this.options.maxConcurrent)return;const e=this.queue.find(t=>!(t.status!==F.Pending||this.isPaused(t.id)||t.lane&&!this.canLaneRunMoreTasks(t.lane)));if(e){this.running.set(e.id,e),e.status=F.Running,e.lane&&this.incrementLaneRunningCount(e.lane);try{let t;const n=async()=>{if(e.timeout){const a=new Promise((i,s)=>{t=window.setTimeout(()=>{console.warn("Task timeout",e.id),s(new ae.TaskTimeout);},e.timeout);});return Promise.race([e.execute(),a])}return e.execute()},o=await this.executeWithRetry(n,e.retries||0,e);t&&clearTimeout(t),e.status=F.Completed,e.resolve(o);}catch(t){e.status=F.Failed,e.reject(t);}finally{this.running.delete(e.id),e.lane&&this.decrementLaneRunningCount(e.lane),this.processQueue();}}}async executeWithRetry(e,t,n){try{return await e()}catch(o){if(t>0&&n.status!=="cancelled")return console.warn("Task retry",n.id),await new Promise(a=>setTimeout(a,this.options.defaultRetryDelay)),this.executeWithRetry(e,t-1,n);throw o}}sort(){this.queue.sort((e,t)=>{var a,i;const n=e.lane&&((a=this.options.laneConfig[e.lane])==null?undefined:a.priority)||0,o=t.lane&&((i=this.options.laneConfig[t.lane])==null?undefined:i.priority)||0;return n!==o?n-o:e.priority-t.priority});}} exports("D", Dc);const Rc=720,jc=720,je=new Dc({maxConcurrent:3});function Uc(r){return `cover_${r.sha1}_${r.pickCode}_${r.coverNum}_${r.duration}`}const xo=(r,e)=>`${r}_${e}`;function Bc(r,e){const t=r/5,n=t,a=r-t-n;return Array.from({length:e},(i,s)=>Math.floor(n+a/e*s))}function ko(r){return {img:URL.createObjectURL(r.blob),...r}}async function zc(r,e){const t=await r.seek(e,true);if(!t)throw new Error("no clipper result");const n=qn(t.videoFrame.displayWidth,t.videoFrame.displayHeight,Rc,jc),o=new OffscreenCanvas(n.width,n.height),a=o.getContext("2d");if(!a)throw new Error("no canvas context");a.drawImage(await createImageBitmap(t.videoFrame,{resizeQuality:"pixelated",resizeWidth:n.width,resizeHeight:n.height}),0,0,n.width,n.height);const i=await o.convertToBlob({type:"image/webp",quality:.85});return t.videoFrame.close(),{blob:i,width:n.width,height:n.height,frameTime:t.frameTime,seekTime:e}}async function $c(r,e){const t=[];for(const n of e){const o=xo(r,n),a=await Hn.get(o);if(!a)return [];const i=a.value;t.push(ko(i));}return t}async function Fc(r,e,t){const o=(await St.getM3u8(e)).sort((s,l)=>s.quality-l.quality)[0];if(!o)throw new Error("source is null");const a=new Nc({url:o.url});await a.open();const i=t.map(async s=>{const l=xo(r,s),c=await zc(a,s);return Hn.set(l,c),ko(c)});return Promise.all(i)}function Hc(r){r.forEach(e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e);});}function qc(r,e){const t=reactive({isReady:false,isLoading:false,error:undefined,state:[]}),n=Uc(r.value),o=Bc(r.value.duration,r.value.coverNum),a=eo(e.elementRef,{threshold:e.threshold??0,rootMargin:e.rootMargin??"0%",scrollTarget:e.scrollTarget}),i=(d,p,h,m)=>je.add(()=>Fc(p,h,m),{id:d,immediate:true}),s=()=>{const d=je.get(n);d&&d.status===F.Pending&&je.cancel(n);},l=async(d,p)=>{if(!(t.isReady||t.error||je.get(d))){t.isLoading=true;try{const m=await i(d,p.sha1,p.pickCode,o);t.state=m,t.isReady=!0;}catch(m){if(m instanceof ae.TaskCancelled)return;if(m instanceof gr.NotFoundM3u8File){t.error=zn.CANNOT_VIDEO_COVER_WITHOUT_TRANSCODING;return}t.error=m;}finally{t.isLoading=false;}}},c=async d=>{if(!(t.isReady||t.error)){t.isLoading=true;try{const p=await $c(d.sha1,o);p.length>0&&(t.state=p,t.isLoading=!1,t.isReady=!0);}catch(p){t.error=p;}finally{t.isLoading=false;}}},{isScrolling:u}=$i(e.scrollTarget,{throttle:16.666666666666668,idle:100,onStop:async()=>{a.value&&(await c(r.value),l(n,r.value));}});return watch(a,async d=>{d?u.value?c(r.value):(await c(r.value),l(n,r.value)):s();}),onUnmounted(()=>{je.remove(n),Hc(t.state.map(d=>d==null?undefined:d.img).filter(d=>d!==undefined));}),{videoCover:t}}const Vc=["id"],Gc=["onClick"],Qc=["src","alt"],Yc=5,Wc=defineComponent({__name:"index",props:{pickCode:{},sha1:{},duration:{},listScrollBoxNode:{}},setup(r){const e=r,t={container:{main:"w-full max-w-214 px-20 h-24 [content-visibility:auto]",content:"relative h-full flex items-center bg-base-300 rounded overflow-hidden"},states:{error:"flex items-center justify-center flex-1"},skeleton:"skeleton w-full h-full rounded",cover:{container:["w-full h-full flex overflow-hidden select-none overflow-hidden"],thumbItem:["h-full aspect-video","overflow-hidden","cursor-zoom-in no-underline","hover:opacity-90 transition-opacity"],thumbImage:["h-full w-full object-contain object-center align-top"]}},n=ref(),o=ref(null),a=computed(()=>e.listScrollBoxNode),i=computed(()=>({sha1:e.sha1,pickCode:e.pickCode,coverNum:Yc,duration:Number(e.duration)})),s={elementRef:n,scrollTarget:a},{videoCover:l}=qc(i,s);function c(){o.value&&(o.value.destroy(),o.value=null),o.value=new oa({dataSource:l.state.map(d=>({src:d.img,width:d.width,height:d.height,alt:"视频封面"})),showHideAnimationType:"fade",pswpModule:()=>fo(()=>module.import('photoswipe'),void 0),mouseMovePan:true,initialZoomLevel:"fit",secondaryZoomLevel:2,maxZoomLevel:4,wheelToZoom:true,bgOpacity:.9}),o.value.init();}function u(d){!o.value||!l.isReady||o.value.loadAndOpen(d);}return watch(()=>l.isReady,async d=>{d&&(await nextTick(),c());}),onBeforeUnmount(()=>{o.value&&(o.value.destroy(),o.value=null);}),(d,p)=>(openBlock(),createElementBlock("div",{ref_key:"rootRef",ref:n,class:normalizeClass(t.container.main)},[createElementVNode("div",{class:normalizeClass(t.container.content)},[unref(l).error?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.states.error)},[createVNode(Ar,{size:"mini",message:unref(l).error},null,8,["message"])],2)):unref(l).isLoading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.skeleton)},null,2)):unref(l).isReady?(openBlock(),createElementBlock("div",{key:2,id:`gallery-${e.pickCode}`,class:normalizeClass(["pswp-gallery",t.cover.container])},[(openBlock(true),createElementBlock(Fragment,null,renderList(unref(l).state,(h,m)=>(openBlock(),createElementBlock("a",{key:m,class:normalizeClass([t.cover.thumbItem]),onClick:withModifiers(v=>u(m),["prevent","stop"])},[createElementVNode("img",{src:h.img,alt:`视频封面 ${m+1}`,class:normalizeClass(t.cover.thumbImage)},null,10,Qc)],10,Gc))),128))],10,Vc)):createCommentVNode("",true)],2)],2))}});class Kc extends Te{constructor(){super(...arguments),Object.defineProperty(this,"ENABLE_KEY_IN_USER_SETTING",{enumerable:true,configurable:true,writable:true,value:"enableFilelistPreview"}),Object.defineProperty(this,"vueApp",{enumerable:true,configurable:true,writable:true,value:null});}onLoad(){if(this.itemInfo.fileListType===ge.grid||(this.itemInfo.avNumber,this.itemInfo.attributes.iv!==fe.Yes))return;this.itemNode.classList.add("with-ext-video-cover");const e=document.createElement("div");e.style.width="100%",this.itemNode.append(e);const t=e.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=vr,t.appendChild(n);const o=document.createElement("div");o.className="ext-video-cover-root",o.setAttribute("data-theme","light"),t.appendChild(o);const a=createApp(Wc,{pickCode:this.itemInfo.attributes.pick_code,sha1:this.itemInfo.attributes.sha1,duration:String(this.itemInfo.duration),listScrollBoxNode:this.itemInfo.listScrollBoxNode});a.mount(o),this.vueApp=a;}onDestroy(){var e;(e=this.vueApp)==null||e.unmount();}}class Xc{constructor(){Object.defineProperty(this,"scrollBox",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"storage",{enumerable:true,configurable:true,writable:true,value:new Jc}),Object.defineProperty(this,"handleScroll",{enumerable:true,configurable:true,writable:true,value:throttle(()=>{var t;const e=((t=this.scrollBox)==null?undefined:t.scrollTop)??0;this.save(bt.FileMainReInstanceSetting,e);},16.666666666666668,{leading:true,trailing:true})});}clearAll(){this.storage.clear();}destroy(){var e;this.clearAll(),(e=this.scrollBox)==null||e.removeEventListener("scroll",this.handleScroll);}setScrollBox(e){this.scrollBox&&this.scrollBox.removeEventListener("scroll",this.handleScroll),this.scrollBox=e,this.restore(bt.FileMainReInstanceSetting,e),this.scrollBox.addEventListener("scroll",this.handleScroll);}save(e,t){this.storage.set(e.cid.toString(),Number(e.offset),Number(e.limit),t);}restore(e,t){const n=this.storage.get(e.cid.toString(),Number(e.offset),Number(e.limit));return n&&n>0?(t.scrollTo({top:n,behavior:"instant"}),true):false}}class Jc{constructor(){Object.defineProperty(this,"STORAGE_KEY",{enumerable:true,configurable:true,writable:true,value:"115_master_file_list_scroll_history"}),Object.defineProperty(this,"store",{enumerable:true,configurable:true,writable:true,value:window.sessionStorage});}get storeData(){return JSON.parse(this.store.getItem(this.STORAGE_KEY)??"{}")}set storeData(e){this.store.setItem(this.STORAGE_KEY,JSON.stringify(e));}get(e,t,n){return this.storeData[this.getDataKey(e,t,n)]??0}set(e,t,n,o){const a=this.storeData;a[this.getDataKey(e,t,n)]=o,this.storeData=a;}clear(){this.storeData={};}getDataKey(e,t,n){return `${e}-${t}-${n}`}}const Zc=[vl,Za,Kc,xl,ei,hi];class eu extends Xe{constructor(){super(),Object.defineProperty(this,"itemModLoaderMaps",{enumerable:true,configurable:true,writable:true,value:new Map}),Object.defineProperty(this,"observerContent",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"scrollHistory",{enumerable:true,configurable:true,writable:true,value:null}),this.init();}get dataListBoxNode(){return document.querySelector(bt.Main.CONFIG.DataListBox)}get listCellNode(){return document.querySelector(".list-cell")??null}get listContentsNode(){var e;return (e=this.listCellNode)==null?undefined:e.querySelector(".list-contents")}get listThumbNode(){var e;return (e=this.listCellNode)==null?undefined:e.querySelector(".list-thumb")}get listScrollBoxNode(){return this.listContentsNode??this.listThumbNode}get listType(){return this.listContentsNode?ge.list:ge.grid}get itemNodes(){var e;return (e=this.listCellNode)==null?undefined:e.querySelectorAll("li")}destroy(){var e,t;(e=this.observerContent)==null||e.disconnect(),this.destroyAllItemModLoader(),(t=this.scrollHistory)==null||t.destroy();}async init(){var e;this.updateItems(),this.scrollHistory=new Xc,Pa()&&this.scrollHistory.clearAll(),this.listScrollBoxNode&&((e=this.scrollHistory)==null||e.setScrollBox(this.listScrollBoxNode)),this.watchItemsChange();}watchItemsChange(){let e=null;if(e=new MutationObserver(t=>{var n;for(const o of t)if(o.target.isSameNode(this.dataListBoxNode)&&o.addedNodes.length>0){this.updateItems(),this.listScrollBoxNode&&((n=this.scrollHistory)==null||n.setScrollBox(this.listScrollBoxNode));break}}),!this.dataListBoxNode){console.error("文件列表容器节点不存在, 无法监听文件列表变化");return}e.observe(this.dataListBoxNode,{childList:true}),this.observerContent=e;}updateItems(){const e=this.itemNodes,t=new Set(e);if(t){for(const n of t){if(this.itemModLoaderMaps.has(n))continue;const o=new Na(n,this.listType,this.listScrollBoxNode,Zc);o.load(),this.itemModLoaderMaps.set(n,o);}for(const[n,o]of this.itemModLoaderMaps.entries())t.has(n)||(o.destroy(),this.itemModLoaderMaps.delete(n));}}destroyAllItemModLoader(){this.itemModLoaderMaps.forEach(e=>{e.destroy();}),this.itemModLoaderMaps.clear();}}class tu extends Xe{constructor(){super(),Object.defineProperty(this,"container",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"observer",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"injected",{enumerable:true,configurable:true,writable:true,value:new Set}),Object.defineProperty(this,"namePickMap",{enumerable:true,configurable:true,writable:true,value:new Map}),Object.defineProperty(this,"cid",{enumerable:true,configurable:true,writable:true,value:null}),this.init();}destroy(){var e;(e=this.observer)==null||e.disconnect(),this.observer=null,this.injected.forEach(t=>t.remove()),this.injected.clear(),this.namePickMap.clear();}async init(){this.container=document.querySelector(".file-list-wrap");const e=new URLSearchParams(window.location.search);if(this.cid=e.get("cid"),!this.container||!this.cid){console.warn("[MobileFileListMod] 找不到文件列表容器或 cid 缺失");return}await this.loadPlaylist(this.cid),this.processAllItems(),this.observe();}async loadPlaylist(e){try{const n=(await St.getPlaylist(e)).data||[];this.namePickMap.clear();for(const o of n)o.n&&o.pc&&this.namePickMap.set(o.n.trim(),o.pc.trim());}catch(t){console.error("[MobileFileListMod] 获取播放列表失败",t);}}observe(){this.container&&(this.observer=new MutationObserver(()=>{this.processAllItems();}),this.observer.observe(this.container,{childList:true,subtree:true}));}processAllItems(){if(!this.container)return;this.container.querySelectorAll(".file-list-item").forEach(t=>this.processItem(t));}getItemName(e){var o;const t=e.querySelector(".file-name-responsive"),n=((o=t==null?undefined:t.textContent)==null?undefined:o.trim())||null;return n&&n.length>0?n:null}findDefaultToolbar(e){var n;const t=e.querySelectorAll("*");for(const o of Array.from(t)){const a=((n=o.className)==null?undefined:n.toString())||"";if(a.includes("group-hover:flex")||a.includes("group-hover:block"))return o}return null}processItem(e){if(e.querySelector(".master-player-mobile"))return;const t=this.getItemName(e);if(!t)return;const n=this.namePickMap.get(t);if(!n||!this.cid)return;const o=this.findDefaultToolbar(e);o&&(o.style.display="none");const a=this.createButton(()=>{mr({pickCode:n,cid:this.cid},true);}),i=e.querySelector(".file-name-responsive"),s=i==null?undefined:i.parentElement;if(s&&i){let l=s.querySelector(".master-player-mobile-wrapper");l||(l=document.createElement("div"),l.className="master-player-mobile-wrapper mt-1 flex items-start",i.insertAdjacentElement("afterend",l)),l.appendChild(a);}else e.appendChild(a);this.injected.add(a);}createButton(e){const t=document.createElement("div");t.className="master-player-mobile inline-flex items-center space-x-1 px-3 py-1 text-xs bg-gray-50 text-gray-700 cursor-pointer rounded-md border border-gray-200",t.style.pointerEvents="auto";const n=document.createElement("span");n.textContent="▶",n.style.pointerEvents="none";const o=document.createElement("span");o.textContent="Master 播放",o.style.pointerEvents="none",t.appendChild(n),t.appendChild(o);const a=i=>{i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),e();};return t.addEventListener("mousedown",a),t.addEventListener("click",a),t}}class ru extends Xe{constructor(){super(),Object.defineProperty(this,"buttonEl",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"dragging",{enumerable:true,configurable:true,writable:true,value:false}),Object.defineProperty(this,"startX",{enumerable:true,configurable:true,writable:true,value:0}),Object.defineProperty(this,"startY",{enumerable:true,configurable:true,writable:true,value:0}),Object.defineProperty(this,"startLeft",{enumerable:true,configurable:true,writable:true,value:0}),Object.defineProperty(this,"startTop",{enumerable:true,configurable:true,writable:true,value:0}),Object.defineProperty(this,"moved",{enumerable:true,configurable:true,writable:true,value:false}),Object.defineProperty(this,"moveThreshold",{enumerable:true,configurable:true,writable:true,value:5}),Object.defineProperty(this,"expanded",{enumerable:true,configurable:true,writable:true,value:false}),this.init();}init(){if(this.buttonEl)return;const e=document.createElement("div");e.className="master-mobile-float-btn",e.setAttribute("title","Master 浮动按钮"),e.innerHTML='<span class="icon">▶</span>',document.body.appendChild(e),this.buttonEl=e;const t=e.getBoundingClientRect(),n=Math.max(12,window.innerWidth-t.width-12),o=12;e.style.right="auto",e.style.left=`${n}px`,e.style.top=`${o}px`;const a=p=>{p.preventDefault(),p.stopPropagation(),this.dragging=true,this.moved=false,this.startX=p.clientX,this.startY=p.clientY;const h=e.getBoundingClientRect();this.startLeft=h.left,this.startTop=h.top;try{e.setPointerCapture(p.pointerId);}catch{}e.style.cursor="grabbing";},i=p=>{if(!this.dragging)return;const h=p.clientX-this.startX,m=p.clientY-this.startY;!this.moved&&Math.abs(h)+Math.abs(m)>this.moveThreshold&&(this.moved=true),this.moveButtonTo(this.startLeft+h,this.startTop+m);},s=p=>{if(this.dragging){p.preventDefault(),p.stopPropagation(),this.dragging=false,e.style.cursor="";try{e.releasePointerCapture(p.pointerId);}catch{}this.moved||(this.toggleExpanded(),alert("浮动按钮已点击"));}};e.addEventListener("pointerdown",a,{passive:false}),window.addEventListener("pointermove",i,{passive:false}),window.addEventListener("pointerup",s,{passive:false});const l=p=>p.touches[0]||p.changedTouches[0],c=p=>{const h=l(p);this.dragging=true,this.moved=false,this.startX=h.clientX,this.startY=h.clientY;const m=e.getBoundingClientRect();this.startLeft=m.left,this.startTop=m.top;},u=p=>{if(!this.dragging)return;const h=l(p),m=h.clientX-this.startX,v=h.clientY-this.startY;!this.moved&&Math.abs(m)+Math.abs(v)>this.moveThreshold&&(this.moved=true),this.moveButtonTo(this.startLeft+m,this.startTop+v);},d=()=>{this.dragging&&(this.dragging=false,this.moved||(this.toggleExpanded(),alert("浮动按钮已点击")));};e.addEventListener("touchstart",c,{passive:true}),window.addEventListener("touchmove",u,{passive:true}),window.addEventListener("touchend",d,{passive:true}),window.addEventListener("resize",()=>{const p=e.getBoundingClientRect();this.moveButtonTo(p.left,p.top);});}moveButtonTo(e,t){const n=this.buttonEl;if(!n)return;const o=n.getBoundingClientRect(),a=6,i=window.innerWidth-o.width-a,s=window.innerHeight-o.height-a,l=Math.min(Math.max(e,a),Math.max(i,a)),c=Math.min(Math.max(t,a),Math.max(s,a));n.style.left=`${l}px`,n.style.top=`${c}px`;}toggleExpanded(){this.setExpanded(!this.expanded);}setExpanded(e){this.expanded=e;const t=this.buttonEl;if(!t)return;t.classList.toggle("expanded",e);const n=t.getBoundingClientRect();this.moveButtonTo(n.left,n.top);}destroy(){var e;(e=this.buttonEl)==null||e.remove(),this.buttonEl=null;}}/**
      * (c) Iconify
      *
      * For the full copyright and license information, please view the license.txt
      * files at https://github.com/iconify/iconify
      *
      * Licensed under MIT.
      *
      * @license MIT
      * @version 3.0.0
      */const _o=Object.freeze({left:0,top:0,width:16,height:16}),wt=Object.freeze({rotate:0,vFlip:false,hFlip:false}),et=Object.freeze({..._o,...wt}),nr=Object.freeze({...et,body:"",hidden:false}),nu=Object.freeze({width:null,height:null}),Ao=Object.freeze({...nu,...wt});function ou(r,e=0){const t=r.replace(/^-?[0-9.]*/,"");function n(o){for(;o<0;)o+=4;return o%4}if(t===""){const o=parseInt(r);return isNaN(o)?0:n(o)}else if(t!==r){let o=0;switch(t){case "%":o=25;break;case "deg":o=90;}if(o){let a=parseFloat(r.slice(0,r.length-t.length));return isNaN(a)?0:(a=a/o,a%1===0?n(a):0)}}return e}const au=/[\s,]+/;function iu(r,e){e.split(au).forEach(t=>{switch(t.trim()){case "horizontal":r.hFlip=true;break;case "vertical":r.vFlip=true;break}});}const Eo={...Ao,preserveAspectRatio:""};function mn(r){const e={...Eo},t=(n,o)=>r.getAttribute(n)||o;return e.width=t("width",null),e.height=t("height",null),e.rotate=ou(t("rotate","")),iu(e,t("flip","")),e.preserveAspectRatio=t("preserveAspectRatio",t("preserveaspectratio","")),e}function su(r,e){for(const t in Eo)if(r[t]!==e[t])return  true;return  false}const Co=/^[a-z0-9]+(-[a-z0-9]+)*$/,tt=(r,e,t,n="")=>{const o=r.split(":");if(r.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;n=o.shift().slice(1);}if(o.length>3||!o.length)return null;if(o.length>1){const s=o.pop(),l=o.pop(),c={provider:o.length>0?o[0]:n,prefix:l,name:s};return e&&!ht(c)?null:c}const a=o[0],i=a.split("-");if(i.length>1){const s={provider:n,prefix:i.shift(),name:i.join("-")};return e&&!ht(s)?null:s}if(t&&n===""){const s={provider:n,prefix:"",name:a};return e&&!ht(s,t)?null:s}return null},ht=(r,e)=>r?!!((e&&r.prefix===""||r.prefix)&&r.name):false;function lu(r,e){const t={};!r.hFlip!=!e.hFlip&&(t.hFlip=true),!r.vFlip!=!e.vFlip&&(t.vFlip=true);const n=((r.rotate||0)+(e.rotate||0))%4;return n&&(t.rotate=n),t}function bn(r,e){const t=lu(r,e);for(const n in nr)n in wt?n in r&&!(n in t)&&(t[n]=wt[n]):n in e?t[n]=e[n]:n in r&&(t[n]=r[n]);return t}function cu(r,e){const t=r.icons,n=r.aliases||Object.create(null),o=Object.create(null);function a(i){if(t[i])return o[i]=[];if(!(i in o)){o[i]=null;const s=n[i]&&n[i].parent,l=s&&a(s);l&&(o[i]=[s].concat(l));}return o[i]}return Object.keys(t).concat(Object.keys(n)).forEach(a),o}function uu(r,e,t){const n=r.icons,o=r.aliases||Object.create(null);let a={};function i(s){a=bn(n[s]||o[s],a);}return i(e),t.forEach(i),bn(r,a)}function So(r,e){const t=[];if(typeof r!="object"||typeof r.icons!="object")return t;r.not_found instanceof Array&&r.not_found.forEach(o=>{e(o,null),t.push(o);});const n=cu(r);for(const o in n){const a=n[o];a&&(e(o,uu(r,o,a)),t.push(o));}return t}const du={provider:"",aliases:{},not_found:{},..._o};function $t(r,e){for(const t in e)if(t in r&&typeof r[t]!=typeof e[t])return  false;return  true}function Io(r){if(typeof r!="object"||r===null)return null;const e=r;if(typeof e.prefix!="string"||!r.icons||typeof r.icons!="object"||!$t(r,du))return null;const t=e.icons;for(const o in t){const a=t[o];if(!o||typeof a.body!="string"||!$t(a,nr))return null}const n=e.aliases||Object.create(null);for(const o in n){const a=n[o],i=a.parent;if(!o||typeof i!="string"||!t[i]&&!n[i]||!$t(a,nr))return null}return e}const yt=Object.create(null);function pu(r,e){return {provider:r,prefix:e,icons:Object.create(null),missing:new Set}}function pe(r,e){const t=yt[r]||(yt[r]=Object.create(null));return t[e]||(t[e]=pu(r,e))}function Po(r,e){return Io(e)?So(e,(t,n)=>{n?r.icons[t]=n:r.missing.add(t);}):[]}function hu(r,e,t){try{if(typeof t.body=="string")return r.icons[e]={...t},!0}catch{}return  false}function fu(r,e){let t=[];return (typeof r=="string"?[r]:Object.keys(yt)).forEach(o=>{(typeof o=="string"&&typeof e=="string"?[e]:Object.keys(yt[o]||{})).forEach(i=>{const s=pe(o,i);t=t.concat(Object.keys(s.icons).map(l=>(o!==""?"@"+o+":":"")+i+":"+l));});}),t}let Ye=false;function To(r){return typeof r=="boolean"&&(Ye=r),Ye}function We(r){const e=typeof r=="string"?tt(r,true,Ye):r;if(e){const t=pe(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:undefined)}}function Lo(r,e){const t=tt(r,true,Ye);if(!t)return  false;const n=pe(t.provider,t.prefix);return e?hu(n,t.name,e):(n.missing.add(t.name),true)}function gn(r,e){if(typeof r!="object")return  false;if(typeof e!="string"&&(e=r.provider||""),Ye&&!e&&!r.prefix){let o=false;return Io(r)&&(r.prefix="",So(r,(a,i)=>{Lo(a,i)&&(o=true);})),o}const t=r.prefix;if(!ht({prefix:t,name:"a"}))return  false;const n=pe(e,t);return !!Po(n,r)}function mu(r){return !!We(r)}function bu(r){const e=We(r);return e&&{...et,...e}}function gu(r){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);r.sort((o,a)=>o.provider!==a.provider?o.provider.localeCompare(a.provider):o.prefix!==a.prefix?o.prefix.localeCompare(a.prefix):o.name.localeCompare(a.name));let n={provider:"",prefix:"",name:""};return r.forEach(o=>{if(n.name===o.name&&n.prefix===o.prefix&&n.provider===o.provider)return;n=o;const a=o.provider,i=o.prefix,s=o.name,l=t[a]||(t[a]=Object.create(null)),c=l[i]||(l[i]=pe(a,i));let u;s in c.icons?u=e.loaded:i===""||c.missing.has(s)?u=e.missing:u=e.pending;const d={provider:a,prefix:i,name:s};u.push(d);}),e}function Oo(r,e){r.forEach(t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(o=>o.id!==e));});}function vu(r){r.pendingCallbacksFlag||(r.pendingCallbacksFlag=true,setTimeout(()=>{r.pendingCallbacksFlag=false;const e=r.loaderCallbacks?r.loaderCallbacks.slice(0):[];if(!e.length)return;let t=false;const n=r.provider,o=r.prefix;e.forEach(a=>{const i=a.icons,s=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==o)return  true;const c=l.name;if(r.icons[c])i.loaded.push({provider:n,prefix:o,name:c});else if(r.missing.has(c))i.missing.push({provider:n,prefix:o,name:c});else return t=true,true;return  false}),i.pending.length!==s&&(t||Oo([r],a.id),a.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),a.abort));});}));}let wu=0;function yu(r,e,t){const n=wu++,o=Oo.bind(null,t,n);if(!e.pending.length)return o;const a={id:n,icons:e,callback:r,abort:o};return t.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(a);}),o}const or=Object.create(null);function vn(r,e){or[r]=e;}function ar(r){return or[r]||or[""]}function xu(r,e=true,t=false){const n=[];return r.forEach(o=>{const a=typeof o=="string"?tt(o,e,t):o;a&&n.push(a);}),n}var ku={resources:[],index:0,timeout:2e3,rotate:750,random:false,dataAfterTimeout:false};function _u(r,e,t,n){const o=r.resources.length,a=r.random?Math.floor(Math.random()*o):r.index;let i;if(r.random){let y=r.resources.slice(0);for(i=[];y.length>1;){const b=Math.floor(Math.random()*y.length);i.push(y[b]),y=y.slice(0,b).concat(y.slice(b+1));}i=i.concat(y);}else i=r.resources.slice(a).concat(r.resources.slice(0,a));const s=Date.now();let l="pending",c=0,u,d=null,p=[],h=[];typeof n=="function"&&h.push(n);function m(){d&&(clearTimeout(d),d=null);}function v(){l==="pending"&&(l="aborted"),m(),p.forEach(y=>{y.status==="pending"&&(y.status="aborted");}),p=[];}function f(y,b){b&&(h=[]),typeof y=="function"&&h.push(y);}function g(){return {startTime:s,payload:e,status:l,queriesSent:c,queriesPending:p.length,subscribe:f,abort:v}}function w(){l="failed",h.forEach(y=>{y(undefined,u);});}function _(){p.forEach(y=>{y.status==="pending"&&(y.status="aborted");}),p=[];}function E(y,b,x){const I=b!=="success";switch(p=p.filter(T=>T!==y),l){case "pending":break;case "failed":if(I||!r.dataAfterTimeout)return;break;default:return}if(b==="abort"){u=x,w();return}if(I){u=x,p.length||(i.length?j():w());return}if(m(),_(),!r.random){const T=r.resources.indexOf(y.resource);T!==-1&&T!==r.index&&(r.index=T);}l="completed",h.forEach(T=>{T(x);});}function j(){if(l!=="pending")return;m();const y=i.shift();if(y===undefined){if(p.length){d=setTimeout(()=>{m(),l==="pending"&&(_(),w());},r.timeout);return}w();return}const b={status:"pending",resource:y,callback:(x,I)=>{E(b,x,I);}};p.push(b),c++,d=setTimeout(j,r.rotate),t(y,e,b.callback);}return setTimeout(j),g}function Mo(r){const e={...ku,...r};let t=[];function n(){t=t.filter(s=>s().status==="pending");}function o(s,l,c){const u=_u(e,s,l,(d,p)=>{n(),c&&c(d,p);});return t.push(u),u}function a(s){return t.find(l=>s(l))||null}return {query:o,find:a,setIndex:s=>{e.index=s;},getIndex:()=>e.index,cleanup:n}}function Er(r){let e;if(typeof r.resources=="string")e=[r.resources];else if(e=r.resources,!(e instanceof Array)||!e.length)return null;return {resources:e,path:r.path||"/",maxURL:r.maxURL||500,rotate:r.rotate||750,timeout:r.timeout||5e3,random:r.random===true,index:r.index||0,dataAfterTimeout:r.dataAfterTimeout!==false}}const Ot=Object.create(null),Ue=["https://api.simplesvg.com","https://api.unisvg.com"],ft=[];for(;Ue.length>0;)Ue.length===1||Math.random()>.5?ft.push(Ue.shift()):ft.push(Ue.pop());Ot[""]=Er({resources:["https://api.iconify.design"].concat(ft)});function wn(r,e){const t=Er(e);return t===null?false:(Ot[r]=t,true)}function Mt(r){return Ot[r]}function Au(){return Object.keys(Ot)}function yn(){}const Ft=Object.create(null);function Eu(r){if(!Ft[r]){const e=Mt(r);if(!e)return;const t=Mo(e),n={config:e,redundancy:t};Ft[r]=n;}return Ft[r]}function No(r,e,t){let n,o;if(typeof r=="string"){const a=ar(r);if(!a)return t(undefined,424),yn;o=a.send;const i=Eu(r);i&&(n=i.redundancy);}else {const a=Er(r);if(a){n=Mo(a);const i=r.resources?r.resources[0]:"",s=ar(i);s&&(o=s.send);}}return !n||!o?(t(undefined,424),yn):n.query(e,o,t)().abort}function xn(){}function Cu(r){r.iconsLoaderFlag||(r.iconsLoaderFlag=true,setTimeout(()=>{r.iconsLoaderFlag=false,vu(r);}));}function Su(r){const e=[],t=[];return r.forEach(n=>{(n.match(Co)?e:t).push(n);}),{valid:e,invalid:t}}function Be(r,e,t){function n(){const o=r.pendingIcons;e.forEach(a=>{o&&o.delete(a),r.icons[a]||r.missing.add(a);});}if(t&&typeof t=="object")try{if(!Po(r,t).length){n();return}}catch(o){console.error(o);}n(),Cu(r);}function kn(r,e){r instanceof Promise?r.then(t=>{e(t);}).catch(()=>{e(null);}):e(r);}function Iu(r,e){r.iconsToLoad?r.iconsToLoad=r.iconsToLoad.concat(e).sort():r.iconsToLoad=e,r.iconsQueueFlag||(r.iconsQueueFlag=true,setTimeout(()=>{r.iconsQueueFlag=false;const{provider:t,prefix:n}=r,o=r.iconsToLoad;if(delete r.iconsToLoad,!o||!o.length)return;const a=r.loadIcon;if(r.loadIcons&&(o.length>1||!a)){kn(r.loadIcons(o,n,t),u=>{Be(r,o,u);});return}if(a){o.forEach(u=>{const d=a(u,n,t);kn(d,p=>{const h=p?{prefix:n,icons:{[u]:p}}:null;Be(r,[u],h);});});return}const{valid:i,invalid:s}=Su(o);if(s.length&&Be(r,s,null),!i.length)return;const l=n.match(Co)?ar(t):null;if(!l){Be(r,i,null);return}l.prepare(t,n,i).forEach(u=>{No(t,u,d=>{Be(r,u.icons,d);});});}));}const Cr=(r,e)=>{const t=xu(r,true,To()),n=gu(t);if(!n.pending.length){let l=true;return e&&setTimeout(()=>{l&&e(n.loaded,n.missing,n.pending,xn);}),()=>{l=false;}}const o=Object.create(null),a=[];let i,s;return n.pending.forEach(l=>{const{provider:c,prefix:u}=l;if(u===s&&c===i)return;i=c,s=u,a.push(pe(c,u));const d=o[c]||(o[c]=Object.create(null));d[u]||(d[u]=[]);}),n.pending.forEach(l=>{const{provider:c,prefix:u,name:d}=l,p=pe(c,u),h=p.pendingIcons||(p.pendingIcons=new Set);h.has(d)||(h.add(d),o[c][u].push(d));}),a.forEach(l=>{const c=o[l.provider][l.prefix];c.length&&Iu(l,c);}),e?yu(e,n,a):xn},Pu=r=>new Promise((e,t)=>{const n=typeof r=="string"?tt(r,true):r;if(!n){t(r);return}Cr([n||r],o=>{if(o.length&&n){const a=We(n);if(a){e({...et,...a});return}}t(r);});});function _n(r){try{const e=typeof r=="string"?JSON.parse(r):r;if(typeof e.body=="string")return {...e}}catch{}}function Tu(r,e){if(typeof r=="object")return {data:_n(r),value:r};if(typeof r!="string")return {value:r};if(r.includes("{")){const a=_n(r);if(a)return {data:a,value:r}}const t=tt(r,true,true);if(!t)return {value:r};const n=We(t);if(n!==undefined||!t.prefix)return {value:r,name:t,data:n};const o=Cr([t],()=>e(r,t,We(t)));return {value:r,name:t,loading:o}}let Do=false;try{Do=navigator.vendor.indexOf("Apple")===0;}catch{}function Lu(r,e){switch(e){case "svg":case "bg":case "mask":return e}return e!=="style"&&(Do||r.indexOf("<a")===-1)?"svg":r.indexOf("currentColor")===-1?"bg":"mask"}const Ou=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Mu=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function ir(r,e,t){if(e===1)return r;if(t=t||100,typeof r=="number")return Math.ceil(r*e*t)/t;if(typeof r!="string")return r;const n=r.split(Ou);if(n===null||!n.length)return r;const o=[];let a=n.shift(),i=Mu.test(a);for(;;){if(i){const s=parseFloat(a);isNaN(s)?o.push(a):o.push(Math.ceil(s*e*t)/t);}else o.push(a);if(a=n.shift(),a===undefined)return o.join("");i=!i;}}function Nu(r,e="defs"){let t="";const n=r.indexOf("<"+e);for(;n>=0;){const o=r.indexOf(">",n),a=r.indexOf("</"+e);if(o===-1||a===-1)break;const i=r.indexOf(">",a);if(i===-1)break;t+=r.slice(o+1,a).trim(),r=r.slice(0,n).trim()+r.slice(i+1);}return {defs:t,content:r}}function Du(r,e){return r?"<defs>"+r+"</defs>"+e:e}function Ru(r,e,t){const n=Nu(r);return Du(n.defs,e+n.content+t)}const ju=r=>r==="unset"||r==="undefined"||r==="none";function Ro(r,e){const t={...et,...r},n={...Ao,...e},o={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,n].forEach(v=>{const f=[],g=v.hFlip,w=v.vFlip;let _=v.rotate;g?w?_+=2:(f.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),f.push("scale(-1 1)"),o.top=o.left=0):w&&(f.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),f.push("scale(1 -1)"),o.top=o.left=0);let E;switch(_<0&&(_-=Math.floor(_/4)*4),_=_%4,_){case 1:E=o.height/2+o.top,f.unshift("rotate(90 "+E.toString()+" "+E.toString()+")");break;case 2:f.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:E=o.width/2+o.left,f.unshift("rotate(-90 "+E.toString()+" "+E.toString()+")");break}_%2===1&&(o.left!==o.top&&(E=o.left,o.left=o.top,o.top=E),o.width!==o.height&&(E=o.width,o.width=o.height,o.height=E)),f.length&&(a=Ru(a,'<g transform="'+f.join(" ")+'">',"</g>"));});const i=n.width,s=n.height,l=o.width,c=o.height;let u,d;i===null?(d=s===null?"1em":s==="auto"?c:s,u=ir(d,l/c)):(u=i==="auto"?l:i,d=s===null?ir(u,c/l):s==="auto"?c:s);const p={},h=(v,f)=>{ju(f)||(p[v]=f.toString());};h("width",u),h("height",d);const m=[o.left,o.top,l,c];return p.viewBox=m.join(" "),{attributes:p,viewBox:m,body:a}}function Sr(r,e){let t=r.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)t+=" "+n+'="'+e[n]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+r+"</svg>"}function Uu(r){return r.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Bu(r){return "data:image/svg+xml,"+Uu(r)}function jo(r){return 'url("'+Bu(r)+'")'}const zu=()=>{let r;try{if(r=fetch,typeof r=="function")return r}catch{}};let xt=zu();function $u(r){xt=r;}function Fu(){return xt}function Hu(r,e){const t=Mt(r);if(!t)return 0;let n;if(!t.maxURL)n=0;else {let o=0;t.resources.forEach(i=>{o=Math.max(o,i.length);});const a=e+".json?icons=";n=t.maxURL-o-t.path.length-a.length;}return n}function qu(r){return r===404}const Vu=(r,e,t)=>{const n=[],o=Hu(r,e),a="icons";let i={type:a,provider:r,prefix:e,icons:[]},s=0;return t.forEach((l,c)=>{s+=l.length+1,s>=o&&c>0&&(n.push(i),i={type:a,provider:r,prefix:e,icons:[]},s=l.length),i.icons.push(l);}),n.push(i),n};function Gu(r){if(typeof r=="string"){const e=Mt(r);if(e)return e.path}return "/"}const Qu=(r,e,t)=>{if(!xt){t("abort",424);return}let n=Gu(e.provider);switch(e.type){case "icons":{const a=e.prefix,s=e.icons.join(","),l=new URLSearchParams({icons:s});n+=a+".json?"+l.toString();break}case "custom":{const a=e.uri;n+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let o=503;xt(r+n).then(a=>{const i=a.status;if(i!==200){setTimeout(()=>{t(qu(i)?"abort":"next",i);});return}return o=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",o);});return}setTimeout(()=>{t("success",a);});}).catch(()=>{t("next",o);});},Yu={prepare:Vu,send:Qu};function Wu(r,e,t){pe(t||"",e).loadIcons=r;}function Ku(r,e,t){pe(t||"",e).loadIcon=r;}const Ht="data-style";let Uo="";function Xu(r){Uo=r;}function An(r,e){let t=Array.from(r.childNodes).find(n=>n.hasAttribute&&n.hasAttribute(Ht));t||(t=document.createElement("style"),t.setAttribute(Ht,Ht),r.appendChild(t)),t.textContent=":host{display:inline-block;vertical-align:"+(e?"-0.125em":"0")+"}span,svg{display:block;margin:auto}"+Uo;}function Bo(){vn("",Yu),To(true);let r;try{r=window;}catch{}if(r){if(r.IconifyPreload!==undefined){const t=r.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!gn(o))&&console.error(n);}catch{console.error(n);}});}if(r.IconifyProviders!==undefined){const t=r.IconifyProviders;if(typeof t=="object"&&t!==null)for(const n in t){const o="IconifyProviders["+n+"] is invalid.";try{const a=t[n];if(typeof a!="object"||!a||a.resources===void 0)continue;wn(n,a)||console.error(o);}catch{console.error(o);}}}}return {iconLoaded:mu,getIcon:bu,listIcons:fu,addIcon:Lo,addCollection:gn,calculateSize:ir,buildIcon:Ro,iconToHTML:Sr,svgToURL:jo,loadIcons:Cr,loadIcon:Pu,addAPIProvider:wn,setCustomIconLoader:Ku,setCustomIconsLoader:Wu,appendCustomStyle:Xu,_api:{getAPIConfig:Mt,setAPIModule:vn,sendAPIQuery:No,setFetch:$u,getFetch:Fu,listAPIProviders:Au}}}const sr={"background-color":"currentColor"},zo={"background-color":"transparent"},En={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Cn={"-webkit-mask":sr,mask:sr,background:zo};for(const r in Cn){const e=Cn[r];for(const t in En)e[r+"-"+t]=En[t];}function Sn(r){return r?r+(r.match(/^[-0-9.]+$/)?"px":""):"inherit"}function Ju(r,e,t){const n=document.createElement("span");let o=r.body;o.indexOf("<a")!==-1&&(o+="<!-- "+Date.now()+" -->");const a=r.attributes,i=Sr(o,{...a,width:e.width+"",height:e.height+""}),s=jo(i),l=n.style,c={"--svg":s,width:Sn(a.width),height:Sn(a.height),...t?sr:zo};for(const u in c)l.setProperty(u,c[u]);return n}let qe;function Zu(){try{qe=window.trustedTypes.createPolicy("iconify",{createHTML:r=>r});}catch{qe=null;}}function ed(r){return qe===undefined&&Zu(),qe?qe.createHTML(r):r}function td(r){const e=document.createElement("span"),t=r.attributes;let n="";t.width||(n="width: inherit;"),t.height||(n+="height: inherit;"),n&&(t.style=n);const o=Sr(r.body,t);return e.innerHTML=ed(o),e.firstChild}function lr(r){return Array.from(r.childNodes).find(e=>{const t=e.tagName&&e.tagName.toUpperCase();return t==="SPAN"||t==="SVG"})}function In(r,e){const t=e.icon.data,n=e.customisations,o=Ro(t,n);n.preserveAspectRatio&&(o.attributes.preserveAspectRatio=n.preserveAspectRatio);const a=e.renderedMode;let i;switch(a){case "svg":i=td(o);break;default:i=Ju(o,{...et,...t},a==="mask");}const s=lr(r);s?i.tagName==="SPAN"&&s.tagName===i.tagName?s.setAttribute("style",i.getAttribute("style")):r.replaceChild(i,s):r.appendChild(i);}function Pn(r,e,t){const n=t&&(t.rendered?t:t.lastRender);return {rendered:false,inline:e,icon:r,lastRender:n}}function rd(r="iconify-icon"){let e,t;try{e=window.customElements,t=window.HTMLElement;}catch{return}if(!e||!t)return;const n=e.get(r);if(n)return n;const o=["icon","mode","inline","noobserver","width","height","rotate","flip"],a=class extends t{constructor(){super();A(this,"_shadowRoot");A(this,"_initialised",false);A(this,"_state");A(this,"_checkQueued",false);A(this,"_connected",false);A(this,"_observer",null);A(this,"_visible",true);const l=this._shadowRoot=this.attachShadow({mode:"open"}),c=this.hasAttribute("inline");An(l,c),this._state=Pn({value:""},c),this._queueCheck();}connectedCallback(){this._connected=true,this.startObserver();}disconnectedCallback(){this._connected=false,this.stopObserver();}static get observedAttributes(){return o.slice(0)}attributeChangedCallback(l){switch(l){case "inline":{const c=this.hasAttribute("inline"),u=this._state;c!==u.inline&&(u.inline=c,An(this._shadowRoot,c));break}case "noobserver":{this.hasAttribute("noobserver")?this.startObserver():this.stopObserver();break}default:this._queueCheck();}}get icon(){const l=this.getAttribute("icon");if(l&&l.slice(0,1)==="{")try{return JSON.parse(l)}catch{}return l}set icon(l){typeof l=="object"&&(l=JSON.stringify(l)),this.setAttribute("icon",l);}get inline(){return this.hasAttribute("inline")}set inline(l){l?this.setAttribute("inline","true"):this.removeAttribute("inline");}get observer(){return this.hasAttribute("observer")}set observer(l){l?this.setAttribute("observer","true"):this.removeAttribute("observer");}restartAnimation(){const l=this._state;if(l.rendered){const c=this._shadowRoot;if(l.renderedMode==="svg")try{c.lastChild.setCurrentTime(0);return}catch{}In(c,l);}}get status(){const l=this._state;return l.rendered?"rendered":l.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=true,setTimeout(()=>{this._check();}));}_check(){if(!this._checkQueued)return;this._checkQueued=false;const l=this._state,c=this.getAttribute("icon");if(c!==l.icon.value){this._iconChanged(c);return}if(!l.rendered||!this._visible)return;const u=this.getAttribute("mode"),d=mn(this);(l.attrMode!==u||su(l.customisations,d)||!lr(this._shadowRoot))&&this._renderIcon(l.icon,d,u);}_iconChanged(l){const c=Tu(l,(u,d,p)=>{const h=this._state;if(h.rendered||this.getAttribute("icon")!==u)return;const m={value:u,name:d,data:p};m.data?this._gotIconData(m):h.icon=m;});c.data?this._gotIconData(c):this._state=Pn(c,this._state.inline,this._state);}_forceRender(){if(!this._visible){const l=lr(this._shadowRoot);l&&this._shadowRoot.removeChild(l);return}this._queueCheck();}_gotIconData(l){this._checkQueued=false,this._renderIcon(l,mn(this),this.getAttribute("mode"));}_renderIcon(l,c,u){const d=Lu(l.data.body,u),p=this._state.inline;In(this._shadowRoot,this._state={rendered:true,icon:l,inline:p,customisations:c,attrMode:u,renderedMode:d});}startObserver(){if(!this._observer&&!this.hasAttribute("noobserver"))try{this._observer=new IntersectionObserver(l=>{const c=l.some(u=>u.isIntersecting);c!==this._visible&&(this._visible=c,this._forceRender());}),this._observer.observe(this);}catch{if(this._observer){try{this._observer.disconnect();}catch{}this._observer=null;}}}stopObserver(){this._observer&&(this._observer.disconnect(),this._observer=null,this._visible=true,this._connected&&this._forceRender());}};o.forEach(s=>{s in a.prototype||Object.defineProperty(a.prototype,s,{get:function(){return this.getAttribute(s)},set:function(l){l!==null?this.setAttribute(s,l):this.removeAttribute(s);}});});const i=Bo();for(const s in i)a[s]=a.prototype[s]=i[s];return e.define(r,a),a}rd()||Bo();class nd extends Xe{constructor(){super(),Object.defineProperty(this,"mutationObserver",{enumerable:true,configurable:true,writable:true,value:null}),Object.defineProperty(this,"backButton",{enumerable:true,configurable:true,writable:true,value:null}),this.init();}get filePathBoxNode(){return document.querySelector("#js_top_header_file_path_box")}get topFilePathContainerNode(){return document.querySelector(".list-topheader .top-file-path")}get commonLittlePopNode(){var e;return (e=this.filePathBoxNode)==null?undefined:e.querySelector(".common-little-pop")}get filePathNode(){var e;return (e=this.topFilePathContainerNode)==null?undefined:e.querySelector(".file-path")}get readPathLinkNodes(){var e;return (e=this.filePathNode)==null?undefined:e.querySelectorAll("a")}get hasSearchBackButton(){var e;return (e=this.topFilePathContainerNode)==null?undefined:e.querySelector('[menu="back_search"]')}destroy(){var e,t;(e=this.mutationObserver)==null||e.disconnect(),(t=this.backButton)==null||t.remove();}readPaths(){const e=this.readPathLinkNodes;if(!e)return [];const t=e.length>1;return Array.from(e).map(n=>{const o=n.getAttribute("titletext")??"",i=(n.getAttribute("cid")??"")==="0";return t&&i?"":o}).filter(n=>n!=="")}setTopDocumentTitleWithPaths(){const e=this.readPaths(),t=(e==null?undefined:e.reverse().join(" < "))??"";top!=null&&top.document&&t!==""&&(top.document.title=t);}addBackButton(){var e,t;this.topFilePathContainerNode&&(this.backButton=document.createElement("a"),this.backButton.classList.add("master-back-button"),this.backButton.href="javascript:void(0)",this.backButton.innerHTML='<iconify-icon icon="material-symbols:line-start-arrow-notch" noobserver></iconify-icon>返回目录',(e=this.topFilePathContainerNode)==null||e.before(this.backButton),this.commonLittlePopNode&&(this.commonLittlePopNode.style.marginLeft=`${(t=this.filePathNode)==null?undefined:t.getBoundingClientRect().left}px`),this.backButton.addEventListener("click",()=>{var o;const n=(o=this.readPathLinkNodes)==null?undefined:o[this.readPathLinkNodes.length-2];n&&n.click();}));}removeBackButton(){var e;(e=this.backButton)==null||e.remove(),this.backButton=null,this.commonLittlePopNode&&(this.commonLittlePopNode.style.marginLeft="0");}controlBackButtonShow(){var t;(((t=this.readPathLinkNodes)==null?undefined:t.length)??0)<=1||this.hasSearchBackButton?this.removeBackButton():this.backButton||this.addBackButton();}watchPathsChange(e){this.topFilePathContainerNode&&(this.mutationObserver=new MutationObserver(e),this.mutationObserver.observe(this.topFilePathContainerNode,{childList:true,subtree:true}));}init(){defer(()=>{this.setTopDocumentTitleWithPaths(),this.controlBackButtonShow(),this.watchPathsChange(()=>{this.setTopDocumentTitleWithPaths(),this.controlBackButtonShow();});});}}class od extends Xe{constructor(){super(),this.init();}get topHeaderNode(){var e;return (e=document.querySelector(bt.Main.CONFIG.TopPanelBox))==null?undefined:e.firstElementChild}destroy(){}init(){!this.topHeaderNode||li((top==null?undefined:top.window.location.search)??"").mode==="search"||(this.deleteOfficialDownloadButton(),this.addMasterOfflineTaskButton(),this.addPreviewSwitchButton(),this.fixContextMenuPosition("upload_btn_add_dir"),this.fixContextMenuPosition("create_new_add_dir"));}deleteOfficialDownloadButton(){var t;const e=(t=this.topHeaderNode)==null?undefined:t.querySelector(".button[menu='offline_task']");e&&e.remove();}addMasterOfflineTaskButton(){var t;const e=this.createMasterOfflineTaskButton();(t=this.topHeaderNode)==null||t.prepend(e);}createMasterOfflineTaskButton(){const e=document.createElement("a");return e.classList.add("button","master-offline-task-btn"),e.href="javascript:void(0)",e.innerHTML=`
            <i class="icon-operate ifo-linktask"></i>
            <span>云下载</span>
        `,e.style.background="#3a4783",e.style.borderColor="#3a4783",e.onclick=()=>{Un();},e}addPreviewSwitchButton(){var t;const e=this.createPreviewSwitchButton();(t=this.topHeaderNode)==null||t.append(e);}createPreviewSwitchButton(){const e=He.value.enableFilelistPreview,t=document.createElement("a");return t.classList.add("button","btn-line","master-preview-switch-btn"),e&&t.classList.add("active"),t.setAttribute("title","开启文件预览"),t.href="javascript:void(0)",t.innerHTML=`
      <iconify-icon class="preview-off" icon="material-symbols:preview-off" noobserver></iconify-icon>
      <iconify-icon class="preview-on" icon="material-symbols:preview" noobserver></iconify-icon>
    `,t.onclick=()=>{He.value.enableFilelistPreview=!He.value.enableFilelistPreview,t.classList.toggle("active");},t}fixContextMenuPosition(e){const t=document.querySelector(`[data-dropdown-tab="${e}"]`),n=document.querySelector(`[data-dropdown-content="${e}"]`);if(!t||!n)return;const o=t.getBoundingClientRect();n.style.left=`${o.left}px`;}}class Tn{constructor(){Object.defineProperty(this,"modManager",{enumerable:true,configurable:true,writable:true,value:undefined}),this.init();}destroy(){var e;(e=this.modManager)==null||e.destroy();}async init(){wa();const t=window.location.hostname==="f.115.com"?[new tu,new ru]:[new eu,new nd,new od];this.modManager=new _a(t);}}function ad(){document.body.style.backgroundColor="#000",document.body.style.margin="0",document.body.innerHTML='<div id="my-app" data-theme="dark"></div>',document.title="",Aa(`
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
      /* display: none !important; */
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* 隐藏滚动条 */
    :fullscreen html::-webkit-scrollbar,
    :fullscreen body::-webkit-scrollbar {
      width: 0 !important;
      height: 0 !important;
      display: none !important
    }
  `);}function Xd(r){return new Promise((e,t)=>{const n=document.createElement("iframe");n.src=`${nt}/video/token`,n.style.display="none",window.addEventListener("message",o=>{var a;o.origin===nt&&o.data.event==="ready"&&((a=n.contentWindow)==null||a.postMessage({event:"set-cookies",data:r},nt)),o.origin===nt&&o.data.event==="set-cookies-callback"&&(o.data.data?t(o.data.data):e("success"),n.remove());}),document.body.appendChild(n);})}function id(){window.parent.postMessage({event:"ready"},lt),window.addEventListener("message",r=>{r.origin===lt&&r.data.event==="set-cookies"&&Ea.set(r.data.data,e=>{window.parent.postMessage({event:"set-cookies-callback",data:e},lt);});});}async function sd(){ad();const r=document.createElement("style");r.textContent=vr,r.dataset.v="style_css",document.head.append(r),createApp(defineAsyncComponent({loader:()=>fo(()=>module.import('./index-CTKa-cUk-BfiggCY1.js'),void 0)})).mount("#my-app");}const ld={class:"popup-main"},cd={class:"popup-desc"},ud={class:"user-agent-box"},dd=defineComponent({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(r,{emit:e}){const t=e,n=ref(navigator.userAgent);function o(){t("update:visible",false);}return (a,i)=>(openBlock(),createBlock(Teleport,{to:"body"},[a.visible?(openBlock(),createElementBlock("div",{key:0,class:"user-agent-popup-overlay",onClick:o},[createElementVNode("div",{class:"user-agent-popup",onClick:i[0]||(i[0]=withModifiers(()=>{},["stop"]))},[createElementVNode("div",{class:"user-agent-popup-header"},[i[1]||(i[1]=createElementVNode("h3",null,"115Master 提示",-1)),createElementVNode("button",{class:"close-button",onClick:o}," × ")]),createElementVNode("div",ld,[i[3]||(i[3]=createElementVNode("div",{class:"popup-content"},[createElementVNode("div",{class:"content-icon"},[createElementVNode("span",{class:"number-icon"},"1")]),createElementVNode("div",{class:"content-text"},[createElementVNode("p",null,"现在不需要 User-Agent Switcher and Manager 插件了"),createElementVNode("p",null," 快卸载掉他吧~ "),createElementVNode("p",null," 然后刷新下页面，复活我~ ")])],-1)),createElementVNode("div",cd,[i[2]||(i[2]=createElementVNode("p",null,"当前的 User-Agent",-1)),createElementVNode("div",ud,toDisplayString(n.value),1)])])])])):createCommentVNode("",true)]))}}),pd=exports("p", (r,e)=>{const t=r.__vccOpts||r;for(const[n,o]of e)t[n]=o;return t}),hd=pd(dd,[["__scopeId","data-v-1d0f9c85"]]);function fd(){if(navigator.userAgent.includes("115Browser/27")){const t=document.createElement("div");document.body.appendChild(t);const n=createApp({render(){return h(hd,{visible:true,"onUpdate:visible":o=>{o||setTimeout(()=>{n.unmount(),document.body.removeChild(t);},300);}})}});throw n.mount(t),new Error("115Master脚本启动失败: 现在不需要修改【User-Agent】请删除插件~")}}class md{constructor(){Object.defineProperty(this,"Logger",{enumerable:true,configurable:true,writable:true,value:undefined}),this.Logger=new Fn("115Master","DebugInfo");}bootstrapInfo(){this.Logger.log("bootstrap-info",`
${ye.script.name} 启动成功，喜欢这个脚本的话，帮我在主页点个 Star 吧！
版本: ${ye.script.version}
作者: ${ye.script.author}
描述: ${ye.script.description}
主页: ${ye.script.homepage}
开始执行脚本时间：${performance.now()} ms
refferer: ${window.location.href}
        `);}}const bd=new md;bd.bootstrapInfo();fd();ya();const gd=[{match:Me.HOME,exec:()=>new Tn},{match:Me.MOBILE_HOME,exec:()=>new Tn},{match:Me.VIDEO,exec:()=>sd()},{match:Me.VIDEO_TOKEN,exec:()=>id()},{match:Me.MAGNET,exec:()=>ka()}];function Ln(){for(const r of gd)la(r.match).test(window.location.href)&&r.exec();}document.readyState==="complete"||document.readyState==="interactive"?Ln():window.addEventListener("DOMContentLoaded",Ln);

    })
  };
}));

System.register("./index-CTKa-cUk-BfiggCY1.js", ['vue', './__monkey.entry-CShvTRci.js', 'lodash', 'hls.js', 'photoswipe/lightbox', 'localforage', 'blueimp-md5', 'big-integer', 'dayjs', 'm3u8-parser'], (function (exports, module) {
  'use strict';
  var defineComponent, shallowRef, computed, watch, onMounted, onUnmounted, openBlock, createBlock, Teleport, createVNode, Transition, withCtx, withDirectives, createElementVNode, mergeProps, renderSlot, vShow, unref, normalizeClass, createElementBlock, Fragment, renderList, toDisplayString, createCommentVNode, ref, reactive, normalizeStyle, createTextVNode, vModelText, vModelCheckbox, withModifiers, watchEffect, nextTick, useTemplateRef, provide, inject, toValue, Rn$1, qi$1, Bd, Rd, pd, ho$1, Ar$1, zd, ye, Wd, Gd, fo$1, el$1, tl$1, Qs$1, qc, qd, Qd, Yd, Vd, ri$1, wl$1, Ta$1, Hd, $d, qn$1, Ld, Oi$1, St$1, Ai$1, ll$1, sl$1, Xr$1, jd, Pd, Dc, Nd, Xd, Td, yl$1, Kd, mr$1, Oa$1, Fd, X, Ud, _i$1, se, zn$1, Nc, Sd, ae$1, Dd, Md, Od, La$1, bt, shuffle, get, $n, oa;
  return {
    setters: [module => {
      defineComponent = module.defineComponent;
      shallowRef = module.shallowRef;
      computed = module.computed;
      watch = module.watch;
      onMounted = module.onMounted;
      onUnmounted = module.onUnmounted;
      openBlock = module.openBlock;
      createBlock = module.createBlock;
      Teleport = module.Teleport;
      createVNode = module.createVNode;
      Transition = module.Transition;
      withCtx = module.withCtx;
      withDirectives = module.withDirectives;
      createElementVNode = module.createElementVNode;
      mergeProps = module.mergeProps;
      renderSlot = module.renderSlot;
      vShow = module.vShow;
      unref = module.unref;
      normalizeClass = module.normalizeClass;
      createElementBlock = module.createElementBlock;
      Fragment = module.Fragment;
      renderList = module.renderList;
      toDisplayString = module.toDisplayString;
      createCommentVNode = module.createCommentVNode;
      ref = module.ref;
      reactive = module.reactive;
      normalizeStyle = module.normalizeStyle;
      createTextVNode = module.createTextVNode;
      vModelText = module.vModelText;
      vModelCheckbox = module.vModelCheckbox;
      withModifiers = module.withModifiers;
      watchEffect = module.watchEffect;
      nextTick = module.nextTick;
      useTemplateRef = module.useTemplateRef;
      provide = module.provide;
      inject = module.inject;
      toValue = module.toValue;
    }, module => {
      Rn$1 = module.R;
      qi$1 = module.q;
      Bd = module.B;
      Rd = module.a;
      pd = module.p;
      ho$1 = module.h;
      Ar$1 = module.A;
      zd = module.z;
      ye = module.y;
      Wd = module.W;
      Gd = module.G;
      fo$1 = module.f;
      el$1 = module.e;
      tl$1 = module.t;
      Qs$1 = module.Q;
      qc = module.b;
      qd = module.c;
      Qd = module.d;
      Yd = module.Y;
      Vd = module.V;
      ri$1 = module.r;
      wl$1 = module.w;
      Ta$1 = module.T;
      Hd = module.H;
      $d = module.$;
      qn$1 = module.g;
      Ld = module.L;
      Oi$1 = module.O;
      St$1 = module.S;
      Ai$1 = module.i;
      ll$1 = module.l;
      sl$1 = module.s;
      Xr$1 = module.X;
      jd = module.j;
      Pd = module.P;
      Dc = module.D;
      Nd = module.N;
      Xd = module.k;
      Td = module.m;
      yl$1 = module.n;
      Kd = module.K;
      mr$1 = module.o;
      Oa$1 = module.u;
      Fd = module.F;
      X = module.v;
      Ud = module.U;
      _i$1 = module._;
      se = module.x;
      zn$1 = module.C;
      Nc = module.E;
      Sd = module.I;
      ae$1 = module.J;
      Dd = module.M;
      Md = module.Z;
      Od = module.a0;
      La$1 = module.a1;
      bt = module.a2;
    }, module => {
      shuffle = module.shuffle;
      get = module.get;
    }, module => {
      $n = module.default;
    }, module => {
      oa = module.default;
    }, null, null, null, null, null],
    execute: (function () {

      var re;(function(s){s.Native="Native",s.AvPlayer="AvPlayer",s.Hls="HLS.js";})(re||(re={}));var Ae={exports:{}},He={exports:{}},ze,Tt;function ga(){if(Tt)return ze;Tt=1;var s=undefined;return ze=function(e){return e!==s&&e!==null},ze}var qe,St;function Sn(){if(St)return qe;St=1;var s=ga(),e={object:true,function:true,undefined:true};return qe=function(t){return s(t)?hasOwnProperty.call(e,typeof t):false},qe}var We,It;function In(){if(It)return We;It=1;var s=Sn();return We=function(e){if(!s(e))return  false;try{return e.constructor?e.constructor.prototype===e:!1}catch{return  false}},We}var Ge,Rt;function Rn(){if(Rt)return Ge;Rt=1;var s=In();return Ge=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return  false;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return !1}catch{return  false}return !s(e)},Ge}var Ke,Et;function En(){if(Et)return Ke;Et=1;var s=Rn(),e=/^\s*class[\s{/}]/,t=Function.prototype.toString;return Ke=function(n){return !(!s(n)||e.test(t.call(n)))},Ke}var Ye,Mt;function Mn(){return Mt||(Mt=1,Ye=function(){var s=Object.assign,e;return typeof s!="function"?false:(e={foo:"raz"},s(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}),Ye}var Xe,At;function An(){return At||(At=1,Xe=function(){try{return Object.keys("primitive"),!0}catch{return  false}}),Xe}var Qe,Lt;function Ln(){return Lt||(Lt=1,Qe=function(){}),Qe}var Je,Ot;function gt(){if(Ot)return Je;Ot=1;var s=Ln()();return Je=function(e){return e!==s&&e!==null},Je}var Ze,Ft;function On(){if(Ft)return Ze;Ft=1;var s=gt(),e=Object.keys;return Ze=function(t){return e(s(t)?Object(t):t)},Ze}var et,Bt;function Fn(){return Bt||(Bt=1,et=An()()?Object.keys:On()),et}var tt,Nt;function Bn(){if(Nt)return tt;Nt=1;var s=gt();return tt=function(e){if(!s(e))throw new TypeError("Cannot use null or undefined");return e},tt}var at,Vt;function Nn(){if(Vt)return at;Vt=1;var s=Fn(),e=Bn(),t=Math.max;return at=function(n,a){var o,i,u=t(arguments.length,2),d;for(n=Object(e(n)),d=function(p){try{n[p]=a[p];}catch(f){o||(o=f);}},i=1;i<u;++i)a=arguments[i],s(a).forEach(d);if(o!==undefined)throw o;return n},at}var nt,Dt;function Vn(){return Dt||(Dt=1,nt=Mn()()?Object.assign:Nn()),nt}var st,jt;function Dn(){if(jt)return st;jt=1;var s=gt(),e=Array.prototype.forEach,t=Object.create,n=function(a,o){var i;for(i in a)o[i]=a[i];};return st=function(a){var o=t(null);return e.call(arguments,function(i){s(i)&&n(Object(i),o);}),o},st}var lt,Ut;function jn(){if(Ut)return lt;Ut=1;var s="razdwatrzy";return lt=function(){return typeof s.contains!="function"?false:s.contains("dwa")===true&&s.contains("foo")===false},lt}var ot,Ht;function Un(){if(Ht)return ot;Ht=1;var s=String.prototype.indexOf;return ot=function(e){return s.call(this,e,arguments[1])>-1},ot}var rt,zt;function Hn(){return zt||(zt=1,rt=jn()()?String.prototype.contains:Un()),rt}var qt;function zn(){if(qt)return He.exports;qt=1;var s=ga(),e=En(),t=Vn(),n=Dn(),a=Hn(),o=He.exports=function(i,u){var d,p,f,v,g;return arguments.length<2||typeof i!="string"?(v=u,u=i,i=null):v=arguments[2],s(i)?(d=a.call(i,"c"),p=a.call(i,"e"),f=a.call(i,"w")):(d=f=true,p=false),g={value:u,configurable:d,enumerable:p,writable:f},v?t(n(v),g):g};return o.gs=function(i,u,d){var p,f,v,g;return typeof i!="string"?(v=d,d=u,u=i,i=null):v=arguments[3],s(u)?e(u)?s(d)?e(d)||(v=d,d=undefined):d=undefined:(v=u,u=d=undefined):u=undefined,s(i)?(p=a.call(i,"c"),f=a.call(i,"e")):(p=true,f=false),g={get:u,set:d,configurable:p,enumerable:f},v?t(n(v),g):g},He.exports}var it,Wt;function qn(){return Wt||(Wt=1,it=function(s){if(typeof s!="function")throw new TypeError(s+" is not a function");return s}),it}var Gt;function Wn(){return Gt||(Gt=1,function(s,e){var t=zn(),n=qn(),a=Function.prototype.apply,o=Function.prototype.call,i=Object.create,u=Object.defineProperty,d=Object.defineProperties,p=Object.prototype.hasOwnProperty,f={configurable:true,enumerable:false,writable:true},v,g,M,$,y,P,x;v=function(b,m){var k;return n(m),p.call(this,"__ee__")?k=this.__ee__:(k=f.value=i(null),u(this,"__ee__",f),f.value=null),k[b]?typeof k[b]=="object"?k[b].push(m):k[b]=[k[b],m]:k[b]=m,this},g=function(b,m){var k,T;return n(m),T=this,v.call(this,b,k=function(){M.call(T,b,k),a.call(m,this,arguments);}),k.__eeOnceListener__=m,this},M=function(b,m){var k,T,S,E;if(n(m),!p.call(this,"__ee__"))return this;if(k=this.__ee__,!k[b])return this;if(T=k[b],typeof T=="object")for(E=0;S=T[E];++E)(S===m||S.__eeOnceListener__===m)&&(T.length===2?k[b]=T[E?0:1]:T.splice(E,1));else (T===m||T.__eeOnceListener__===m)&&delete k[b];return this},$=function(b){var m,k,T,S,E;if(p.call(this,"__ee__")&&(S=this.__ee__[b],!!S))if(typeof S=="object"){for(k=arguments.length,E=new Array(k-1),m=1;m<k;++m)E[m-1]=arguments[m];for(S=S.slice(),m=0;T=S[m];++m)a.call(T,this,E);}else switch(arguments.length){case 1:o.call(S,this);break;case 2:o.call(S,this,arguments[1]);break;case 3:o.call(S,this,arguments[1],arguments[2]);break;default:for(k=arguments.length,E=new Array(k-1),m=1;m<k;++m)E[m-1]=arguments[m];a.call(S,this,E);}},y={on:v,once:g,off:M,emit:$},P={on:t(v),once:t(g),off:t(M),emit:t($)},x=d({},P),s.exports=e=function(b){return b==null?i(x):d(Object(b),P)},e.methods=y;}(Ae,Ae.exports)),Ae.exports}var Gn=Wn();const Kn=Rn$1(Gn),Yn="115master",Xn="module",Qn="1.6.1",Jn="pnpm@9.15.9",Zn="115网盘魔法优化: 画质增强 | 视频缩略图 | 在线字幕",es="lilymark6868-stack",ts="MIT",as="https://github.com/lilymark6868-stack/115SubtitleAssistant",ns={type:"git",url:"https://github.com/lilymark6868-stack/115SubtitleAssistant.git"},ss={url:"https://github.com/lilymark6868-stack/115SubtitleAssistant/issues"},ls={node:">=20.12"},os={dev:"vite",build:"vite build","dev:plus":"cross-env VITE_PLUS_VERSION=true vite","build:plus":"cross-env VITE_PLUS_VERSION=true vite build","type-check":"vue-tsc -b --noEmit",test:"jest","test:watch":"jest --watch",lint:"eslint","lint:fix":"eslint --fix","lint:inspector":"pnpm dlx @eslint/config-inspector",analyze:"cross-env ANALYZE=true vite build",preinstall:"npx -y only-allow pnpm"},rs={"@cbingbing/demuxer":"^2.4.1","@iconify/vue":"^5.0.0","@libmedia/avcodec":"^0.8.1","@libmedia/avformat":"^0.8.1","@libmedia/avnetwork":"^0.8.1","@libmedia/avplayer":"^0.8.2","@libmedia/avutil":"^0.8.1","@libmedia/common":"^1.4.0","@material-symbols/svg-400":"^0.28.2","@tailwindcss/vite":"^4.1.7","@types/event-emitter":"^0.3.5","@types/eventemitter3":"^2.0.4","@vueuse/core":"^12.7.0","big-integer":"^1.6.52","blueimp-md5":"^2.19.0",dayjs:"^1.11.13","event-emitter":"^0.3.5",eventemitter3:"^5.0.1","glob-to-regexp":"^0.4.1","hls.js":"^1.5.20","iconify-icon":"^3.0.0",localforage:"^1.10.0",lodash:"^4.17.21","m3u8-parser":"^7.2.0",photoswipe:"^5.4.4",tailwindcss:"^4.1.7",vue:"^3.5.13"},is={"@antfu/eslint-config":"^4.16.1","@libmedia/avpipeline":"^0.8.1","@libmedia/cheap":"^0.8.0","@rollup/plugin-typescript":"^12.1.2","@types/big-integer":"^0.0.35","@types/blueimp-md5":"^2.18.2","@types/glob-to-regexp":"^0.4.4","@types/jest":"^29.5.14","@types/lodash":"^4.17.15","@types/m3u8-parser":"^7.2.0","@vitejs/plugin-vue":"^5.2.1","cross-env":"^7.0.3",daisyui:"^5.0.35",eslint:"^9.29.0","eslint-plugin-format":"^1.0.1",jest:"^29.7.0","lint-staged":"^16.1.2","rollup-plugin-visualizer":"^5.14.0","simple-git-hooks":"^2.13.0","ts-jest":"^29.2.5",tslib:"^2.8.1",typescript:"^5.7.3",vite:"^6.0.5","vite-plugin-monkey":"^5.0.3","vite-plugin-static-copy":"^2.3.0","vite-svg-loader":"^5.1.0","vue-tsc":"^2.2.10"},Kt={name:Yn,type:Xn,version:Qn,private:true,packageManager:Jn,description:Zn,author:es,license:ts,homepage:as,repository:ns,bugs:ss,engines:ls,scripts:os,dependencies:rs,devDependencies:is,"simple-git-hooks":{"pre-commit":"pnpm type-check && pnpm lint-staged"},"lint-staged":{"*":"eslint --fix"}};async function us({pkgName:s,version:e,path:t,varName:n}){e||(s in Kt.dependencies?e=Kt.dependencies[s]:e="latest");const a=`
      import ${n} from "${La$1}/npm/${s}@${e}/${t}";
      window.${n} = ${n};
  `,o=new Blob([a],{type:"text/javascript"}),i=URL.createObjectURL(o);return new Promise((u,d)=>{const p=document.createElement("script");p.type="module",p.src=i,p.onload=()=>{const f=()=>{const v=bt[n];v?(u(v),URL.revokeObjectURL(i)):setTimeout(f,50);};f();},p.onerror=f=>{URL.revokeObjectURL(i),d(new Error(`加载 ${s} 模块失败: ${f}`));},document.head.appendChild(p);})}function ya(){const s=shallowRef(0),e=shallowRef(0),t=shallowRef(true),n=shallowRef(1),a=shallowRef(100),o=shallowRef(false),i=shallowRef(true),u=shallowRef(true),d=shallowRef(false),p=shallowRef(undefined),f=shallowRef(false),v=shallowRef(0),g=shallowRef(0),M=shallowRef(false);return {currentTime:s,duration:e,paused:t,playbackRate:n,volume:a,muted:o,isLoading:i,loaded:f,autoPlay:u,canplay:d,loadError:p,videoWidth:v,videoHeight:g,isSuspended:M,reset:()=>{s.value=0,e.value=0,t.value=true,n.value=1,a.value=100,o.value=false,u.value=true,d.value=false,i.value=true,f.value=false,p.value=undefined,v.value=0,g.value=0,M.value=false;}}}const ut=`${La$1}/gh/cbingb666/libmedia@latest/dist`,cs={isLive:false,enableHardware:true,enableWebCodecs:true,enableWebGPU:true,enableWorker:true,preLoadTime:60},ds=["audiocodec","videocodec","audioCurrentTime","videoCurrentTime","width","height","channels","sampleRate","bandwidth","audioBitrate","videoBitrate","audioPacketQueueLength","videoPacketQueueLength","videoEncodeFramerate","videoDecodeFramerate","videoRenderFramerate","keyFrameInterval","audioEncodeFramerate","audioDecodeFramerate","audioRenderFramerate","audioFrameDecodeIntervalMax","audioFrameRenderIntervalMax","videoFrameDecodeIntervalMax","videoFrameRenderIntervalMax","jitter","audioStutter","videoStutter"];function ps(...s){const[e,t,n]=s,a=`${ut}/decode`,o=`${ut}/resample`,i=`${ut}/stretchpitch`;switch(e){case "decoder":if(t&&t>=65536&&t<=65572)return `${a}/pcm-simd.wasm`;switch(t){case 27:return `${a}/h264-simd.wasm`;case 173:return `${a}/hevc-simd.wasm`;case 12:return `${a}/mpeg4-simd.wasm`;case 196:return `${a}/vvc-simd.wasm`;case 225:return `${a}/av1-simd.wasm`;case 139:return `${a}/vp8-simd.wasm`;case 167:return `${a}/vp9-simd.wasm`;case 30:return `${a}/theora-simd.wasm`;case 2:return `${a}/mpeg2video-simd.wasm`;case 86018:return `${a}/aac-simd.wasm`;case 86017:return `${a}/mp3-simd.wasm`;case 86076:return `${a}/opus-simd.wasm`;case 86028:return `${a}/flac-simd.wasm`;case 86051:return `${a}/speex-simd.wasm`;case 86021:return `${a}/vorbis-simd.wasm`;case 86019:return `${a}/ac3-simd.wasm`;case 86056:return `${a}/eac3-simd.wasm`;case 86020:return `${a}/dca-simd.wasm`;default:return new Error(`Unsupported decoder: ${e} ${t} ${n}`)}case "resampler":return `${o}/resample-simd.wasm`;case "stretchpitcher":return `${i}/stretchpitch-simd.wasm`;default:return new Error(`Unsupported wasm: ${e} ${t} ${n}`)}}function fs(s,e){return (...t)=>{const n=e(...t);return n instanceof Error?(s.push(t),""):n}}function ms(s){let e=false;const t=shallowRef(null),n=shallowRef(null),a=ya(),o=ref(),i=shallowRef([]),u=ref([]),d=ref(null),p=ref(null),f=ref(null),v=computed(()=>u.value.filter(R=>R.mediaType==="Audio")),g=computed(()=>u.value.filter(R=>R.mediaType==="Video")),M=computed(()=>g.value.find(R=>R.id===p.value)),$=Kn(),y=ref(true),P=ref(null),x=()=>{if(!t.value)throw new Error("playerRef is not found");return t.value};watch(M,R=>{R&&(a.videoWidth.value=R.codecparProxy.width,a.videoHeight.value=R.codecparProxy.height);});const{pause:b,resume:m}=Dd(()=>{var _;const R=ds,w=(_=t.value)==null?undefined:_.getStats();w&&(o.value=Object.fromEntries(R.map(A=>[A,get(w,A)])));},1e3,{immediate:false}),k=R=>!i.value.find(([w,_])=>w==="decoder"&&_===R.codecparProxy.codecId),T=R=>R.find(w=>w.mediaType==="Audio"&&w.codecparProxy.chLayout.nbChannels<=8&&w.metadata.language==="eng"),S=()=>{var R,w;for(const[_,A]of Object.entries(((R=t.value)==null?undefined:R.listeners)??{}))for(const z of A)(w=t.value)==null||w.off(_,z.fn);},E=async R=>{const w=x();d.value=R,await w.selectAudio(R);},B={init:async R=>{var w,_,A,z,J,N,q,ie;try{const pe=await us({pkgName:"@libmedia/avplayer",path:"dist/esm/avplayer.js",varName:"AVPlayer"}),Q=new pe({...cs,...s.rootProps.avPlayerConfig,container:R,getWasm:fs(i.value,ps)});n.value=R,t.value=Q,(w=t.value)==null||w.on("playing",()=>{a.paused.value=!1;}),(_=t.value)==null||_.on("paused",()=>{a.paused.value=!0;}),(A=t.value)==null||A.on("loaded",()=>{a.isLoading.value=!1,a.loaded.value=!0;}),(z=t.value)==null||z.on("error",U=>{console.error(U);}),(J=t.value)==null||J.on("seeking",()=>{a.isLoading.value=!0;}),(N=t.value)==null||N.on("seeked",()=>{a.isLoading.value=!1;}),(q=t.value)==null||q.on("timeout",()=>{console.warn("avplayer timeout");}),(ie=t.value)==null||ie.on("time",U=>{e||(a.currentTime.value=Number(U)/1e3);});}catch(pe){console.error("初始化 AVPlayer 失败:",pe),a.loadError.value=pe;}},load:async(R,w)=>{P.value=w??null;const _=x();await _.load(R,{http:{credentials:"include"}}).then(async()=>{u.value=await _.getStreams(),console.log(g.value);const N=T(u.value);N&&(await _.selectAudio(N.id),d.value=N.id),m(),B.setVolume(a.volume.value),B.setMute(a.muted.value),B.setPlaybackRate(a.playbackRate.value),a.autoPlay.value?await B.play().then(async()=>{a.canplay.value=true,$.emit("canplay"),a.isSuspended.value=!a.muted.value&&_.isSuspended();}).catch(q=>{console.error("播放失败",q),a.loadError.value=q;}):(a.canplay.value=true,$.emit("canplay"));}).catch(N=>{throw a.loadError.value=N,b(),N}),a.duration.value=Number(_.getDuration())/1e3;const{width:A,height:z}=zd(n.value),J=_i$1(()=>{t.value&&t.value.resize(A.value,z.value);},30);watch([A,z],J);},getRenderElement:()=>{var R,w;return ((R=n.value)==null?undefined:R.querySelector("canvas"))??((w=n.value)==null?undefined:w.querySelector("video"))??null},play:()=>{const R=x();return a.paused.value=false,R.play({subtitle:false}).then(async()=>{y.value&&(await B.seek(P.value??a.currentTime.value),y.value=false),p.value=R.getSelectedVideoStreamId(),f.value=R.getSelectedSubtitleStreamId();})},pause:()=>{const R=x();return a.paused.value=true,R.pause()},togglePlay:()=>a.paused.value?B.play():B.pause(),setPlaybackRate:R=>{const w=x();a.playbackRate.value=R,w.setPlaybackRate(Math.min(R,2));},setVolume:R=>{const w=x();a.volume.value=R,w.setVolume(R/100*3);},setMute:R=>{const w=x();a.muted.value=R,w.setVolume(R?0:100),R||B.resumeSuspended();},toggleMute:()=>{B.setMute(!a.muted.value);},resumeSuspended:async()=>{await x().resume(),a.isSuspended.value=false;},setAutoPlay:R=>{a.autoPlay.value=R;},seek:async R=>{e=true;const w=x();a.currentTime.value=R,await w.seek(BigInt(Math.floor(R*1e3))),await nextTick(),e=false;},on:(R,w)=>{watch(t,_=>{if(_)switch(R){case "canplay":$.on("canplay",w);break;case "timeupdate":_.on("time",()=>{w(a.currentTime.value);});break;case "seeking":_.on("seeking",()=>{w(a.currentTime.value);});break;case "seeked":_.on("seeked",()=>{w(a.currentTime.value);});break;default:_.on(R,w);}},{once:true});},destroy:async()=>(S(),b(),a.reset(),t.value&&(t.value.pause(),await t.value.destroy()),t.value=null,Promise.resolve())};return {...a,...B,stats:o,streams:u,audioStreams:v,videoStreams:g,audioStreamId:d,videoStreamId:p,subtitleStreamId:f,isSupportStream:k,setAudioStream:E,type:re.AvPlayer}}function ha(s){const e=shallowRef(),t=ya(),n=()=>{if(!e.value)throw new Error("videoElementRef is not found");return e.value},a={init:async o=>{const i=document.createElement("video");return o.appendChild(i),i.style.width="100%",i.style.height="100%",i.style.objectFit="contain",e.value=i,X(e,"play",()=>{t.paused.value=false;}),X(e,"pause",()=>{t.paused.value=true;}),X(e,"playing",()=>{t.paused.value=false;}),X(e,"ended",()=>{t.paused.value=true;}),X(e,"waiting",()=>{t.isLoading.value=true;}),X(e,"canplay",()=>{t.isLoading.value=false,t.canplay.value=true;}),X(e,"seeking",()=>{t.isLoading.value=true;}),X(e,"seeked",()=>{t.isLoading.value=false;}),X(e,"timeupdate",()=>{var u;t.currentTime.value=((u=e.value)==null?undefined:u.currentTime)??0;}),Promise.resolve()},load:async(o,i)=>{const u=n();return a.setVolume(t.volume.value),a.setMute(t.muted.value),a.setAutoPlay(t.autoPlay.value),u.currentTime=i??t.currentTime.value,u.src=o,a.setPlaybackRate(t.playbackRate.value),new Promise((d,p)=>{X(e,"loadedmetadata",()=>{t.duration.value=u.duration,t.videoWidth.value=u.videoWidth,t.videoHeight.value=u.videoHeight,d(),t.autoPlay.value&&a.play();}),X(e,"error",f=>{var v;if(f.target instanceof HTMLVideoElement){const g=new Error((v=f.target.error)==null?undefined:v.message);g.name="Media Error",t.loadError.value=g;}else t.loadError.value=new Error("Video element unknown error");p(t.loadError.value);});})},getRenderElement:()=>n(),play:()=>{const o=n();return o.play().then(()=>{t.paused.value=false;}).catch(i=>{if(i.name==="NotAllowedError"&&o.error===null){console.warn(i),t.isSuspended.value=true;const u=n();return u.muted=true,a.play()}throw i.name==="AbortError"?(console.warn(i),i):(console.error("native player play error",i),t.loadError.value=i,i)})},pause:()=>{const o=n();return t.paused.value=true,o.pause(),Promise.resolve()},togglePlay:()=>t.paused.value?a.play():a.pause(),setPlaybackRate:o=>{const i=n();t.playbackRate.value=o,i.playbackRate=o;},setVolume:o=>{const i=n();t.volume.value=o,i.volume=o/100;},setMute:o=>{const i=n();t.muted.value=o,i.muted=o;},toggleMute:()=>{a.setMute(!t.muted.value),t.isSuspended.value&&(t.isSuspended.value=false);},resumeSuspended:async()=>{const o=n();o.muted=false,t.isSuspended.value=false;},setAutoPlay:o=>{const i=n();t.autoPlay.value=o,i.autoplay=o;},seek:async o=>new Promise(i=>{const u=n();u.currentTime=o,t.currentTime.value=o,u.src?X(u,"seeked",()=>{i();}):i();}),on:(o,i)=>{watch(e,u=>{if(u)switch(o){case "canplay":u.addEventListener("canplay",i);break;case "timeupdate":u.addEventListener("timeupdate",()=>{i(u.currentTime);});break;case "seeking":u.addEventListener("seeking",()=>{i(u.currentTime);});break;case "seeked":u.addEventListener("seeked",()=>{i(u.currentTime);});break;default:u.addEventListener(o,i);}},{once:true});},destroy:()=>{const o=e.value;return o&&(o.pause(),o.currentTime=0,o.src="",o.load(),o.remove(),t.reset(),e.value=undefined),Promise.resolve()}};return {...t,...a,renderElementRef:e,type:re.Native}}const vs={autoStartLoad:true,maxBufferLength:1200,lowLatencyMode:true,startPosition:-1,debug:false};function bs(s){const e=shallowRef(null),t=ha(),n=()=>{if(!e.value)throw new Error("Hls is not initialized");return e.value},a={...t,init:async(o,i={})=>{await t.init(o),e.value=new $n({...vs,...s.rootProps.hlsConfig,...i});},load:o=>{const i=t.getRenderElement(),u=n();return u.loadSource(o),u.attachMedia(i),i.muted=t.muted.value,i.playbackRate=t.playbackRate.value,i.volume=t.volume.value/100,new Promise((d,p)=>{X(i,"loadedmetadata",()=>{t.duration.value=i.duration,d(),t.autoPlay.value&&t.play();}),X(i,"error",f=>{t.loadError.value=new Error("NotSupportedError"),p(t.loadError.value);});})},destroy:()=>(e.value&&(e.value.destroy(),e.value=null),t.destroy())};return {...t,...a,type:re.Hls}}function ct(s,e){const t=s(e),n=()=>{};t.on("canplay",e.rootProps.onCanplay??n),t.on("timeupdate",e.rootProps.onTimeupdate??n),t.on("seeking",e.rootProps.onSeeking??n),t.on("seeked",e.rootProps.onSeeked??n);const a=[Md(e.rootPropsVm.muted,t.muted),Md(e.rootPropsVm.playbackRate,t.playbackRate),Md(e.rootPropsVm.volume,t.volume),Md(e.rootPropsVm.autoPlay,t.autoPlay)],o=()=>{a.forEach(i=>{i();});};return Od({...t,adjustVolume:i=>{const u=Math.min(Math.max(0,t.volume.value+i),100);t.setVolume(u);},skip:(i,u=false)=>{const d=u?i*t.duration.value:t.currentTime.value+i,p=Math.min(Math.max(0,d),t.duration.value);t.seek(p);},destroy:async()=>{o(),await t.destroy();}})}function gs(s){let e=false;return {switchDriver:async n=>{if(e){console.warn("播放器核心正在切换中，忽略此次请求");return}e=true;try{switch(s.playerCore.value&&(console.log("正在销毁现有播放器核心:",s.playerCore.value.type),await s.playerCore.value.destroy(),s.playerCore.value=void 0),await new Promise(a=>setTimeout(a,0)),console.log("正在创建新的播放器核心:",n),n){case re.Native:s.playerCore.value=ct(ha,s);break;case re.Hls:s.playerCore.value=ct(bs,s);break;case re.AvPlayer:s.playerCore.value=ct(ms,s);break;default:throw new Error(`Unsupported video type: ${n}`)}}catch(a){throw console.error("切换视频驱动失败:",a),a}finally{e=false;}}}}const ys="material-symbols:restart-alt-rounded",hs="material-symbols:pip-rounded",ws="material-symbols:pip-exit-rounded",_s="material-symbols:settings-rounded",wa="material-symbols:pause-rounded",_a="material-symbols:play-arrow-rounded",ks="lucide:atom",xs="material-symbols:audio-file",Cs="line-md:loading-loop",Ps="material-symbols:fast-forward-rounded",$s="material-symbols:fast-rewind-rounded",Ts="material-symbols:rotate-left-rounded",Ss="material-symbols:rotate-right-rounded",Is="material-symbols:block",ka="gis:flip-h",xa="gis:flip-v",Rs="material-symbols:location-on-rounded",Es="material-symbols:rocket-launch-rounded",Ms="material-symbols:rotate-right-rounded",Ca="material-symbols:subtitles-rounded",Pa="material-symbols:subtitles-off-rounded",As="material-symbols:timer-rounded",Ls="material-symbols:volume-off-rounded",Os="material-symbols:volume-mute-rounded",Fs="material-symbols:volume-down-rounded",Bs="material-symbols:volume-up-rounded",$a="material-symbols:analytics-outline",Ta="material-symbols:keyboard-outline",Sa="material-symbols:info-outline",Ns="mdi:color",Vs="material-symbols:error",Ia="mdi:login",Ds="mdi:logout",js="material-symbols:visibility-rounded",Us="material-symbols:visibility-off-rounded",Yt="mdi:crown";function Fe(s=0,e=false){return e?Ls:s===0?Os:s<50?Fs:Bs}function Hs(s){const e=ref(false),t=shallowRef({x:0,y:0}),n=ref(false),a=ref(false),o=[{id:"about",label:"关于",icon:Sa,action:()=>{n.value=true,e.value=false;}},{id:"shortcuts",label:"快捷键",icon:Ta,action:()=>{a.value=true,e.value=false;}},{id:"statistics",label:"Statistics",icon:$a,action:()=>{s.statistics.toggleVisible(),e.value=false;}}],i=(p,f)=>{var g;const v=(g=s.refs.rootRef.value)==null?undefined:g.getBoundingClientRect();v?t.value={x:p-v.left,y:f-v.top}:t.value={x:p,y:f},e.value=true;};return {visible:e,position:t,menuItems:o,showAbout:n,showShortcuts:a,show:i,hide:()=>{e.value=false;},handleContextMenu:p=>{p.preventDefault(),i(p.clientX,p.clientY);}}}const zs=1e3,qs=200,Ws=30,Gs=1e3;function Ks(s){const e=shallowRef(null),t=shallowRef(true),n=shallowRef(0),a=computed(()=>n.value>0),o=shallowRef(false);let i=null,u=null;const d=computed(()=>{var T;return (T=e.value)==null?undefined:T.offsetHeight}),p=()=>{t.value=true;},f=()=>{t.value=false;},v=()=>{i&&(clearTimeout(i),i=null);},g=()=>{a.value||f();},M=()=>{a.value||(v(),i=window.setTimeout(g,zs));},$=()=>{n.value++,n.value===1&&v();},y=()=>{n.value=Math.max(0,n.value-1);},P=T=>{T?$():y();},x=T=>{o.value=T;},b=(T=Gs)=>{u&&clearTimeout(u),o.value=true,v(),u=window.setTimeout(()=>{o.value=false,M();},T);},m=Ai$1(()=>{p(),M();},qs),k=_i$1(()=>{o.value||(v(),f());},Ws);return watch([t,d],()=>{s.cssVar&&(t.value?s.cssVar.safeAreaBottom.value=`${d.value}px`:s.cssVar.safeAreaBottom.value="0px");}),X(s.refs.rootRef,"mousemove",m),X(s.refs.rootRef,"mouseleave",k),onUnmounted(()=>{v();}),{visible:t,mainRef:e,disabledHideOnMouseLeave:o,disabledAutoHide:a,setDisabledAutoHide:P,setDisabledHideOnMouseLeave:x,lockControlsWithTimeoutUnlock:b,addDisabledAutoHide:$,removeDisabledAutoHide:y,startAutoHideTimer:M,stopAutoHideTimer:v}}function Ys(s){const t={safeAreaBottom:"--x-player-safe-area-bottom"};return {safeAreaBottom:Ud(t.safeAreaBottom,s.refs.rootRef,{initialValue:"0px"}),keys:t}}function Xs(s){const e=s.rootPropsVm.showPlaylist,t=shallowRef(false),n=shallowRef(false),a=()=>{t.value=!!document.fullscreenElement;},o=async()=>{s.controls.lockControlsWithTimeoutUnlock();try{document.fullscreenElement?(await document.exitFullscreen(),n.value&&(e.value=!0)):(window.scrollTo(0,0),await document.documentElement.requestFullscreen(),n.value=e.value,e.value&&(e.value=!1));}catch(u){console.error("Failed to toggle fullscreen:",u);}},i=async()=>{const u=!e.value;e.value=u;};return X(document,"fullscreenchange",a),X(document,"webkitfullscreenchange",a),X(document,"mozfullscreenchange",a),X(document,"MSFullscreenChange",a),{showPlaylist:e,isFullscreen:t,toggleFullscreen:o,toggleShowSider:i}}const Le={Shift:"Shift",Alt:"Alt",Control:"Control",Meta:"Meta"},V={sapce:" ",arrowLeft:"ArrowLeft",arrowRight:"ArrowRight",arrowUp:"ArrowUp",arrowDown:"ArrowDown",w:"w",a:"a",b:"b",s:"s",d:"d",c:"c",f:"f",p:"p",m:"m",W:"W",A:"A",B:"B",S:"S",D:"D",C:"C",F:"F",P:"P",M:"M",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","-":"-","=":"=","[":"[","]":"]","\\":"\\",h:"h",j:"j",k:"k",l:"l",H:"H",J:"J",K:"K",L:"L",r:"r",R:"R"},Be={progress:{keys:[V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],V[8],V[9]],name:"进度跳转",keydown:(s,e)=>{var o;const t=e.key,n=Number(t),a=n/10;(o=s.playerCore.value)==null||o.skip(a,true),s.hud&&s.hud.showProgressJump(n);}},fastBackward:{keys:[V.arrowLeft,V.a,V.A],name:"快退",allowRepeat:true,keydown:s=>{var e,t;(e=s.playerCore.value)==null||e.skip(-5),(t=s.hud)==null||t.showFastJumpHud(-1);}},fastForward:{keys:[V.arrowRight,V.d,V.D],name:"快进",allowRepeat:true,keydown:async(s,e)=>{var t,n,a,o,i;if(e.repeat){(t=s.playbackRate)!=null&&t.fastForward.value||(n=s.playbackRate)==null||n.startLongPressFastForward(),(a=s.hud)==null||a.showLongPressFastForward();return}(o=s.playerCore.value)==null||o.skip(5),(i=s.hud)==null||i.showFastJumpHud(1);},keyup:async s=>{var e,t,n;(e=s.playbackRate)!=null&&e.fastForward.value&&((t=s.playbackRate)==null||t.stopLongPressFastForward(),(n=s.hud)==null||n.clear());}},playbackRateUp:{keys:[V.arrowUp,V.w,V.W],name:"播放速度增大",allowRepeat:true,keydown:async s=>{var e,t;(e=s.playbackRate)==null||e.up(),(t=s.hud)==null||t.showPlaybackRate();}},playbackRateDown:{keys:[V.arrowDown,V.s,V.S],name:"播放速度减小",allowRepeat:true,keydown:(s,e)=>{var t,n,a,o;e.repeat?((t=s.playbackRate)==null||t.downWithLowerLimit(),(n=s.hud)==null||n.showPlaybackRate()):((a=s.playbackRate)==null||a.down(),(o=s.hud)==null||o.showPlaybackRate());}},volumeUp:{keys:[V["="]],name:"音量增大",allowRepeat:true,keydown:s=>{var e,t;(e=s.playerCore.value)==null||e.adjustVolume(5),(t=s.hud)==null||t.showVolume();}},volumeDown:{keys:[V["-"]],name:"音量减小",allowRepeat:true,keydown:s=>{var e,t;(e=s.playerCore.value)==null||e.adjustVolume(-5),(t=s.hud)==null||t.showVolume();}},togglePlay:{keys:[V.sapce],name:"播放/暂停",keydown:s=>{var e;(e=s.playerCore.value)==null||e.togglePlay();}},toggleMute:{keys:[V.m],name:"切换静音",keydown:s=>{var e,t,n,a,o;if((e=s.playerCore.value)!=null&&e.isSuspended){(t=s.playerCore.value)==null||t.resumeSuspended(),(n=s.hud)==null||n.showResumeSuspended();return}(a=s.playerCore.value)==null||a.toggleMute(),(o=s.hud)==null||o.showMute();}},toggleSubtitle:{keys:[V.c,V.C],name:"切换字幕",keydown:s=>{var e,t,n;(e=s.subtitles)!=null&&e.loading.value||!((t=s.subtitles)!=null&&t.ready.value)||(n=s.subtitles)==null||n.toggleEnabled();}},toggleFullscreen:{keys:[V.f,V.F],name:"切换全屏",keydown:s=>{var e;(e=s.fullscreen)==null||e.toggleFullscreen();}},toggleShowSider:{keys:[V.b,V.B],name:"切换播放列表",keydown:s=>{var e;(e=s.fullscreen)==null||e.toggleShowSider();}},togglePictureInPicture:{keys:[V.p,V.P],name:"切换画中画",keydown:s=>{var e;(e=s.pictureInPicture)==null||e.toggle();}},rotateLeft:{keys:[V["["],V.l,V.L],name:"向左旋转",keydown:s=>{var e;(e=s.transform)==null||e.left();}},rotateRight:{keys:[V["]"],V.r,V.R],name:"向右旋转",keydown:s=>{var e;(e=s.transform)==null||e.right();}},resetRotation:{keys:[V["\\"]],name:"重置旋转",keydown:s=>{var e;(e=s.transform)==null||e.normal();}},toggleFlipX:{keys:[V.h,V.H],name:"水平翻转",keydown:s=>{var e;(e=s.transform)==null||e.toggleFlipX();}},toggleFlipY:{keys:[V.j,V.J],name:"垂直翻转",keydown:s=>{var e;(e=s.transform)==null||e.toggleFlipY();}}};function Qs(){return Be}function Js(s){return new Set(s.split("+").filter(e=>e!==""))}function Zs(s){const e=[s.altKey?Le.Alt:null,s.shiftKey?Le.Shift:null,s.ctrlKey?Le.Control:null,s.metaKey?Le.Meta:null].filter(t=>!!t);return new Set([...e,s.key])}function el(s,e){return s.size===e.size&&Array.from(e).every(t=>s.has(t))}function Xt(s){const e=Zs(s);for(const t of Object.values(Be))for(const n of t.keys){const a=Js(n);if(el(e,a))return {key:n,config:t}}return null}function tl(s){const e=a=>{var d,p,f;const o=a;if(!o)return  false;const i=(d=o.tagName)==null?undefined:d.toLowerCase();return i==="input"||i==="textarea"||i==="select"||o.isContentEditable||((p=o.getAttribute)==null?undefined:p.call(o,"role"))==="textbox"?true:!!((f=o.closest)!=null&&f.call(o,'[contenteditable="true"]'))},t=a=>{var i;if(e(a.target))return;const o=Xt(a);if(o!=null&&o.key){if((i=s.popupManager)!=null&&i.hasOpenPopup.value&&o.config===Be.progress||(a.preventDefault(),a.repeat&&!o.config.allowRepeat))return;o.config.keydown(s,a,o);}},n=a=>{var i,u,d;if(e(a.target))return;const o=Xt(a);if(o!=null&&o.key){if((i=s.popupManager)!=null&&i.hasOpenPopup.value&&o.config===Be.progress)return;a.preventDefault(),(d=(u=o.config).keyup)==null||d.call(u,s,a,o);}};X("keydown",t),X("keyup",n);}function dt(s){return s.toString().padStart(2,"0")}function we(s){if(Number.isNaN(s)||s===undefined)return "--:--";const e=Math.floor(s/3600),t=Math.floor(s%3600/60),n=Math.floor(s%60);return `${e>0?`${dt(e)}:`:""}${dt(t)}:${dt(n)}`}const Qt={Fast:500,Normal:1500,Long:2e3};function al(s){const e=shallowRef(null);let t=null;const n=computed(()=>e.value?[e.value]:[]),a=$=>{const y=Date.now(),P=$.duration||Qt.Normal;t!==null&&(clearTimeout(t),t=null),e.value={...$,timestamp:y},t=window.setTimeout(()=>{e.value=null,t=null;},P);},o=()=>{t!==null&&(clearTimeout(t),t=null),e.value=null;},i=()=>s.playerCore.value&&s.playerCore.value.duration>0?s.playerCore.value.currentTime/s.playerCore.value.duration*100:0,u=$=>{var k;const y=$/10,P=y*(((k=s.playerCore.value)==null?undefined:k.duration)||0),x=Math.floor(P/60),b=Math.floor(P%60),m=`${x}:${b.toString().padStart(2,"0")}`;a({title:$===0?"跳转到开头":`跳转到 ${$}0%`,icon:Rs,value:m,progress:{max:100,min:0,value:y*100}});},d=()=>{var P,x,b;const $=(P=s.playerCore.value)==null?undefined:P.volume,y=Fe(((x=s.playerCore.value)==null?undefined:x.volume)??0,((b=s.playerCore.value)==null?undefined:b.muted)??false);a({title:"音量",icon:y,value:`${$}`,progress:{value:$,max:100,min:0}});},p=()=>{var x,b;const $=(x=s.playerCore.value)==null?undefined:x.muted,y=Fe(((b=s.playerCore.value)==null?undefined:b.volume)??0,$??false);a({icon:y,value:$?"静音":"取消静音"});},f=()=>{var y,P;const $=Fe(((y=s.playerCore.value)==null?undefined:y.volume)??0,((P=s.playerCore.value)==null?undefined:P.muted)??false);a({icon:$,value:"音频已恢复"});},v=()=>{var y;const $=(y=s.playerCore.value)==null?undefined:y.playbackRate;$&&a({title:"播放速度",icon:As,value:$});};if(s.subtitles){const{current:$}=s.subtitles;watch($,y=>{const P=y?y.label:"关闭";a({title:"字幕",icon:y?Ca:Pa,value:P});});}if(s.transform){const{rotate:$,flipX:y,flipY:P}=s.transform;watch($,(x,b)=>{b!==undefined&&a({title:"旋转",icon:Ms,value:`${x}°`});}),watch(y,x=>{a({title:"水平翻转",icon:ka,value:x?"开启":"关闭",iconClass:x?"text-base-content":"text-base-content/70"});}),watch(P,x=>{a({title:"垂直翻转",icon:xa,value:x?"开启":"关闭",iconClass:x?"text-base-content":"text-base-content/70"});});}const g=$=>{var x;const y=i();a({title:$===1?"快进":"快退",value:we(((x=s.playerCore.value)==null?undefined:x.currentTime)||0),icon:$===1?Ps:$s,progress:{max:100,min:0,value:y},duration:Qt.Fast});},M=()=>{var y;const $=i();a({title:"快速播放",icon:Es,value:`${we(((y=s.playerCore.value)==null?undefined:y.currentTime)||0)}`,progress:{max:100,min:0,value:$}});};return onUnmounted(()=>{t!==null&&(clearTimeout(t),t=null);}),{messages:n,show:a,clear:o,showProgressJump:u,showFastJumpHud:g,showMute:p,showPlaybackRate:v,showVolume:d,showLongPressFastForward:M,showResumeSuspended:f}}function nl(s){const e=shallowRef(!!document.pictureInPictureElement),t="pictureInPictureEnabled"in document,n=()=>{var u;return (u=s.playerCore.value)==null?undefined:u.getRenderElement()},a=async()=>{try{if(e.value&&document.pictureInPictureElement)await document.exitPictureInPicture();else {const u=await n();if(u)if(u instanceof HTMLVideoElement)await u.requestPictureInPicture();else throw new TypeError("Not supported element")}}catch(u){console.error("Failed to toggle picture in picture:",u);}},o=async()=>{e.value&&document.pictureInPictureElement&&await document.exitPictureInPicture();},i=()=>{e.value=!!document.pictureInPictureElement;};return X(document,"enterpictureinpicture",i),X(document,"leavepictureinpicture",i),{isSupport:t,isPip:e,toggle:a,close:o}}function sl(s){const a=shallowRef([.3,.5,.7,1,1.3,1.5,1.7,2,3,5,10,15]),o=s.rootPropsVm.playbackRate,i=computed(()=>a.value.findIndex(P=>P===o.value)??-1),u=shallowRef(false),d=P=>{var x;(x=s.playerCore.value)==null||x.setPlaybackRate(P);},p=P=>{if(P<0||P>=a.value.length)return;const x=a.value[P];d(x);},f=()=>{p(i.value+1);},v=()=>{p(i.value-1);},g=()=>{o.value<=1||p(i.value-1);},M=shallowRef(1);return {MIN_RATE:.3,MAX_RATE:15,NORMAL_RATE:1,current:o,rateOptions:a,fastForward:u,set:d,up:f,down:v,downWithLowerLimit:g,startLongPressFastForward:()=>{!s.playerCore.value||u.value||(u.value=true,d(15),M.value=o.value,s.playerCore.value.paused&&s.playerCore.value.play());},stopLongPressFastForward:()=>{s.playerCore.value&&(u.value=false,d(M.value));}}}function ll(s){const e=()=>{s.rootPropsVm.autoPlay.value=!s.rootPropsVm.autoPlay.value;};return {autoPlay:s.rootPropsVm.autoPlay,toggleAutoPlay:e}}function ol(s){const e=reactive(new Map),t=new Set,n=(p,f)=>{e.set(p,f);},a=p=>{e.delete(p);},o=(p,f)=>{const v=e.get(p);v&&(v.visible=f);},i=computed(()=>Array.from(e.values()).some(p=>p.visible&&p.allowPreventControlsClose)),u=p=>{t.add(p);},d=p=>{t.delete(p);};return watch(i,p=>{p?(s.controls.addDisabledAutoHide(),s.controls.setDisabledHideOnMouseLeave(true)):(s.controls.removeDisabledAutoHide(),s.controls.setDisabledHideOnMouseLeave(false));}),{hasOpenPopup:i,disabledBubblingElements:t,registerPopup:n,unregisterPopup:a,setPopupVisible:o,addDisabledBubblingElement:u,removeDisabledBubblingElement:d}}function rl(s){const e=shallowRef(false),t=shallowRef(false);let n=null;const a=300;return watch(e,(i,u)=>{i&&!u?n=setTimeout(()=>{t.value=true;},a):!i&&u&&(n&&(clearTimeout(n),n=null),t.value=false);}),{isDragging:e,isLongPressDragging:t,waitDragEnd:()=>new Promise(i=>{const u=watch(e,d=>{d||(i(true),u());});})}}const pt={mp4:"mp4",m3u8:"m3u8",m2ts:"m2ts",ts:"ts",flv:"flv",avi:"avi",mkv:"mkv",rmvb:"rmvb",mov:"mov",webm:"webm",iso:"iso",unknown:"unknown"};function il(s){const e=s.refs.playerElementRef,t=s==null?undefined:s.playerCore,n=s.rootProps.sources,a=ref(null),o=shallowRef(false),i=shallowRef(false),u=()=>n.value.find(y=>y.type==="hls"),d=y=>y.type==="hls"?re.Hls:[pt.mkv].includes(y.extension)?re.AvPlayer:re.Native,p=async(y,P,x)=>{var b,m;if(!s.driver)throw new Error("videoDriver is not found");a.value=y;try{if(await((b=s.driver)==null?void 0:b.switchDriver(P??d(y))),!t.value)throw new Error("player is not found");if(!e.value)throw new Error("playerElementRef is not found");await t.value.init(e.value),await t.value.load(y.url,x??0);}catch(k){if(k instanceof DOMException&&k.name==="AbortError")return;if(k instanceof Error){const T=u();T&&((m=t==null?undefined:t.value)==null?undefined:m.type)!==re.Hls&&await p(T,undefined,x??0);return}throw k}},f=async y=>{if(!t.value)throw new Error("player is not found");const P=t.value.currentTime||0;await p(y),t.value.seek(P);},v=()=>{o.value=true,t.value&&t.value.destroy().catch(y=>console.error("销毁播放器失败:",y));},g=()=>{o.value=false,p(a.value);},$=_i$1(async y=>{var P,x;if(i.value){console.warn("正在切换播放器核心，忽略此次操作");return}if(!a.value)throw new Error("当前没有视频源");i.value=true;try{const b=((P=t.value)==null?void 0:P.currentTime)||0,m=((x=t.value)==null?void 0:x.paused)??!0;t.value&&!t.value.paused&&await t.value.pause(),await p(a.value,y),t.value&&(await t.value.seek(b),m||await t.value.play());}finally{i.value=false;}},300);return watch(n,async()=>{var y;if(o.value=false,n.value.length===0){await((y=s.playerCore.value)==null?undefined:y.destroy());return}await p(n.value[0],undefined,toValue(s.rootProps.lastTime));},{immediate:true,deep:true}),{list:n,current:a,changeQuality:f,interruptSource:v,resumeSource:g,isInterrupt:o,isSwitching:i,switchPlayerCore:$}}function ul(){const s=shallowRef(false);return {visible:s,toggleVisible:()=>{s.value=!s.value;}}}function cl(s){const e=ref(false),t=ref(null),n=ref(null),a=computed(()=>{var f,v;return ((f=s.rootProps.subtitles.value)==null?undefined:f.find(g=>g.default))??((v=s.rootProps.subtitles.value)==null?undefined:v[0])??null}),o=f=>{var v,g;f&&(n.value=f),t.value=f,(g=(v=s.rootProps).onSubtitleChange)==null||g.call(v,f);},i=()=>{t.value?o(null):n.value?o(n.value):o(a.value??null);},u=f=>{const v=f.find(g=>g.default)??f[0];v&&o(v);},d=()=>{t.value&&o(t.value);};watch(s.rootProps.subtitles,f=>{e.value=true,f&&u(f);}),watch(()=>{var f;return (f=s.source)==null?undefined:f.current},f=>{f&&d();});const p=f=>{try{const v=f.detail;if(v&&v.loggedIn===!1)o(null),n.value=null;else if(v&&v.loggedIn===!0){const g=s.rootProps.subtitles.value??[];if(!t.value&&g.length>0){const M=g.find($=>$.default)??g[0];M&&o(M);}}}catch{}};return onMounted(()=>{window.addEventListener("backend-auth-changed",p);}),onUnmounted(()=>{window.removeEventListener("backend-auth-changed",p);}),{list:s.rootProps.subtitles,loading:s.rootProps.subtitlesLoading,ready:s.rootProps.subtitlesReady,current:t,change:o,toggleEnabled:i,restoreCurrentSubtitle:d}}function dl(s){const e=()=>{s.rootPropsVm.autoLoadThumbnails.value=!s.rootPropsVm.autoLoadThumbnails.value;},t=n=>{s.rootPropsVm.thumbnailsSamplingInterval.value=n;};return {autoLoadThumbnails:s.rootPropsVm.autoLoadThumbnails,samplingInterval:s.rootPropsVm.thumbnailsSamplingInterval,toggleAutoLoad:e,setSamplingInterval:t}}function pl(s,e,t,n,a){const o=s/e,i=a*Math.PI/180,u=Math.abs(Math.cos(i)),d=Math.abs(Math.sin(i)),p=t*u+n*d,f=t*d+n*u,v=t/p,g=n/f;return o>1?Math.min(v,g):Math.max(v,g)}function fl(s){const n=shallowRef(0),a=shallowRef(false),o=shallowRef(false),i=zd(s.refs.playerElementRef),u=computed(()=>{var P,x;return pl(((P=s.playerCore.value)==null?undefined:P.videoWidth)??16,((x=s.playerCore.value)==null?undefined:x.videoHeight)??9,i.width.value,i.height.value,n.value)}),d=computed(()=>({transform:[`rotate(${n.value}deg)`,`scale(${u.value*(a.value?-1:1)}, ${u.value*(o.value?-1:1)})`,"translateZ(0)"].join(" ")})),p=computed(()=>n.value===-270),f=computed(()=>n.value===270);return {rotate:n,flipX:a,flipY:o,left:()=>{if(n.value<=-270)return;const P=n.value-90;n.value=Math.max(P,-270);},right:()=>{if(n.value>=270)return;const P=n.value+90;n.value=Math.min(P,270);},normal:()=>{n.value=0,a.value=false,o.value=false;},toggleFlipX:()=>{a.value=!a.value;},toggleFlipY:()=>{o.value=!o.value;},isLeftDisabled:p,isRightDisabled:f,transformStyle:d}}function ml(s){const e="video-enhance",t=s.rootPropsVm.disabledHDR,n={sharpness:0,brightness:0,contrast:0,highlights:0,shadows:0,colorTemp:0,saturation:0,hue:0,skinWhitening:0,skinRange:5},a=reactive({...n}),o=computed(()=>Object.keys(n).some(b=>a[b]!==n[b])),i=computed(()=>{if(a.brightness===0)return {type:"gamma",amplitude:1,exponent:1,offset:0};const b=a.brightness/100,m=Math.abs(b);if(b>0){const E=1-m*.4,B=1+m*.45,R=-m*.05;return {type:"gamma",amplitude:B,exponent:Math.max(.3,E),offset:R}}const k=1+m*.4,T=1-m*.45,S=-m*.01;return {type:"gamma",amplitude:T,exponent:Math.min(2,k),offset:S}}),u=computed(()=>{if(a.contrast===0)return {type:"linear",slope:1,intercept:0};const b=a.contrast/100;if(b>0){const T=1+b*.8,S=(1-T)*.5;return {type:"linear",slope:Math.min(2.5,T),intercept:Math.max(-0.5,S)}}const m=1+b*.6,k=(1-m)*.5;return {type:"linear",slope:Math.max(.2,m),intercept:Math.min(.4,k)}}),d=computed(()=>{if(a.highlights===0)return {type:"linear",slope:1,intercept:0,tableValues:null};const b=a.highlights/100,m=Math.abs(b)*.5,k=[];for(let T=0;T<=255;T++){const S=T/255;let E=S,B=0;if(S>.2&&(B=((S-.2)*1.5)**1.5),b>0){const R=m*B*.4;E=S+R;}else {const R=m*B*.4;E=S-R;}E=Math.max(0,Math.min(1,E)),k.push(E.toFixed(4));}return {type:"table",slope:1,intercept:0,tableValues:k.join(" ")}}),p=computed(()=>{if(a.shadows===0)return {type:"linear",slope:1,intercept:0,tableValues:null};const b=a.shadows/100,m=Math.abs(b)*.5,k=[];for(let T=0;T<=255;T++){const S=T/255;let E=S,B=0;if(S<.5&&(B=(1-S*2)**1.2),b>0){const R=m*B*.3;E=S+R;}else {const R=m*B*.3;E=S-R;}E=Math.max(0,Math.min(1,E)),k.push(E.toFixed(4));}return {type:"table",slope:1,intercept:0,tableValues:k.join(" ")}}),f=computed(()=>{if(a.saturation===0)return `1 0 0 0 0
          0 1 0 0 0
          0 0 1 0 0
          0 0 0 1 0`;const b=a.saturation/100;let m;b>0?m=1+Math.sqrt(b)*.8:m=1+b*.9,m=Math.max(.05,Math.min(2.2,m));const k=.2126,T=.7152,S=.0722,E=k*(1-m),B=T*(1-m),R=S*(1-m),w=E+m,_=B,A=R,z=E,J=B+m,N=R,q=E,ie=B,pe=R+m;let Q=1;m>1.3&&(Q=1-(m-1.3)*.1);const U=w*Q,se=_*Q,me=(m-1)*.001;return `${U.toFixed(4)} ${se.toFixed(4)} ${A.toFixed(4)} 0 ${me.toFixed(4)}
        ${z.toFixed(4)} ${J.toFixed(4)} ${N.toFixed(4)} 0 ${me.toFixed(4)}
        ${q.toFixed(4)} ${ie.toFixed(4)} ${pe.toFixed(4)} 0 ${me.toFixed(4)}
        0 0 0 1 0`}),v=computed(()=>{if(a.hue===0)return `1 0 0 0 0
          0 1 0 0 0
          0 0 1 0 0
          0 0 0 1 0`;const b=a.hue/100,m=Math.abs(b)*.4;if(b>0){const w=1+m*.12,_=1-m*.08,A=1+m*.06,z=m*.01,J=-m*.015,N=m*.005;return `${w.toFixed(4)} 0 0 0 ${z.toFixed(4)}
          0 ${_.toFixed(4)} 0 0 ${J.toFixed(4)}
          0 0 ${A.toFixed(4)} 0 ${N.toFixed(4)}
          0 0 0 1 0`}const k=1-m*.1,T=1+m*.08,S=1-m*.05,E=-m*.01,B=m*.01,R=-m*.005;return `${k.toFixed(4)} 0 0 0 ${E.toFixed(4)}
        0 ${T.toFixed(4)} 0 0 ${B.toFixed(4)}
        0 0 ${S.toFixed(4)} 0 ${R.toFixed(4)}
        0 0 0 1 0`}),g=computed(()=>{const b=a.colorTemp;if(b===0)return `1 0 0 0 0
          0 1 0 0 0
          0 0 1 0 0
          0 0 0 1 0`;const m=b/100,k=Math.abs(m)*.3;let T=1,S=1,E=1;m>0?(T=1+k*.8,S=1+k*.3,E=1-k*.6):(T=1-k*.4,S=1-k*.1,E=1+k*.6);const B=1,R=.2126*T+.7152*S+.0722*E,w=B/R;return T*=w,S*=w,E*=w,T=Math.max(.5,Math.min(2,T)),S=Math.max(.5,Math.min(2,S)),E=Math.max(.5,Math.min(2,E)),`${T} 0 0 0 0
        0 ${S} 0 0 0
        0 0 ${E} 0 0
        0 0 0 1 0`}),M=computed(()=>a.sharpness===0?{enabled:false,amount:0}:{enabled:true,amount:a.sharpness/100*2}),$=computed(()=>{if(a.skinWhitening===0)return {enabled:false,midtoneGamma:1,midtoneGain:1,colorMatrix:`1 0 0 0 0
               0 1 0 0 0
               0 0 1 0 0
               0 0 0 1 0`};const b=a.skinWhitening/100,m=a.skinRange/10,k=1-b*.15*m,T=Math.max(.8,k),S=1+b*.05,E=1+b*.005,B=1-b*.008,R=1+b*.003,w=`${E.toFixed(4)} 0 0 0 0
               0 ${B.toFixed(4)} 0 0 0
               0 0 ${R.toFixed(4)} 0 0
               0 0 0 1 0`;return {enabled:true,midtoneGamma:Number.parseFloat(T.toFixed(4)),midtoneGain:Number.parseFloat(S.toFixed(4)),colorMatrix:w}}),y=computed(()=>{const b=i.value,m=u.value,k=d.value,T=p.value,S=M.value,E=$.value;return `
      <svg width="0" height="0" style="position: absolute;">
        <defs>
          <!-- 调色滤镜组合 - 标准工作流程 -->
          <filter id="${e}" color-interpolation-filters="auto">
            <!-- 第1步：基础亮度调整 - 使用伽马校正 + Lift-Gamma-Gain模型 -->
            <feComponentTransfer result="brightness">
              <feFuncR type="gamma" amplitude="${b.amplitude}" exponent="${b.exponent}" offset="${b.offset}" />
              <feFuncG type="gamma" amplitude="${b.amplitude}" exponent="${b.exponent}" offset="${b.offset}" />
              <feFuncB type="gamma" amplitude="${b.amplitude}" exponent="${b.exponent}" offset="${b.offset}" />
              <feFuncA type="identity" />
            </feComponentTransfer>
            
            <!-- 第2步：对比度调整 -->
            <feComponentTransfer result="contrast" in="brightness">
              <feFuncR type="linear" slope="${m.slope}" intercept="${m.intercept}" />
              <feFuncG type="linear" slope="${m.slope}" intercept="${m.intercept}" />
              <feFuncB type="linear" slope="${m.slope}" intercept="${m.intercept}" />
              <feFuncA type="identity" />
            </feComponentTransfer>

            <!-- 第3步：高光调整 - 选择性亮部控制 -->
            <feComponentTransfer result="highlights" in="contrast">
              ${k.tableValues?`<feFuncR type="table" tableValues="${k.tableValues}" />
                <feFuncG type="table" tableValues="${k.tableValues}" />
                <feFuncB type="table" tableValues="${k.tableValues}" />`:`<feFuncR type="linear" slope="1" intercept="0" />
                <feFuncG type="linear" slope="1" intercept="0" />
                <feFuncB type="linear" slope="1" intercept="0" />`}
              <feFuncA type="identity" />
            </feComponentTransfer>

            <!-- 第4步：阴影调整 - 选择性暗部控制 -->
            <feComponentTransfer result="shadows" in="highlights">
              ${T.tableValues?`<feFuncR type="table" tableValues="${T.tableValues}" />
                <feFuncG type="table" tableValues="${T.tableValues}" />
                <feFuncB type="table" tableValues="${T.tableValues}" />`:`<feFuncR type="linear" slope="1" intercept="0" />
                <feFuncG type="linear" slope="1" intercept="0" />
                <feFuncB type="linear" slope="1" intercept="0" />`}
              <feFuncA type="identity" />
            </feComponentTransfer>
            
            <!-- 第5步：色温调整 - 色彩校正 -->
            <feColorMatrix
              result="colortemp"
              in="shadows"
              type="matrix"
              values="${g.value}"
            />
            
            <!-- 第6步：色调调整 - 色彩校正 -->
            <feColorMatrix
              result="hue"
              in="colortemp"
              type="matrix"
              values="${v.value}"
            />
            
            <!-- 第7步：饱和度调整 - 色彩分级 -->
            <feColorMatrix
              result="saturation"
              in="hue"
              type="matrix"
              values="${f.value}"
            />

            <!-- 第8步：连续美白 - 使用Gamma曲线实现平滑效果 -->
            ${E.enabled?`
            <!-- 步骤8.1: 中间调Gamma提升 - 自然选择肤色中间调 -->
            <feComponentTransfer result="midtoneLift" in="saturation">
              <feFuncR type="gamma" amplitude="${E.midtoneGain}" exponent="${E.midtoneGamma}" offset="0" />
              <feFuncG type="gamma" amplitude="${E.midtoneGain}" exponent="${E.midtoneGamma}" offset="0" />
              <feFuncB type="gamma" amplitude="${E.midtoneGain}" exponent="${E.midtoneGamma}" offset="0" />
              <feFuncA type="identity" />
            </feComponentTransfer>
            
            <!-- 步骤8.2: 精细色彩校正 -->
            <feColorMatrix
              result="skinWhitening"
              in="midtoneLift"
              type="matrix"
              values="${E.colorMatrix}"
            />`:`
            <feOffset result="skinWhitening" in="saturation" dx="0" dy="0" />`}

            <!-- 第9步：锐化 - 亮度保持不变的标准算法 -->
            ${S.enabled?`
            <!-- 创建模糊版本 -->
            <feGaussianBlur 
              result="blurred"
              in="skinWhitening"
              stdDeviation="1.0"
            />
            <!-- 标准Unsharp Mask：原图 + (原图 - 模糊图) * 强度 -->
            <!-- 第一步：计算高频细节 (原图 - 模糊图) -->
            <feComposite 
              result="highFreq"
              in="skinWhitening" 
              in2="blurred"
              operator="arithmetic"
              k1="0" 
              k2="1" 
              k3="-1" 
              k4="0"
            />
            <!-- 第二步：原图 + 高频细节 * 强度，保持亮度不变 -->
            <feComposite 
              result="final"
              in="skinWhitening" 
              in2="highFreq"
              operator="arithmetic"
              k1="0" 
              k2="1" 
              k3="${S.amount.toFixed(3)}" 
              k4="0"
            />`:`
            <feOffset result="final" in="skinWhitening" dx="0" dy="0" />`}
          </filter>
        </defs>
      </svg>
    `}),P=computed(()=>o.value?{filter:`url(#${e})`,"webkit-filter":`url(#${e})`}:t.value?{filter:"brightness(1)","webkit-filter":"brightness(1)"}:{});return {disabledHDR:t,filterName:e,colorParams:a,defaultParams:n,renderFilter:y,getFilterStyle:P,reset:()=>{Object.assign(a,n);}}}const Ra=Symbol("XPlayer");function vl(s,e,t){const n={refs:{rootRef:s.rootRef,playerElementRef:s.playerElementRef},rootEmit:t,rootProps:e,rootPropsVm:Hd(e,t),playerCore:ref()};n.driver=gs(n);const a=ol(n);n.popupManager=a;const o=sl(n);n.playbackRate=o;const i=Xs(n);n.fullscreen=i;const u=rl();n.progressBar=u;const d=Ks(n);n.controls=d;const p=cl(n);n.subtitles=p;const f=il(n);n.source=f;const v=tl(n);n.hotKey=v;const g=nl(n);n.pictureInPicture=g;const M=fl(n);n.transform=M;const $=dl(n);n.thumbnailSettings=$;const y=al(n);n.hud=y;const P=Ys(n);n.cssVar=P;const x=ml(n);n.videoEnhance=x;const b=ul();n.statistics=b;const m=Hs(n);n.contextMenu=m;const k=ll(n);return n.playSettings=k,provide(Ra,n),n}function Y(){const s=inject(Ra);if(!s)throw new Error("usePlayerContext must be used within a VideoPlayer component");return s}const Ea=Symbol("XPlayerPortal");function bl(){const e={container:ref()};return provide(Ea,e),e}function gl(){const s=inject(Ea);if(!s)throw new Error("usePortal must be used within a XPlayer component");return s}const Oe=new Set;function yl(s,e){return e?e.contains(s.target):false}const hl=defineComponent({inheritAttrs:false,__name:"index",props:{visible:{type:Boolean},x:{default:0},y:{default:0},trigger:{},placement:{},offset:{},outsideStopPropagation:{type:Boolean,default:false},allowPreventControlsClose:{type:Boolean,default:true}},emits:["update:visible","after-leave"],setup(s,{emit:e}){const t=s,n=e,a={popup:"x-popup bg-base-100/90 rounded-2xl p-2 border border-neutral-950 relative overflow-hidden"},{container:o}=gl(),{popupManager:i}=Y(),u=qi$1(t,"visible",n),d=shallowRef(),p=shallowRef({x:0,y:0}),f=computed(()=>o.value||"body"),v=computed(()=>typeof f.value=="string"?document.querySelector(f.value)??undefined:f.value),g=computed(()=>({left:`${p.value.x}px`,top:`${p.value.y}px`,position:o.value?"absolute":"fixed"})),M=Bd(v),$=`popup-${Math.random().toString(36).substr(2,9)}`;watch(u,m=>{i==null||i.setPopupVisible($,m);}),onMounted(()=>{i==null||i.registerPopup($,{visible:u.value,trigger:t.trigger,container:d.value,portalContainer:v.value,allowPreventControlsClose:t.allowPreventControlsClose});}),onUnmounted(()=>{i==null||i.unregisterPopup($);});function y(m,k,T){if(!m)return {x:t.x,y:t.y};if(!k||!T)return {x:0,y:0};const S=m.getBoundingClientRect(),E=k.getBoundingClientRect(),B=T.getBoundingClientRect(),R=S.left-B.left,w=S.width,_=S.top-B.top,A=S.bottom-B.top,z=B.height-A,J=_,N=t.offset??8;let q;t.placement==="top"||t.placement!=="bottom"&&z<E.height&&J>=E.height?q=_-E.height-N:q=A+N;let ie=R+w/2-E.width/2;return ie=Math.max(16,ie),ie=Math.min(ie,B.width-E.width-16),{x:ie,y:q}}function P(){const m=y(t.trigger,d.value,v.value);p.value=m;}const x=()=>{P();};watch(()=>M,()=>{u.value&&P();},{deep:true}),watch(()=>t.trigger,(m,k)=>{m&&!Oe.has(m)&&Oe.add(m),!m&&k&&Oe.has(k)&&Oe.delete(k);}),Rd(d,m=>{u.value&&(t.trigger&&yl(m,t.trigger)&&m.stopPropagation(),t.outsideStopPropagation&&m.stopPropagation(),i!=null&&i.disabledBubblingElements.has(m.target)&&m.stopPropagation(),u.value=false);});const b=()=>{n("after-leave");};return (m,k)=>(openBlock(),createBlock(Teleport,{to:f.value,disabled:!f.value},[createVNode(Transition,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0",onEnter:x,onAfterLeave:b},{default:withCtx(()=>[withDirectives(createElementVNode("div",mergeProps({ref_key:"popupRef",ref:d,class:a.popup,style:g.value},m.$attrs),[renderSlot(m.$slots,"default",{},undefined,true)],16),[[vShow,unref(u)]])]),_:3})],8,["to","disabled"]))}}),ce=pd(hl,[["__scopeId","data-v-0b8d0da0"]]),wl=defineComponent({__name:"AboutPopup",props:{visible:{type:Boolean}},emits:["update:visible"],setup(s){const e={root:"top-1/2! left-1/2! transform! -translate-x-1/2! -translate-y-1/2! w-lg max-h-2/3 p-0!",container:{main:"bg-base-100 rounded-xl flex flex-col",header:"flex justify-between items-center px-4 py-2 bg-base-200 rounded-t-xl",headerTitle:"text-base font-medium text-base-content",content:"overflow-y-auto max-h-96",sectionsWrapper:"space-y-6 text-sm"},section:{wrapper:"about-section",content:"px-6 py-4"},closeButton:"btn btn-ghost btn-circle btn-xs",defaultContent:"text-center text-base-content/60 py-8",titleContainer:"flex items-center space-x-2 gap-2",titleIcon:"size-6"};return (t,n)=>(openBlock(),createBlock(ce,{visible:t.visible,class:normalizeClass(e.root),"onUpdate:visible":n[1]||(n[1]=a=>t.$emit("update:visible",a))},{default:withCtx(()=>[createElementVNode("div",{class:normalizeClass(e.container.main)},[createElementVNode("div",{class:normalizeClass(e.container.header)},[createElementVNode("div",{class:normalizeClass(e.titleContainer)},[createVNode(unref(ho$1),{icon:unref(Sa),class:normalizeClass(e.titleIcon)},null,8,["icon","class"]),createElementVNode("h3",{class:normalizeClass(e.container.headerTitle)}," 关于 ",2)],2),createElementVNode("button",{class:normalizeClass(e.closeButton),onClick:n[0]||(n[0]=a=>t.$emit("update:visible",false))},[createVNode(unref(ho$1),{icon:"material-symbols:close-rounded",class:"size-4"})],2)],2),createElementVNode("div",{class:normalizeClass(e.container.content)},[createElementVNode("div",{class:normalizeClass(e.container.sectionsWrapper)},[createElementVNode("div",{class:normalizeClass(e.section.wrapper)},[createElementVNode("div",{class:normalizeClass(e.section.content)},[renderSlot(t.$slots,"content",{},()=>[createElementVNode("div",{class:normalizeClass(e.defaultContent)},n[2]||(n[2]=[createElementVNode("p",null,"请通过 slot 传入关于内容",-1)]),2)])],2)],2)],2)],2)],2)]),_:3},8,["visible","class"]))}}),_l=defineComponent({__name:"ShortcutsPopup",props:{visible:{type:Boolean}},emits:["update:visible"],setup(s){const e={root:"top-1/2! left-1/2! transform! -translate-x-1/2! -translate-y-1/2! w-lg h-2/3 p-0!",container:{main:"bg-base-100 h-full rounded-xl flex flex-col",header:"flex justify-between items-center px-4 py-2 bg-base-200 rounded-t-xl",headerTitle:"text-base font-medium text-base-content",content:"overflow-y-auto flex-1",sectionsWrapper:"space-y-6 text-sm"},section:{wrapper:"shortcuts-section",content:"p-6"},table:{wrapper:"w-full",labelCell:"text-base-content py-1 w-1/3 align-top",valueCell:"text-base-content/60 py-1 text-right"},shortcutKeys:"flex gap-1 justify-end",keyBadge:"kbd kbd-sm rounded",closeButton:"btn btn-ghost btn-circle btn-xs",titleContainer:"flex items-center space-x-2 gap-2",titleIcon:"size-6"},t=computed(()=>{const a=Qs();return Object.values(a).map(o=>({name:o.name,keys:o.keys}))});function n(a){return {" ":"Space"}[a]||a}return (a,o)=>(openBlock(),createBlock(ce,{visible:a.visible,class:normalizeClass(e.root),"onUpdate:visible":o[1]||(o[1]=i=>a.$emit("update:visible",i))},{default:withCtx(()=>[createElementVNode("div",{class:normalizeClass(e.container.main)},[createElementVNode("div",{class:normalizeClass(e.container.header)},[createElementVNode("div",{class:normalizeClass(e.titleContainer)},[createVNode(unref(ho$1),{icon:unref(Ta),class:normalizeClass(e.titleIcon)},null,8,["icon","class"]),createElementVNode("h3",{class:normalizeClass(e.container.headerTitle)}," 快捷键 ",2)],2),createElementVNode("button",{class:normalizeClass(e.closeButton),onClick:o[0]||(o[0]=i=>a.$emit("update:visible",false))},[createVNode(unref(ho$1),{icon:"material-symbols:close-rounded",class:"size-4"})],2)],2),createElementVNode("div",{class:normalizeClass(e.container.content)},[createElementVNode("div",{class:normalizeClass(e.container.sectionsWrapper)},[createElementVNode("div",{class:normalizeClass(e.section.wrapper)},[createElementVNode("div",{class:normalizeClass(e.section.content)},[createElementVNode("table",{class:normalizeClass(e.table.wrapper)},[createElementVNode("tbody",null,[(openBlock(true),createElementBlock(Fragment,null,renderList(t.value,i=>(openBlock(),createElementBlock("tr",{key:i.name},[createElementVNode("td",{class:normalizeClass(e.table.labelCell)},toDisplayString(i.name)+": ",3),createElementVNode("td",{class:normalizeClass(e.table.valueCell)},[createElementVNode("div",{class:normalizeClass(e.shortcutKeys)},[(openBlock(true),createElementBlock(Fragment,null,renderList(i.keys,(u,d)=>(openBlock(),createElementBlock("span",{key:d,class:normalizeClass(e.keyBadge)},toDisplayString(n(u)),3))),128))],2)],2)]))),128))])],2)],2)],2)],2)],2)],2)]),_:1},8,["visible","class"]))}}),kl=["onClick"],xl=defineComponent({__name:"index",setup(s){const e={popup:"p-0!",container:"menu w-48",menuItem:"menu-item rounded-lg",icon:"size-6"},{contextMenu:t}=Y();return (n,a)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(ce,{visible:unref(t).visible.value,x:unref(t).position.value.x,y:unref(t).position.value.y,class:normalizeClass(e.popup),"onUpdate:visible":unref(t).hide},{default:withCtx(()=>[createElementVNode("ul",{class:normalizeClass(e.container)},[(openBlock(true),createElementBlock(Fragment,null,renderList(unref(t).menuItems,o=>(openBlock(),createElementBlock("li",{key:o.id},[createElementVNode("a",{class:normalizeClass(e.menuItem),onClick:o.action},[o.icon?(openBlock(),createBlock(unref(ho$1),{key:0,icon:o.icon,class:normalizeClass(e.icon)},null,8,["icon","class"])):createCommentVNode("",true),createElementVNode("span",null,toDisplayString(o.label),1)],10,kl)]))),128))],2)]),_:1},8,["visible","x","y","class","onUpdate:visible"]),createVNode(wl,{visible:unref(t).showAbout.value,"onUpdate:visible":a[0]||(a[0]=o=>unref(t).showAbout.value=o)},{content:withCtx(()=>[renderSlot(n.$slots,"aboutContent")]),_:3},8,["visible"]),createVNode(_l,{visible:unref(t).showShortcuts.value,"onUpdate:visible":a[1]||(a[1]=o=>unref(t).showShortcuts.value=o)},null,8,["visible"])],64))}});function yt(s){const{controls:e}=Y(),{isOutside:t}=$d(s),n=shallowRef(false),a=watchEffect(()=>t.value?(n.value&&(e.removeDisabledAutoHide(),n.value=false),()=>{}):(n.value||(e.addDisabledAutoHide(),n.value=true),()=>{n.value&&(e.removeDisabledAutoHide(),n.value=false);}));return onUnmounted(()=>{a(),n.value&&(e.removeDisabledAutoHide(),n.value=false);}),{isOutside:t}}const ae={btn:{root:["btn btn-link btn-circle tooltip","text-base-content disabled:text-base-content/30","hover:text-base-content/80"],icon:["size-8","drop-shadow-xs/60"]},btnText:{root:["btn btn-link text-base rounded-full tooltip px-1.5 font-semibold","text-base-content disabled:text-base-content/30","hover:text-base-content/80","no-underline hover:no-underline!","text-shadow-[0_0_2px_rgba(0_0_0_/0.3),0_0_2px_rgba(0_0_0_/0.3),0_0_2px_rgba(0_0_0_/0.3)]"]},menu:{root:"menu p-0 min-w-32 gap-1",a:"rounded-lg",active:"menu-active",icon:"size-6",label:"text-base-content",desc:"text-base-content/60"},text:"text-sm text-base-content text-shadow-xs/60 text-shadow-[0_0_2px_rgba(0_0_0_/0.3),0_0_2px_rgba(0_0_0_/0.3),0_0_2px_rgba(0_0_0_/0.3)]",subtext:"text-base-content/60"},Cl={btn:{root:[ae.btn.root,"tooltip-left"],icon:ae.btn.icon},btnText:{root:ae.btnText.root}},Pl=["disabled"],$l=["disabled","onClick"],Tl=defineComponent({__name:"AudioTrackButton",setup(s){const e={...ae},{playerCore:t}=Y(),n=shallowRef(false),a=shallowRef();function o(){n.value=!n.value;}return (i,u)=>{var d,p,f;return openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:a,class:normalizeClass([e.btn.root]),disabled:!((d=unref(t))!=null&&d.canplay)||((p=unref(t))==null?undefined:p.type)!==unref(re).AvPlayer,"data-tip":"音频轨道",onClick:o},[createVNode(unref(ho$1),{class:normalizeClass([e.btn.icon]),icon:unref(xs)},null,8,["class","icon"])],10,Pl),((f=unref(t))==null?undefined:f.type)===unref(re).AvPlayer?(openBlock(),createBlock(ce,{key:0,visible:n.value,"onUpdate:visible":u[0]||(u[0]=v=>n.value=v),trigger:a.value,placement:"top"},{default:withCtx(()=>[createElementVNode("ul",{class:normalizeClass([e.menu.root])},[(openBlock(true),createElementBlock(Fragment,null,renderList(unref(t).audioStreams,v=>(openBlock(),createElementBlock("li",{key:v.id},[createElementVNode("a",{class:normalizeClass([e.menu.a,{[e.menu.active]:unref(t).audioStreamId===v.id}]),disabled:!unref(t).isSupportStream(v),onClick:g=>unref(t).setAudioStream(v.id)},[createElementVNode("span",{class:normalizeClass([e.menu.label])},toDisplayString(v.id)+". "+toDisplayString(v.metadata.title??"Untitled"),3),createElementVNode("span",{class:normalizeClass([e.menu.desc])},toDisplayString(v.metadata.language),3)],10,$l)]))),128))],2)]),_:1},8,["visible","trigger"])):createCommentVNode("",true)],64)}}}),Sl=defineComponent({__name:"FullscreenButton",setup(s){const{fullscreen:e}=Y(),t=computed(()=>e.isFullscreen.value?"material-symbols:fullscreen-exit-rounded":"material-symbols:fullscreen-rounded");return (n,a)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["btn btn-ghost btn-circle tooltip",{"swap-active":!unref(e).isFullscreen.value}]),"data-tip":"全屏 (F)",onClick:a[0]||(a[0]=(...o)=>unref(e).toggleFullscreen&&unref(e).toggleFullscreen(...o))},[createVNode(unref(ho$1),{class:"size-7",icon:t.value},null,8,["icon"])],2))}}),Il=["disabled"],Rl=defineComponent({__name:"PipButton",setup(s){const e={...ae},{pictureInPicture:t,playerCore:n}=Y();return (a,o)=>{var i;return openBlock(),createElementBlock("button",{class:normalizeClass(["swap swap-rotate",[e.btn.root,{"swap-active":!unref(t).isPip.value}]]),"data-tip":"画中画 (P)",disabled:((i=unref(n))==null?undefined:i.type)===unref(re).AvPlayer,onClick:o[0]||(o[0]=(...u)=>unref(t).toggle&&unref(t).toggle(...u))},[createVNode(unref(ho$1),{icon:unref(ws),class:normalizeClass(["swap-off",[e.btn.icon]])},null,8,["icon","class"]),createVNode(unref(ho$1),{icon:unref(hs),class:normalizeClass(["swap-on",[e.btn.icon]])},null,8,["icon","class"])],10,Il)}}}),El=["disabled"],Ml=["onClick"],Al=defineComponent({__name:"PlaybackRateButton",setup(s){const e={...ae},{playbackRate:t,playerCore:n}=Y(),a=computed(()=>[...t.rateOptions.value].reverse()),o=shallowRef(false),i=ref(),u=computed(()=>t.current.value===1?"倍速":`${t.current.value}X`);function d(){o.value=!o.value;}function p(f){t.set(f),o.value=false;}return (f,v)=>{var g;return openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:i,class:normalizeClass([e.btnText.root]),disabled:!((g=unref(n))!=null&&g.canplay),"data-tip":"倍速 (ArrowUp/ArrowDown)",onClick:d},toDisplayString(u.value),11,El),createVNode(ce,{visible:o.value,"onUpdate:visible":v[0]||(v[0]=M=>o.value=M),trigger:i.value,placement:"top"},{default:withCtx(()=>[createElementVNode("ul",{class:normalizeClass([e.menu.root])},[(openBlock(true),createElementBlock(Fragment,null,renderList(a.value,M=>(openBlock(),createElementBlock("li",{key:M,onClick:$=>p(M)},[createElementVNode("a",{class:normalizeClass([e.menu.a,{[e.menu.active]:unref(t).current.value===M}])},toDisplayString(M),3)],8,Ml))),128))],2)]),_:1},8,["visible","trigger"])],64)}}}),Ll=["disabled"],Ol=defineComponent({__name:"PlayButton",setup(s){const e={btn:{...ae.btn,root:[ae.btn.root,"before:ml-8"]}},{playerCore:t}=Y();return (n,a)=>{var o,i;return openBlock(),createElementBlock("button",{class:normalizeClass(["swap swap-rotate",[e.btn.root,{"swap-active":(o=unref(t))==null?undefined:o.paused}]]),disabled:!((i=unref(t))!=null&&i.canplay),"data-tip":"播放/暂停 (Space)",onClick:a[0]||(a[0]=(...u)=>{var d,p;return ((d=unref(t))==null?undefined:d.togglePlay)&&((p=unref(t))==null?undefined:p.togglePlay(...u))})},[createVNode(unref(ho$1),{icon:unref(wa),class:normalizeClass(["swap-off",[e.btn.icon]])},null,8,["icon","class"]),createVNode(unref(ho$1),{icon:unref(_a),class:normalizeClass(["swap-on",[e.btn.icon]])},null,8,["icon","class"])],10,Ll)}}}),Fl=["disabled"],Bl=["onClick"],Nl=defineComponent({__name:"PlayerCoreButton",setup(s){const e={...ae,btn:{...ae.btn,root:[ae.btn.root,"btn-"]}},{source:t,playerCore:n}=Y(),a=shallowRef(false),o=shallowRef();function i(){a.value=!a.value;}return (u,d)=>{var p,f,v,g,M,$,y;return openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:o,class:normalizeClass([e.btn.root]),"data-tip":"播放器核心",disabled:((v=(f=(p=unref(t))==null?undefined:p.current)==null?undefined:f.value)==null?undefined:v.type)==="hls"||((M=(g=unref(t))==null?undefined:g.isSwitching)==null?undefined:M.value),onClick:i},[createVNode(unref(ho$1),{class:normalizeClass(["transition-transform",[e.btn.icon,{"rotate-90":a.value,"motion-safe:animate-spin":(y=($=unref(t))==null?undefined:$.isSwitching)==null?undefined:y.value}]]),icon:unref(ks)},null,8,["class","icon"])],10,Fl),createVNode(ce,{visible:a.value,"onUpdate:visible":d[0]||(d[0]=P=>a.value=P),trigger:o.value,placement:"top"},{default:withCtx(()=>[createElementVNode("ul",{class:normalizeClass([e.menu.root])},[(openBlock(true),createElementBlock(Fragment,null,renderList([unref(re).Native,unref(re).AvPlayer],P=>{var x;return openBlock(),createElementBlock("li",{key:P},[createElementVNode("a",{class:normalizeClass([e.menu.a,{[e.menu.active]:((x=unref(n))==null?undefined:x.type)===P}]),onClick:b=>(unref(t).switchPlayerCore(P),a.value=false)},toDisplayString(P),11,Bl)])}),128))],2)]),_:1},8,["visible","trigger"])],64)}}});function Vl(s,e,t){return s<e?e:s>t?t:s}const Dl=["height"],jl={key:0},Ul={key:1},he=250,Hl=defineComponent({__name:"index",props:{visible:{type:Boolean},position:{},time:{},progressBarWidth:{}},emits:["seek"],setup(s,{emit:e}){const t=s,n=e,a={root:["absolute top-0","[will-change:transform]"],image:{root:["relative flex items-center justify-center rounded-xl overflow-hidden mb-2","bg-black shadow-xs/30","cursor-pointer transition-all duration-550 ease-out","hover:scale-[1.02]"],pressing:"ring-4 ring-base-content/90",loading:"absolute loading loading-spinner size-12 m-auto rounded-full text-base-content/80",error:"absolute inset-0 flex items-center justify-center"},timeBox:{container:"text-sm py-0.5 text-neutral-300 subpixel-antialiased text-center select-none text-shadow-[0_0_1px_rgb(0_0_0_/0.5),0_0_2px_rgb(55_55_55_/0.7)]"}},{rootProps:o,source:i,progressBar:u}=Y();function d(S,E,B){return S*B/E}const p=d(he,16,9),f=ref(false),{onThumbnailRequest:v}=o,g=shallowRef(null),M=shallowRef({width:he,height:p}),$=shallowRef(null),y=reactive({lastHoverTime:-1,lastRequestTime:-1,renderTime:-1,renderImage:undefined,error:undefined}),P=shallowRef(-1),x=computed(()=>t.visible&&P.value>-1),b=computed(()=>{var S;return (S=g.value)==null?undefined:S.getContext("2d")}),m=computed(()=>y.lastRequestTime>=0&&y.lastRequestTime===y.lastHoverTime);watch(()=>[t.position],async()=>{if(!t.visible){P.value=-1;return}if(t.progressBarWidth<0){P.value=-1;return}const S=M.value.width,E=-(S/2),B=t.progressBarWidth*(t.position/100),R=E+B,w=0,_=t.progressBarWidth-S,A=Vl(R,w,_);P.value=A;});async function k(S,E){$.value&&(clearTimeout($.value),$.value=null),y.renderImage=undefined,E||($.value=setTimeout(()=>{S===y.lastHoverTime&&k(S,true);},50));try{const B=await(v==null?void 0:v({type:"Cache",time:S,isLast:E}));if(B){y.renderImage=B,y.renderTime=S,E&&(y.lastRequestTime=-1),y.error=void 0;return}y.lastRequestTime=S;const R=await(v==null?void 0:v({type:"Must",time:S,isLast:E}));if(!R)return;S===y.lastHoverTime&&E&&(y.lastRequestTime=-1,y.renderImage=R,y.renderTime=S,y.error=void 0);}catch(B){y.error=B;}}watch(()=>[t.visible,t.time],async()=>{if(!v)return;if(!t.visible||!t.time){y.lastHoverTime=-1,y.renderImage=undefined;return}const S=t.time;y.lastHoverTime=S,await k(S,false);}),watch(()=>[y.renderImage,y.error],()=>{y.error||g.value&&b.value&&requestAnimationFrame(()=>{if(!b.value)throw new Error("ctx not found");if(b.value.clearRect(0,0,he,p),y.renderImage&&y.renderTime===y.lastHoverTime){const S=y.renderImage.img.width,E=y.renderImage.img.height,{width:B,height:R}=qn$1(S,E,he,p),w=(he-B)/2,_=(p-R)/2;b.value.fillStyle="#000",b.value.fillRect(0,0,he,p),b.value.drawImage(y.renderImage.img,w,_,B,R);}});}),watch([i.list],()=>{y.lastHoverTime=-1,y.lastRequestTime=-1,y.renderTime=-1,y.renderImage=undefined,$.value&&(clearTimeout($.value),$.value=null);});function T(S){var E;(E=y.renderImage)!=null&&E.frameTime&&(S.stopPropagation(),n("seek",y.renderImage.frameTime));}return onUnmounted(()=>{$.value&&(clearTimeout($.value),$.value=null);}),(S,E)=>{var B,R;return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(a.root),style:normalizeStyle({transform:`translateX(${P.value}px) translateY(-100%)`})},[createElementVNode("div",{class:normalizeClass([a.image.root,{[a.image.pressing]:unref(u).isDragging.value}]),style:normalizeStyle({width:`${M.value.width}px`,height:`${M.value.height}px`}),onMouseenter:E[0]||(E[0]=w=>f.value=true),onMouseleave:E[1]||(E[1]=w=>f.value=false),onMouseup:T},[createElementVNode("canvas",{ref_key:"thumbnailCanvas",ref:g,width:he,height:unref(p)},null,8,Dl),createVNode(Transition,{"enter-active-class":"transition-opacity duration-150 ease-out delay-60","leave-active-class":"transition-opacity duration-150 ease-out delay-60","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:withCtx(()=>[m.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.image.loading)},null,2)):createCommentVNode("",true)]),_:1}),y.error?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.image.error)},[createVNode(Ar$1,{message:y.error,size:"mini"},null,8,["message"])],2)):createCommentVNode("",true)],38),createElementVNode("div",{class:normalizeClass(a.timeBox.container)},[f.value&&((B=y.renderImage)!=null&&B.frameTime)?(openBlock(),createElementBlock("span",jl," 跳至 "+toDisplayString(unref(we)(((R=y.renderImage)==null?undefined:R.frameTime)||0))+" 预览时间 ",1)):(openBlock(),createElementBlock("span",Ul,toDisplayString(unref(we)(t.time)),1))],2)],6)),[[vShow,x.value]])}}}),zl=defineComponent({__name:"ProgressBar",setup(s){const e={progressBar:{root:"relative",wrapper:"py-2 cursor-pointer relative",track:"h-1 bg-base-content/30 relative transition-[height] duration-100 ease-linear shadow-xl/60"},thumb:{current:"absolute h-full bg-primary transition-[width] duration-100 linear",dragging:"transition-none",hover:"absolute h-full bg-primary pointer-events-none"},handle:{container:"absolute h-full -translate-x-1/2",base:["absolute top-1/2 left-1/2 size-3.5","bg-primary rounded-full drop-shadow-xs/60","-translate-x-1/2 -translate-y-1/2 scale-0","transition-all duration-100 ease-linear pointer-events-none"],visible:"scale-100",dragging:"!scale-80 bg-base-content! duration-450 ring-4 ring-primary",original:"!bg-white/50 !scale-100"}},{progressBar:t,playerCore:n,controls:a}=Y(),o=computed(()=>{var N,q;return (((N=n.value)==null?undefined:N.currentTime)??0)/(((q=n.value)==null?undefined:q.duration)??1)*100}),i=computed(()=>{var N;return ((N=n.value)==null?undefined:N.duration)??0}),u=shallowRef(null),{width:d}=zd(u),p=t.isDragging,f=shallowRef(false),v=computed(()=>f.value||p.value),g=shallowRef(0),M=shallowRef(0),$=shallowRef(0),y=shallowRef(0),P=shallowRef(false);function x(N,q){const ie=q.getBoundingClientRect(),pe=(N.clientX-ie.left)/ie.width;return Math.min(Math.max(pe,0),1)}function b(N){if(!u.value)return;const q=x(N,u.value);R(q);}function m(){f.value=true,P.value||A();}function k(N){if(!u.value)return;const q=x(N,u.value);B(q);}function T(){f.value=false,z();}function S(N){if(!u.value)return;const q=x(N,u.value);w(q);}function E(N){if(document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E),!u.value)return;const q=x(N,u.value);_(q),f.value||z();}function B(N){y.value=N*100,$.value=N*i.value;}function R(N){a.addDisabledAutoHide(),a.setDisabledHideOnMouseLeave(true),p.value=true,M.value=o.value,g.value=N*100,$.value=N*i.value,document.addEventListener("mousemove",S),document.addEventListener("mouseup",E);}function w(N){p.value&&(g.value=N*100,$.value=N*i.value);}function _(N){var q;if(p.value){const ie=N*i.value;(q=n.value)==null||q.seek(ie),y.value=N*100,$.value=ie;}p.value=false,a.removeDisabledAutoHide(),a.setDisabledHideOnMouseLeave(false);}function A(){P.value=true;}function z(){p.value||(P.value=false,y.value=0,$.value=0);}function J(N){var q;(q=n.value)==null||q.seek(N),p.value=false,z(),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E);}return onUnmounted(()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E);}),(N,q)=>(openBlock(),createElementBlock("div",{class:normalizeClass(e.progressBar.root)},[createElementVNode("div",{ref_key:"progressBarWrapperRef",ref:u,class:normalizeClass(e.progressBar.wrapper),onMousedown:b,onMouseenter:m,onMousemove:k,onMouseleave:T},[createElementVNode("div",{class:normalizeClass([e.progressBar.track])},[createElementVNode("div",{class:normalizeClass(e.thumb.current),style:normalizeStyle({width:`${o.value}%`,opacity:unref(p)?0:1})},null,6),unref(p)&&!unref(t).isLongPressDragging.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([e.thumb.current,e.thumb.dragging]),style:normalizeStyle({width:`${g.value}%`})},null,6)):createCommentVNode("",true),withDirectives(createElementVNode("div",{class:normalizeClass(e.thumb.hover),style:normalizeStyle({width:`${y.value}%`})},null,6),[[vShow,P.value&&!unref(p)]]),unref(p)?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.handle.container),style:normalizeStyle({left:`${M.value}%`})},[createElementVNode("div",{class:normalizeClass([e.handle.base,e.handle.original])},null,2)],6)):createCommentVNode("",true),createElementVNode("div",{class:normalizeClass(e.handle.container),style:normalizeStyle({left:`${unref(p)?g.value:o.value}%`})},[createElementVNode("div",{class:normalizeClass([e.handle.base,v.value&&e.handle.visible,unref(p)&&e.handle.dragging])},null,2)],6)],2)],34),createVNode(Hl,{visible:P.value||unref(p),position:unref(p)?g.value:y.value,time:$.value,"progress-bar-width":unref(d),onSeek:J},null,8,["visible","position","time","progress-bar-width"])],2))}}),ql=["onClick"],Wl=defineComponent({__name:"QualityButton",setup(s){const e={...ae},{source:t}=Y(),n=shallowRef(false),a=shallowRef(),o=computed(()=>{if(!t.current.value)return "自动";const p=t.current.value.displayQuality||t.current.value.quality;return typeof p=="number"?`${p}P`:p});function i(){n.value=!n.value;}function u(p){const f=p.displayQuality||p.quality;return typeof f=="number"?`${f}P`:f}async function d(p){n.value=false,await t.changeQuality(p);}return (p,f)=>(openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:a,class:normalizeClass(e.btnText.root),"data-tip":"画质",onClick:i},[createElementVNode("span",null,toDisplayString(o.value),1)],2),createVNode(ce,{visible:n.value,"onUpdate:visible":f[0]||(f[0]=v=>n.value=v),trigger:a.value,placement:"top"},{default:withCtx(()=>[createElementVNode("ul",{class:normalizeClass(e.menu.root)},[(openBlock(true),createElementBlock(Fragment,null,renderList(unref(t).list.value,v=>{var g;return openBlock(),createElementBlock("li",{key:v.quality},[createElementVNode("a",{class:normalizeClass([e.menu.a,{[e.menu.active]:v.quality===((g=unref(t).current.value)==null?undefined:g.quality)}]),onClick:M=>d(v)},toDisplayString(u(v)),11,ql)])}),128))],2)]),_:1},8,["visible","trigger"])],64))}}),Gl={class:"card card-sm bg-neutral-800"},Kl={class:"card-body"},Yl={class:"fieldset"},Xl=["checked"],Ql={class:"btn btn-link btn-xs inline-flex text-base-300",href:"https://github.com/cbingb666/115master/discussions/206",target:"_blank"},Jl=defineComponent({__name:"PlaySettings",setup(s){const{playSettings:e}=Y();return (t,n)=>(openBlock(),createElementBlock("div",Gl,[createElementVNode("div",Kl,[n[3]||(n[3]=createElementVNode("h3",{class:"card-title flex justify-between"}," 播放 ",-1)),createElementVNode("div",null,[createElementVNode("fieldset",Yl,[n[2]||(n[2]=createElementVNode("legend",{class:"fieldset-legend"}," 自动播放 ",-1)),createElementVNode("input",{type:"checkbox",checked:unref(e).autoPlay.value,class:"toggle toggle-sm toggle-primary",onChange:n[0]||(n[0]=(...a)=>unref(e).toggleAutoPlay&&unref(e).toggleAutoPlay(...a))},null,40,Xl),createElementVNode("a",Ql,[createVNode(unref(ho$1),{icon:unref(Vs)},null,8,["icon"]),n[1]||(n[1]=createTextVNode("如何开启声音？ "))])])])])]))}}),Zl={class:"card card-sm bg-neutral-800"},eo={class:"card-body"},to={class:"fieldset"},ao={class:"flex gap-2"},no=["onClick"],so={class:"fieldset"},lo=["checked"],oo=defineComponent({__name:"ThumbnailSettings",setup(s){const{thumbnailSettings:e}=Y(),t=[30,60,120];return (n,a)=>(openBlock(),createElementBlock("div",Zl,[createElementVNode("div",eo,[a[3]||(a[3]=createElementVNode("h3",{class:"card-title flex justify-between"},[createTextVNode(" 预览图 "),createElementVNode("span",{class:"text-xs font-normal text-base-content/50 text-center"},"刷新后生效")],-1)),createElementVNode("div",null,[createElementVNode("fieldset",to,[a[1]||(a[1]=createElementVNode("legend",{class:"fieldset-legend"}," 采样间隔 (S) ",-1)),createElementVNode("div",ao,[(openBlock(),createElementBlock(Fragment,null,renderList(t,o=>createElementVNode("button",{key:o,class:normalizeClass(["btn btn-sm bg-soft flex-1",{"btn-primary":unref(e).samplingInterval.value===o}]),onClick:i=>unref(e).setSamplingInterval(o)},toDisplayString(o),11,no)),64))])]),createElementVNode("fieldset",so,[a[2]||(a[2]=createElementVNode("legend",{class:"fieldset-legend"}," 自动缓冲 ",-1)),createElementVNode("input",{type:"checkbox",checked:unref(e).autoLoadThumbnails.value,class:"toggle toggle-sm toggle-primary",onChange:a[0]||(a[0]=(...o)=>unref(e).toggleAutoLoad&&unref(e).toggleAutoLoad(...o))},null,40,lo)])])])]))}}),ro={class:"card card-sm bg-neutral-800"},io={class:"card-body"},uo={class:"fieldset"},co={class:"fieldset-legend w-full"},po={class:"badge badge-sm"},fo={class:"flex gap-2"},mo=["disabled"],vo=["disabled"],bo={class:"fieldset"},go={class:"flex gap-2"},yo={class:"transform rotate-90"},ho=defineComponent({__name:"TransformSettings",setup(s){const{transform:e}=Y();return (t,n)=>(openBlock(),createElementBlock("div",ro,[createElementVNode("div",io,[n[9]||(n[9]=createElementVNode("h3",{class:"card-title"}," 旋转与翻转 ",-1)),createElementVNode("div",null,[createElementVNode("fieldset",uo,[createElementVNode("legend",co,[n[5]||(n[5]=createTextVNode(" 旋转 ")),createElementVNode("span",po,toDisplayString(unref(e).rotate.value)+"°",1)]),createElementVNode("div",fo,[createElementVNode("button",{class:"btn btn-sm join-item flex-1",disabled:unref(e).rotate.value===-270,onClick:n[0]||(n[0]=(...a)=>unref(e).left&&unref(e).left(...a))},[createVNode(unref(ho$1),{icon:unref(Ts),class:"size-4"},null,8,["icon"])],8,mo),createElementVNode("button",{class:"btn btn-sm join-item flex-1",onClick:n[1]||(n[1]=(...a)=>unref(e).normal&&unref(e).normal(...a))},[createVNode(unref(ho$1),{icon:unref(Is),class:"size-4"},null,8,["icon"])]),createElementVNode("button",{class:"btn btn-sm join-item flex-1",disabled:unref(e).rotate.value===270,onClick:n[2]||(n[2]=(...a)=>unref(e).right&&unref(e).right(...a))},[createVNode(unref(ho$1),{icon:unref(Ss),class:"size-4"},null,8,["icon"])],8,vo)])]),createElementVNode("fieldset",bo,[n[8]||(n[8]=createElementVNode("legend",{class:"fieldset-legend"}," 翻转 ",-1)),createElementVNode("div",go,[createElementVNode("button",{class:normalizeClass(["btn btn-sm flex-1",{"btn-primary":unref(e).flipX.value}]),onClick:n[3]||(n[3]=(...a)=>unref(e).toggleFlipX&&unref(e).toggleFlipX(...a))},[createElementVNode("div",yo,[createVNode(unref(ho$1),{icon:unref(ka),class:"size-4"},null,8,["icon"])]),n[6]||(n[6]=createTextVNode(" 水平 "))],2),createElementVNode("button",{class:normalizeClass(["btn btn-sm flex-1",{"btn-primary":unref(e).flipY.value}]),onClick:n[4]||(n[4]=(...a)=>unref(e).toggleFlipY&&unref(e).toggleFlipY(...a))},[createVNode(unref(ho$1),{icon:unref(xa),class:"size-4"},null,8,["icon"]),n[7]||(n[7]=createTextVNode(" 垂直 "))],2)])])])])]))}}),wo=defineComponent({__name:"SettingsButton",setup(s){const e={...ae,panel:{root:"grid grid-cols-3 gap-3 p-1 w-full max-w-2xl"},popup:"select-none"},t=shallowRef(),n=shallowRef(false);function a(){n.value=!n.value;}return (o,i)=>(openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:t,class:normalizeClass([e.btn.root]),"data-tip":"设置",onClick:a},[createVNode(unref(ho$1),{class:normalizeClass(["transition-transform",[e.btn.icon,{"rotate-90":n.value}]]),icon:unref(_s)},null,8,["class","icon"])],2),createVNode(ce,{visible:n.value,"onUpdate:visible":i[0]||(i[0]=u=>n.value=u),trigger:t.value,placement:"top",class:normalizeClass([e.popup])},{default:withCtx(()=>[createElementVNode("div",{class:normalizeClass([e.panel.root])},[createVNode(Jl),createVNode(oo),createVNode(ho)],2)]),_:1},8,["visible","trigger","class"])],64))}});var sa,la;const Jt=((la=(sa=module.meta)==null?undefined:sa.env)==null?undefined:la.VITE_BACKEND_API_BASE_URL)||"https://api.sub-dog.top";function ge(s){try{return new URL(s,Jt).href}catch{return `${Jt.replace(/\/$/,"")}/${s.replace(/^\//,"")}`}}const Re="backend_auth_token";function _o(){try{if(typeof GM_getValue<"u"){const s=GM_getValue(Re,"");return s?String(s):null}}catch{}return null}function Ma(s){try{if(typeof GM_setValue<"u"){GM_setValue(Re,s??"");return}}catch{}}function Aa(){const s=_o();return s!==null?s:(typeof localStorage<"u"?localStorage.getItem(Re):null)||null}function La(s){Ma(s),typeof localStorage<"u"&&localStorage.setItem(Re,s);}function ft(){Ma(null),typeof localStorage<"u"&&localStorage.removeItem(Re);}function Oa(){return !!Aa()}function xe(){const s=Aa();return s?{Authorization:`Bearer ${s}`}:{}}const ht=ref(Oa()),Ne=ref(""),Ce=ref(""),Ve=ref("");function Pe(s){ht.value=s,s?wt().catch(()=>{}):(Ne.value="",Ce.value="",Ve.value="");try{window.dispatchEvent(new CustomEvent("backend-auth-changed",{detail:{loggedIn:s}}));}catch{}}async function wt(){if(!Oa()){Ne.value="",Ce.value="",Ve.value="";return}try{const s=await Ld.request(ge("/api/user/verify"),{method:"GET",headers:{"Content-Type":"application/json",...xe()},timeout:1e4});if(!s.ok){ft(),Pe(!1);return}const e=await s.json();if(!(e!=null&&e.user)){ft(),Pe(!1);return}const t=e.user;t.username&&(Ne.value=String(t.username));const n=t.membership;Ce.value=n==="paid"||n==="free"?n:"",Ve.value=typeof t.paid_until=="string"?t.paid_until:"";}catch{}}ht.value&&wt().catch(()=>{});const ko={class:"px-4 pt-3"},xo={class:"flex gap-2 text-sm"},Co={key:0,class:"space-y-3"},Po={class:"form-control"},$o={class:"form-control"},To={key:0,class:"text-error text-sm"},So={class:"flex justify-end gap-2"},Io=["disabled"],Ro={key:1,class:"space-y-3"},Eo={class:"form-control"},Mo={class:"form-control"},Ao={class:"form-control"},Lo={class:"form-control"},Oo={class:"flex gap-2"},Fo=["disabled"],Bo={key:0,class:"text-error text-sm"},No={class:"flex justify-end gap-2"},Vo=["disabled"],Do={key:2,class:"space-y-3"},jo={class:"form-control"},Uo={class:"form-control"},Ho={class:"flex gap-2"},zo=["disabled"],qo={class:"form-control"},Wo={key:0,class:"text-error text-sm"},Go={class:"flex justify-end gap-2"},Ko=["disabled"],Yo=defineComponent({__name:"AuthPopup",props:{visible:{type:Boolean}},emits:["update:visible"],setup(s,{emit:e}){const t=e,{hud:n}=Y(),a={root:"top-1/2! left-1/2! transform! -translate-x-1/2! -translate-y-1/2! w-lg max-h-2/3 p-0!",container:{main:"bg-base-100 rounded-xl flex flex-col",header:"flex justify-between items-center px-4 py-2 bg-base-200 rounded-t-xl",headerTitle:"text-base font-medium text-base-content",content:"overflow-y-auto max-h-96",sectionsWrapper:"space-y-6 text-sm"},section:{wrapper:"about-section",content:"px-6 py-4"},closeButton:"btn btn-ghost btn-circle btn-xs",titleContainer:"flex items-center space-x-2 gap-2",titleIcon:"size-6",tabButton:"btn btn-ghost btn-xs",tabActive:"btn-active"},o=shallowRef("login"),i=shallowRef(false),u=shallowRef(false),d=shallowRef(0);let p;const f=shallowRef(""),v=shallowRef(""),g=shallowRef(""),M=shallowRef(""),$=shallowRef(""),y=shallowRef(""),P=shallowRef(""),x=shallowRef(""),b=shallowRef(""),m=shallowRef(""),k=shallowRef(""),T=shallowRef("");async function S(){g.value="";try{const w=(f.value||"").trim(),_=v.value;if(!w||!_)throw new Error("请输入邮箱和密码");i.value=!0;const A=await Ld.request(ge("/api/user/login/password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,password:_}),timeout:2e4}),z=await A.json();if(!A.ok)throw new Error(z.error||"登录失败");const J=z.token||"";if(!J)throw new Error("未返回认证 token");La(J),Pe(!0),t("update:visible",!1),n==null||n.show({value:"登录成功"});}catch(w){g.value=(w==null?undefined:w.message)||"登录失败";}finally{i.value=false;}}async function E(w){const _=w==="register"?($.value||"").trim():(b.value||"").trim(),A=w==="register"?x:T;A.value="";try{if(!_)throw new Error("请输入邮箱");u.value=!0;const z=await Ld.request(ge("/api/user/email-code"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_,purpose:w}),timeout:2e4}),J=await z.json();if(!z.ok)throw new Error(J.error||"验证码发送失败");p&&(clearInterval(p),p=void 0),d.value=60,p=window.setInterval(()=>{d.value>1?d.value-=1:(d.value=0,p&&(clearInterval(p),p=void 0));},1e3);}catch(z){A.value=(z==null?undefined:z.message)||"验证码发送失败";}finally{u.value=false;}}async function B(){x.value="";try{const w=(M.value||"").trim(),_=($.value||"").trim(),A=y.value,z=(P.value||"").trim();if(!w||!_||!A||!z)throw new Error("请填写完整信息与验证码");i.value=!0;const J=await Ld.request(ge("/api/user/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:w,email:_,password:A,code:z}),timeout:2e4}),N=await J.json();if(!J.ok)throw new Error(N.error||"注册失败");f.value=_,v.value="",o.value="login";}catch(w){x.value=(w==null?undefined:w.message)||"注册失败";}finally{i.value=false;}}onUnmounted(()=>{p&&(clearInterval(p),p=undefined);});async function R(){T.value="";try{const w=(b.value||"").trim(),_=(m.value||"").trim(),A=k.value;if(!w||!_||!A)throw new Error("请填写完整信息与验证码");i.value=!0;const z=await Ld.request(ge("/api/user/password/reset-confirm"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,code:_,new_password:A}),timeout:2e4}),J=await z.json();if(!z.ok)throw new Error(J.error||"重置失败");f.value=w,v.value="",o.value="login";}catch(w){T.value=(w==null?undefined:w.message)||"重置失败";}finally{i.value=false;}}return (w,_)=>(openBlock(),createBlock(ce,{visible:w.visible,class:normalizeClass(a.root),"onUpdate:visible":_[19]||(_[19]=A=>w.$emit("update:visible",A)),outsideStopPropagation:true,allowPreventControlsClose:true},{default:withCtx(()=>[createElementVNode("div",{class:normalizeClass(a.container.main)},[createElementVNode("div",{class:normalizeClass(a.container.header)},[createElementVNode("div",{class:normalizeClass(a.titleContainer)},[createVNode(unref(ho$1),{icon:unref(Ia),class:normalizeClass(a.titleIcon)},null,8,["icon","class"]),createElementVNode("h3",{class:normalizeClass(a.container.headerTitle)}," 账号认证 ",2)],2),createElementVNode("button",{class:normalizeClass(a.closeButton),onClick:_[0]||(_[0]=A=>w.$emit("update:visible",false))},[createVNode(unref(ho$1),{icon:"material-symbols:close-rounded",class:"size-4"})],2)],2),createElementVNode("div",ko,[createElementVNode("div",xo,[createElementVNode("button",{class:normalizeClass([a.tabButton,o.value==="login"&&a.tabActive]),onClick:_[1]||(_[1]=A=>o.value="login")},"登录",2),createElementVNode("button",{class:normalizeClass([a.tabButton,o.value==="register"&&a.tabActive]),onClick:_[2]||(_[2]=A=>o.value="register")},"注册",2),createElementVNode("button",{class:normalizeClass([a.tabButton,o.value==="reset"&&a.tabActive]),onClick:_[3]||(_[3]=A=>o.value="reset")},"重置密码",2)])]),createElementVNode("div",{class:normalizeClass(a.container.content)},[createElementVNode("div",{class:normalizeClass(a.container.sectionsWrapper)},[createElementVNode("div",{class:normalizeClass(a.section.wrapper)},[createElementVNode("div",{class:normalizeClass(a.section.content)},[o.value==="login"?(openBlock(),createElementBlock("div",Co,[createElementVNode("div",Po,[_[20]||(_[20]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"邮箱")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[4]||(_[4]=A=>f.value=A),type:"email",placeholder:"请输入邮箱",class:"input input-bordered w-full"},null,512),[[vModelText,f.value]])]),createElementVNode("div",$o,[_[21]||(_[21]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"密码")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[5]||(_[5]=A=>v.value=A),type:"password",placeholder:"请输入密码",class:"input input-bordered w-full"},null,512),[[vModelText,v.value]])]),g.value?(openBlock(),createElementBlock("div",To,toDisplayString(g.value),1)):createCommentVNode("",true),createElementVNode("div",So,[createElementVNode("button",{class:"btn",onClick:_[6]||(_[6]=A=>o.value="register")},"去注册"),createElementVNode("button",{class:"btn btn-ghost",onClick:_[7]||(_[7]=A=>o.value="reset")},"忘记密码"),createElementVNode("button",{class:"btn btn-primary",disabled:i.value,onClick:S},toDisplayString(i.value?"登录中...":"登录"),9,Io)])])):o.value==="register"?(openBlock(),createElementBlock("div",Ro,[createElementVNode("div",Eo,[_[22]||(_[22]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"昵称")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[8]||(_[8]=A=>M.value=A),type:"text",placeholder:"请输入昵称",class:"input input-bordered w-full"},null,512),[[vModelText,M.value]])]),createElementVNode("div",Mo,[_[23]||(_[23]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"邮箱")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[9]||(_[9]=A=>$.value=A),type:"email",placeholder:"请输入邮箱",class:"input input-bordered w-full"},null,512),[[vModelText,$.value]])]),createElementVNode("div",Ao,[_[24]||(_[24]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"密码")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[10]||(_[10]=A=>y.value=A),type:"password",placeholder:"请输入密码",class:"input input-bordered w-full"},null,512),[[vModelText,y.value]])]),createElementVNode("div",Lo,[_[25]||(_[25]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"验证码")],-1)),createElementVNode("div",Oo,[withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[11]||(_[11]=A=>P.value=A),type:"text",placeholder:"邮箱验证码",class:"input input-bordered flex-1"},null,512),[[vModelText,P.value]]),createElementVNode("button",{class:"btn",disabled:u.value||d.value>0,onClick:_[12]||(_[12]=A=>E("register"))},toDisplayString(u.value?"发送中...":d.value>0?`已发送(${d.value}s)`:"获取验证码"),9,Fo)])]),x.value?(openBlock(),createElementBlock("div",Bo,toDisplayString(x.value),1)):createCommentVNode("",true),createElementVNode("div",No,[createElementVNode("button",{class:"btn",onClick:_[13]||(_[13]=A=>o.value="login")},"已有账号？去登录"),createElementVNode("button",{class:"btn btn-primary",disabled:i.value,onClick:B},toDisplayString(i.value?"提交中...":"提交注册"),9,Vo)])])):(openBlock(),createElementBlock("div",Do,[createElementVNode("div",jo,[_[26]||(_[26]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"邮箱")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[14]||(_[14]=A=>b.value=A),type:"email",placeholder:"请输入邮箱",class:"input input-bordered w-full"},null,512),[[vModelText,b.value]])]),createElementVNode("div",Uo,[_[27]||(_[27]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"验证码")],-1)),createElementVNode("div",Ho,[withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[15]||(_[15]=A=>m.value=A),type:"text",placeholder:"邮箱验证码",class:"input input-bordered flex-1"},null,512),[[vModelText,m.value]]),createElementVNode("button",{class:"btn",disabled:u.value||d.value>0,onClick:_[16]||(_[16]=A=>E("reset"))},toDisplayString(u.value?"发送中...":d.value>0?`已发送(${d.value}s)`:"获取验证码"),9,zo)])]),createElementVNode("div",qo,[_[28]||(_[28]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"新密码")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":_[17]||(_[17]=A=>k.value=A),type:"password",placeholder:"请输入新密码",class:"input input-bordered w-full"},null,512),[[vModelText,k.value]])]),T.value?(openBlock(),createElementBlock("div",Wo,toDisplayString(T.value),1)):createCommentVNode("",true),createElementVNode("div",Go,[createElementVNode("button",{class:"btn",onClick:_[18]||(_[18]=A=>o.value="login")},"返回登录"),createElementVNode("button",{class:"btn btn-primary",disabled:i.value,onClick:R},toDisplayString(i.value?"提交中...":"提交重置"),9,Ko)])]))],2)],2)],2)],2)],2)]),_:1},8,["visible","class"]))}}),Xo=["data-tip","disabled"],Qo={key:0},Jo=["title","onClick"],Zo={class:"bg-base-100 rounded-xl flex flex-col"},er={class:"flex justify-between items-center px-4 py-2 bg-base-200 rounded-t-xl"},tr={class:"overflow-y-auto max-h-96 px-6 py-4 space-y-3 text-sm"},ar={class:"form-control"},nr={key:0,class:"text-error text-sm"},sr={class:"flex items-center justify-between gap-2"},lr={key:0,class:"text-xs text-base-content/70"},or={class:"flex justify-end gap-2"},rr=["disabled"],ir=defineComponent({__name:"SubtitleButton",setup(s){const e={menu:{...ae.menu,root:[ae.menu.root,"max-h-72 max-w-xl overflow-y-auto overflow-x-hidden !flex-nowrap"],a:[ae.menu.a,"flex py-2 flex-wrap w-full"],label:[ae.menu.label,"w-xs flex-1 line-clamp-2"],desc:[ae.menu.desc],tagPaid:"ml-2 px-1 text-xs rounded border border-rose-400/40 text-rose-400 bg-rose-500/10",tagPaidIcon:"ml-2 size-8 text-amber-400 inline-block shrink-0"},btn:ae.btn},{subtitles:t,hud:n}=Y(),a=shallowRef(false),o=shallowRef(),i=shallowRef(false),u=shallowRef(false),d=shallowRef(""),p=shallowRef(""),f=shallowRef(false),v=shallowRef(null),g=shallowRef(null),M=computed(()=>ht.value),$=computed(()=>M.value?"已登录 · 退出登录":"登录/注册"),y=computed(()=>Ne.value),P=computed(()=>Ce.value),x=computed(()=>P.value==="paid"),b=computed(()=>Ve.value),m=computed(()=>!x.value||!b.value?"":`到期：${w(b.value)}`),k=computed(()=>M.value?y.value?`${x.value?"VIP用户":"用户"}${y.value}已授权`:"后端账号已授权":"打开站内登录/注册弹窗"),T=computed(()=>M.value?Ds:Ia),S=computed(()=>v.value==null||g.value==null?"":`本站已有免费字幕${v.value}个，付费字幕${g.value}个`),E=computed(()=>t.current.value?"隐藏字幕":"显示字幕"),B=computed(()=>t.current.value?Us:js),R=computed(()=>(t.list.value??[]).map(Q=>{const U=Q.source==="Backend"?"sub-dog":Q.source;return {id:Q.id,label:Q.label,value:Q,icon:undefined,sourceLabel:U}}));function w(Q){if(!Q)return "";const U=String(Q).replace(" ","T"),se=new Date(U.endsWith("Z")?U:`${U}Z`);return Number.isNaN(se.getTime())?String(Q):se.toLocaleDateString("zh-CN")}function _(){a.value=!a.value;}function A(Q){a.value=false,t.change(Q);}function z(){t.toggleEnabled();}function J(){if(M.value){if(!confirm("确认要退出登录吗？"))return;ft(),Pe(false),t.change(null),a.value=false,n==null||n.show({value:"已退出登录"});return}i.value=true;}function N(){p.value="",d.value="",u.value=true;}async function q(){try{const Q=M.value?xe():{},U=await Ld.request(ge("/api/subtitles/counts"),{method:"GET",headers:Q,timeout:1e4}),se=await U.json();if(!U.ok||!se)return;const me=typeof se.freeCount=="number"?se.freeCount:0,le=typeof se.paidCount=="number"?se.paidCount:0;v.value=me,g.value=le;}catch{}}async function ie(){p.value="";const Q=(d.value||"").trim();if(!Q){p.value="请输入卡密";return}try{f.value=!0;const U=await Ld.request(ge("/api/subscription/redeem"),{method:"POST",headers:{"Content-Type":"application/json",...xe()},body:JSON.stringify({code:Q}),timeout:15e3}),se=await U.json();if(!U.ok)throw new Error(se.error||"兑换失败");se&&typeof se.token=="string"&&se.token&&(La(se.token),Pe(!0)),u.value=!1,n==null||n.show({value:"兑换成功，会员已升级"}),await wt();}catch(U){p.value=(U==null?undefined:U.message)||"兑换失败";}finally{f.value=false;}}function pe(Q){try{const U=Q.detail||{},se=String(U.category||"").toLowerCase(),me=se==="paid"?"已达到每日付费字幕访问限额":se==="free"?"已达到每日免费字幕访问限额":"已达到每日字幕访问限额";n==null||n.show({value:me});}catch{n==null||n.show({value:"已达到每日字幕访问限额"});}}return onMounted(()=>{window.addEventListener("subtitle-limit-reached",pe),q();}),onUnmounted(()=>{window.removeEventListener("subtitle-limit-reached",pe);}),(Q,U)=>{var se,me;return openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:o,class:normalizeClass([e.btn.root]),"data-tip":unref(t).loading.value||!unref(t).ready.value?"加载字幕中":(se=unref(t).list.value)!=null&&se.length?"字幕组(C)":M.value?"未找到字幕":"登录以获取字幕",disabled:unref(t).loading.value||!unref(t).ready.value,onClick:_},[unref(t).loading.value||!unref(t).ready.value?(openBlock(),createBlock(unref(ho$1),{key:0,class:normalizeClass([e.btn.icon]),icon:unref(Cs)},null,8,["class","icon"])):(openBlock(),createBlock(unref(ho$1),{key:1,icon:unref(t).current.value?unref(Ca):unref(Pa),class:normalizeClass([e.btn.icon]),disabled:((me=unref(t).list.value)==null?undefined:me.length)===0},null,8,["icon","class","disabled"]))],10,Xo),createVNode(ce,{visible:a.value,"onUpdate:visible":U[0]||(U[0]=le=>a.value=le),trigger:o.value,placement:"top"},{default:withCtx(()=>[createElementVNode("ul",{class:normalizeClass([e.menu.root])},[createElementVNode("li",null,[createElementVNode("a",{class:normalizeClass([e.menu.a]),onClick:J},[createVNode(unref(ho$1),{class:normalizeClass([e.menu.icon]),icon:T.value},null,8,["class","icon"]),createElementVNode("span",{class:normalizeClass([e.menu.label])},toDisplayString($.value),3),createElementVNode("span",{class:normalizeClass([e.menu.desc])},toDisplayString(k.value),3)],2)]),M.value?(openBlock(),createElementBlock("li",Qo,[createElementVNode("a",{class:normalizeClass([e.menu.a]),onClick:N},[createVNode(unref(ho$1),{class:normalizeClass([e.menu.icon]),icon:unref(Yt)},null,8,["class","icon"]),createElementVNode("span",{class:normalizeClass([e.menu.label])},"卡密充值",2),x.value&&m.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([e.menu.desc])},toDisplayString(m.value),3)):createCommentVNode("",true)],2)])):createCommentVNode("",true),createElementVNode("li",null,[createElementVNode("a",{class:normalizeClass([e.menu.a]),onClick:z},[createVNode(unref(ho$1),{class:normalizeClass([e.menu.icon]),icon:B.value},null,8,["class","icon"]),createElementVNode("span",{class:normalizeClass([e.menu.label])},toDisplayString(E.value),3),createElementVNode("span",{class:normalizeClass([e.menu.desc])},"快捷键 C",2)],2)]),(openBlock(true),createElementBlock(Fragment,null,renderList(R.value,le=>{var _t,kt,xt;return openBlock(),createElementBlock("li",{key:le.id},[createElementVNode("a",{class:normalizeClass([e.menu.a,{[e.menu.active]:((_t=le.value)==null?undefined:_t.id)===((kt=unref(t).current.value)==null?undefined:kt.id)}]),title:le.label,onClick:Zi=>A(le.value)},[le.icon?(openBlock(),createBlock(unref(ho$1),{key:0,class:normalizeClass([e.menu.icon]),icon:le.icon},null,8,["class","icon"])):createCommentVNode("",true),createElementVNode("span",{class:normalizeClass([e.menu.label])},toDisplayString(le.label),3),(xt=le.value)!=null&&xt.paid?(openBlock(),createBlock(unref(ho$1),{key:1,class:normalizeClass([e.menu.tagPaidIcon]),icon:unref(Yt)},null,8,["class","icon"])):createCommentVNode("",true),createElementVNode("span",{class:normalizeClass([e.menu.desc])},toDisplayString(le.sourceLabel),3)],10,Jo)])}),128))],2)]),_:1},8,["visible","trigger"]),createVNode(Yo,{visible:i.value,"onUpdate:visible":U[1]||(U[1]=le=>i.value=le)},null,8,["visible"]),createVNode(ce,{visible:u.value,"onUpdate:visible":U[5]||(U[5]=le=>u.value=le),class:normalizeClass("top-1/2! left-1/2! transform! -translate-x-1/2! -translate-y-1/2! w-md max-h-2/3 p-0!"),outsideStopPropagation:true,allowPreventControlsClose:true},{default:withCtx(()=>[createElementVNode("div",Zo,[createElementVNode("div",er,[U[6]||(U[6]=createElementVNode("h3",{class:"text-base font-medium text-base-content"},"账户升级",-1)),createElementVNode("button",{class:"btn btn-ghost btn-circle btn-xs",onClick:U[2]||(U[2]=le=>u.value=false)},[createVNode(unref(ho$1),{icon:"material-symbols:close-rounded",class:"size-4"})])]),createElementVNode("div",tr,[U[8]||(U[8]=createElementVNode("div",null,[createTextVNode(" 请输入卡密解锁更多付费字幕。 "),createElementVNode("a",{href:"https://9wa.qm02.cn/z",target:"_blank",rel:"noopener noreferrer",class:"link link-primary ml-1"},"前往购买卡密"),createElementVNode("a",{href:"https://player.sub-dog.top/",target:"_blank",rel:"noopener noreferrer",class:"link link-primary ml-1"},"前往字幕狗")],-1)),createElementVNode("div",ar,[U[7]||(U[7]=createElementVNode("label",{class:"label"},[createElementVNode("span",{class:"label-text"},"卡密")],-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":U[3]||(U[3]=le=>d.value=le),type:"text",placeholder:"请输入卡密",class:"input input-bordered w-full"},null,512),[[vModelText,d.value]])]),p.value?(openBlock(),createElementBlock("div",nr,toDisplayString(p.value),1)):createCommentVNode("",true),createElementVNode("div",sr,[S.value?(openBlock(),createElementBlock("div",lr,toDisplayString(S.value),1)):createCommentVNode("",true),createElementVNode("div",or,[createElementVNode("button",{class:"btn",type:"button",onClick:U[4]||(U[4]=le=>u.value=false)},"取消"),createElementVNode("button",{class:"btn btn-primary",type:"button",disabled:f.value,onClick:ie},toDisplayString(f.value?"兑换中...":"兑换"),9,rr)])])])])]),_:1},8,["visible"])],64)}}}),ur=defineComponent({__name:"TimeDisplay",setup(s){const{playerCore:e}=Y(),t={root:[ae.text,"flex items-center gap-1.5 select-none"],separator:ae.subtext};return (n,a)=>{var o,i,u,d;return openBlock(),createElementBlock("div",{class:normalizeClass([[t.root,{"opacity-0":!((o=unref(e))!=null&&o.canplay),"opacity-100":(i=unref(e))==null?undefined:i.canplay}],"transition-opacity duration-200"])},[createElementVNode("span",null,toDisplayString(unref(we)((u=unref(e))==null?undefined:u.currentTime)),1),createElementVNode("span",{class:normalizeClass(t.separator)},"/",2),createElementVNode("span",null,toDisplayString(unref(we)((d=unref(e))==null?undefined:d.duration)),1)],2)}}}),cr={class:"card card-sm bg-neutral-800"},dr={class:"card-body"},pr={class:"flex justify-between items-center mb-2"},fr={class:"grid grid-rows-5 grid-flow-col gap-x-5 gap-y-2"},mr={class:"fieldset"},vr={class:"fieldset-legend w-full"},br={class:"badge badge-sm"},gr={class:"fieldset"},yr={class:"fieldset-legend w-full"},hr={class:"badge badge-sm"},wr={class:"fieldset"},_r={class:"fieldset-legend w-full"},kr={class:"badge badge-sm"},xr={class:"fieldset"},Cr={class:"fieldset-legend w-full"},Pr={class:"badge badge-sm"},$r={class:"fieldset"},Tr={class:"fieldset-legend w-full"},Sr={class:"badge badge-sm"},Ir={class:"fieldset"},Rr={class:"fieldset-legend w-full"},Er={class:"badge badge-sm"},Mr={class:"fieldset"},Ar={class:"fieldset-legend w-full"},Lr={class:"badge badge-sm"},Or={class:"fieldset"},Fr={class:"fieldset-legend w-full"},Br={class:"badge badge-sm"},Nr={class:"fieldset"},Vr={class:"fieldset-legend w-full"},Dr={class:"badge badge-sm"},jr={class:"fieldset"},Ur={class:"fieldset-legend w-full"},Hr={class:"badge badge-sm"},zr={class:"fieldset"},qr=defineComponent({__name:"VideoEnhanceSettings",setup(s){const e={...ae,popup:"select-none"},t=shallowRef(),n=shallowRef(false);function a(){n.value=!n.value;}const{videoEnhance:o}=Y();return (i,u)=>(openBlock(),createElementBlock(Fragment,null,[createElementVNode("button",{ref_key:"buttonRef",ref:t,class:normalizeClass([e.btn.root]),"data-tip":"颜色调整",onClick:a},[createVNode(unref(ho$1),{class:normalizeClass(["transition-transform",[e.btn.icon,{"rotate-45":n.value}]]),icon:unref(Ns)},null,8,["class","icon"])],2),createVNode(ce,{visible:n.value,"onUpdate:visible":u[12]||(u[12]=d=>n.value=d),trigger:t.value,placement:"top",class:normalizeClass([e.popup])},{default:withCtx(()=>[createElementVNode("div",cr,[createElementVNode("div",dr,[createElementVNode("div",pr,[u[13]||(u[13]=createElementVNode("h3",{class:"card-title"}," 色彩调整 ",-1)),createElementVNode("button",{class:"btn btn-xs btn-circle btn-ghost",title:"重置",onClick:u[0]||(u[0]=(...d)=>unref(o).reset&&unref(o).reset(...d))},[createVNode(unref(ho$1),{icon:unref(ys),class:"size-6"},null,8,["icon"])])]),createElementVNode("div",fr,[createElementVNode("fieldset",mr,[createElementVNode("legend",vr,[u[14]||(u[14]=createTextVNode(" 亮度 ")),createElementVNode("span",br,toDisplayString(unref(o).colorParams.brightness),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[1]||(u[1]=d=>unref(o).colorParams.brightness=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.brightness,undefined,{number:true}]])]),createElementVNode("fieldset",gr,[createElementVNode("legend",yr,[u[15]||(u[15]=createTextVNode(" 对比度 ")),createElementVNode("span",hr,toDisplayString(unref(o).colorParams.contrast),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[2]||(u[2]=d=>unref(o).colorParams.contrast=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.contrast,undefined,{number:true}]])]),createElementVNode("fieldset",wr,[createElementVNode("legend",_r,[u[16]||(u[16]=createTextVNode(" 高光 ")),createElementVNode("span",kr,toDisplayString(unref(o).colorParams.highlights),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[3]||(u[3]=d=>unref(o).colorParams.highlights=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.highlights,undefined,{number:true}]])]),createElementVNode("fieldset",xr,[createElementVNode("legend",Cr,[u[17]||(u[17]=createTextVNode(" 阴影 ")),createElementVNode("span",Pr,toDisplayString(unref(o).colorParams.shadows),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[4]||(u[4]=d=>unref(o).colorParams.shadows=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.shadows,undefined,{number:true}]])]),createElementVNode("fieldset",$r,[createElementVNode("legend",Tr,[u[18]||(u[18]=createTextVNode(" 饱和度 ")),createElementVNode("span",Sr,toDisplayString(unref(o).colorParams.saturation),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[5]||(u[5]=d=>unref(o).colorParams.saturation=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.saturation,undefined,{number:true}]])]),createElementVNode("fieldset",Ir,[createElementVNode("legend",Rr,[u[19]||(u[19]=createTextVNode(" 色温 ")),createElementVNode("span",Er,toDisplayString(unref(o).colorParams.colorTemp),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[6]||(u[6]=d=>unref(o).colorParams.colorTemp=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.colorTemp,undefined,{number:true}]])]),createElementVNode("fieldset",Mr,[createElementVNode("legend",Ar,[u[20]||(u[20]=createTextVNode(" 色调 ")),createElementVNode("span",Lr,toDisplayString(unref(o).colorParams.hue),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[7]||(u[7]=d=>unref(o).colorParams.hue=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"-100",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.hue,undefined,{number:true}]])]),createElementVNode("fieldset",Or,[createElementVNode("legend",Fr,[u[21]||(u[21]=createTextVNode(" 锐化 ")),createElementVNode("span",Br,toDisplayString(unref(o).colorParams.sharpness),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[8]||(u[8]=d=>unref(o).colorParams.sharpness=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"0",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.sharpness,undefined,{number:true}]])]),createElementVNode("fieldset",Nr,[createElementVNode("legend",Vr,[u[22]||(u[22]=createTextVNode(" 美白强度 ")),createElementVNode("span",Dr,toDisplayString(unref(o).colorParams.skinWhitening),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[9]||(u[9]=d=>unref(o).colorParams.skinWhitening=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"0",max:"100",step:"1"},null,512),[[vModelText,unref(o).colorParams.skinWhitening,undefined,{number:true}]])]),createElementVNode("fieldset",jr,[createElementVNode("legend",Ur,[u[23]||(u[23]=createTextVNode(" 肤色范围 ")),createElementVNode("span",Hr,toDisplayString(unref(o).colorParams.skinRange),1)]),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[10]||(u[10]=d=>unref(o).colorParams.skinRange=d),type:"range",class:"range range-xs range-primary [--range-fill:0] w-full",min:"1",max:"10",step:"1"},null,512),[[vModelText,unref(o).colorParams.skinRange,undefined,{number:true}]])]),createElementVNode("fieldset",zr,[u[24]||(u[24]=createElementVNode("legend",{class:"fieldset-legend w-full"}," 禁用HDR ",-1)),withDirectives(createElementVNode("input",{"onUpdate:modelValue":u[11]||(u[11]=d=>unref(o).disabledHDR.value=d),type:"checkbox",class:"toggle toggle-primary toggle-sm"},null,512),[[vModelCheckbox,unref(o).disabledHDR.value]])])])])])]),_:1},8,["visible","trigger","class"])],64))}}),Wr=["disabled"],Gr=["value","disabled"],Kr=defineComponent({__name:"VolumeControl",setup(s){const{playerCore:e,hud:t}=Y(),n=computed(()=>{var i;return {root:"flex items-center gap-2 mr-2",btn:ae.btn,range:["range range-2xs w-24 range-primary"],tooltip:["tooltip tooltip-top",{"tooltip-open":(i=e==null?undefined:e.value)==null?undefined:i.isSuspended}],tooltipContent:"tooltip-content py-2 px-4",resumeBtn:"cursor-pointer pointer-events-auto"}}),a=computed(()=>{var i,u;return Fe(((i=e.value)==null?undefined:i.volume)??0,((u=e.value)==null?undefined:u.muted)??false)});function o(i){var d;const u=Number(i.target.value);(d=e.value)==null||d.setVolume(u);}return (i,u)=>{var d,p,f,v,g,M,$;return openBlock(),createElementBlock("div",{class:normalizeClass([n.value.tooltip])},[(d=unref(e))!=null&&d.isSuspended?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([n.value.tooltipContent])},[createElementVNode("button",{class:normalizeClass([n.value.resumeBtn]),onClick:u[0]||(u[0]=()=>{var y,P;(y=unref(e))==null||y.resumeSuspended(),(P=unref(t))==null||P.showResumeSuspended();})}," 点击恢复音频 ",2)],2)):createCommentVNode("",true),createElementVNode("div",{class:normalizeClass([n.value.root])},[createElementVNode("button",{class:normalizeClass(["swap swap-rotate",[n.value.btn.root,{"swap-active":(p=unref(e))==null?undefined:p.muted}]]),"data-tip":"静音 (M)",disabled:!((f=unref(e))!=null&&f.canplay)||((v=unref(e))==null?undefined:v.isSuspended),onClick:u[1]||(u[1]=(...y)=>{var P,x;return ((P=unref(e))==null?undefined:P.toggleMute)&&((x=unref(e))==null?undefined:x.toggleMute(...y))})},[createVNode(unref(ho$1),{class:normalizeClass(["swap-off",[n.value.btn.icon]]),icon:a.value},null,8,["class","icon"]),createVNode(unref(ho$1),{class:normalizeClass(["swap-on",[n.value.btn.icon]]),icon:a.value},null,8,["class","icon"])],10,Wr),createElementVNode("input",{type:"range",class:normalizeClass([n.value.range]),min:"0",max:"100",value:((g=unref(e))==null?undefined:g.volume)??0,disabled:!((M=unref(e))!=null&&M.canplay)||(($=unref(e))==null?undefined:$.isSuspended),onInput:o},null,42,Gr)],2)],2)}}}),Yr=defineComponent({__name:"ControlBar",setup(s){const e={controlBar:{main:"relative pointer-events-auto",bg:["absolute inset-0 top-[-30px] pointer-events-none","bg-linear-to-t from-black/50 from-10% to-transparent"],mainContent:"relative px-5 py-3",bar:"flex justify-between items-center",trivialize:"opacity-0 transition-all duration-200 ease-out",left:"flex items-center gap-2",right:"flex items-center gap-2"}},{controls:t,playerCore:n,progressBar:a}=Y(),o=shallowRef(null);yt(o);const i=computed(()=>t.visible.value),u=computed(()=>{var d;return (d=n.value)==null?undefined:d.canplay});return (d,p)=>(openBlock(),createBlock(Transition,{"enter-active-class":"transition-all duration-200 ease-out","leave-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:withCtx(()=>{var f;return [i.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"controlBarRef",ref:o,class:normalizeClass(e.controlBar.main)},[createElementVNode("div",{class:normalizeClass([e.controlBar.bg])},null,2),createElementVNode("div",{ref:unref(t).mainRef,class:normalizeClass([e.controlBar.mainContent])},[createVNode(zl,{class:normalizeClass({"opacity-0 pointer-events-none":!u.value,"opacity-100 pointer-events-auto":u.value})},null,8,["class"]),createElementVNode("div",{class:normalizeClass([e.controlBar.bar,{[e.controlBar.trivialize]:(f=unref(a))==null?undefined:f.isLongPressDragging.value}])},[createElementVNode("div",{class:normalizeClass(e.controlBar.left)},[createVNode(Ol),createVNode(Kr),createVNode(ur)],2),createElementVNode("div",{class:normalizeClass(e.controlBar.right)},[createVNode(Wl),createVNode(Al),createVNode(ir),createVNode(Tl),createVNode(Nl),createVNode(qr),createVNode(wo),createVNode(Rl),createVNode(Sl)],2)],2)],2)],2)):createCommentVNode("",true)]}),_:1}))}}),Xr=defineComponent({__name:"ControlHeader",props:{title:{}},setup(s){const e=s,{controls:t,progressBar:n}=Y(),a={root:"relative",content:{root:"relative flex justify-between items-center p-7",left:"flex-1 font-bold",right:{root:"flex-1",item:"flex justify-end gap-2"}},bg:"absolute inset-0 bottom-[-50px] bg-linear-to-b from-black/30 to-transparent pointer-events-none"},o=shallowRef(null);yt(o);const i=computed(()=>t.visible.value&&!n.isLongPressDragging.value);return (u,d)=>(openBlock(),createBlock(Transition,{"enter-active-class":"transition-all duration-200 ease-out","leave-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:withCtx(()=>[i.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"controlHeaderRef",ref:o,class:normalizeClass([a.root])},[createElementVNode("div",{class:normalizeClass([a.bg])},null,2),createElementVNode("div",{class:normalizeClass([a.content.root])},[renderSlot(u.$slots,"left"),createElementVNode("div",{class:normalizeClass([a.content.left])},toDisplayString(e.title),3)],2)],2)):createCommentVNode("",true)]),_:3}))}}),Qr=defineComponent({__name:"ControlMask",setup(s){const e={mask:"relative flex-1"},{fullscreen:t,playerCore:n,popupManager:a,contextMenu:o}=Y(),i=shallowRef();function u(){var p;(p=n.value)==null||p.togglePlay();}function d(){t.toggleFullscreen();}return onMounted(()=>{a==null||a.addDisabledBubblingElement(i.value);}),onUnmounted(()=>{a==null||a.removeDisabledBubblingElement(i.value);}),(p,f)=>(openBlock(),createElementBlock("div",{ref_key:"maskRef",ref:i,class:normalizeClass(e.mask),onClick:withModifiers(u,["self"]),onDblclick:withModifiers(d,["self"]),onContextmenu:f[0]||(f[0]=withModifiers((...v)=>unref(o).handleContextMenu&&unref(o).handleContextMenu(...v),["prevent"]))},[renderSlot(p.$slots,"default")],34))}}),Jr=defineComponent({__name:"ControlsRight",setup(s){const e={root:["absolute inset-y-0 right-0 flex flex-col justify-end items-center gap-2 px-7 pb-2"]},{progressBar:t,controls:n}=Y(),a=shallowRef(null);yt(a);const o=computed(()=>n.visible.value&&!t.isLongPressDragging.value);return (i,u)=>(openBlock(),createBlock(Transition,{"enter-active-class":"transition-all duration-200 ease-out","leave-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:withCtx(()=>[o.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"controlRightRef",ref:a,class:normalizeClass(e.root)},[renderSlot(i.$slots,"default")],2)):createCommentVNode("",true)]),_:3}))}}),Zr=defineComponent({__name:"index",setup(s){const e={root:"absolute inset-0 flex flex-col"};return (t,n)=>(openBlock(),createElementBlock("div",{class:normalizeClass(e.root)},[renderSlot(t.$slots,"default")],2))}}),ei=["value","min","max"],ti=defineComponent({__name:"index",setup(s){const e={popup:"left-auto! top-auto! right-4! bottom-4! shadow-xs/90",wrap:"flex items-center gap-2 px-2",content:"flex flex-col gap-1 flex-1 px-1",icon:"size-6",title:"text-sm font-semibold",progress:"progress progress-primary h-1 w-35",value:"text-sm font-semibold text-base-content/70"},{hud:t}=Y(),n=ref(false),a=ref(null),o=computed(()=>(t==null?undefined:t.messages.value[0])||null);watch(o,u=>{u?(a.value=u,n.value=true):n.value=false;});function i(){a.value=null;}return (u,d)=>(openBlock(),createBlock(ce,{class:normalizeClass(e.popup),visible:n.value,x:0,y:0,"allow-prevent-controls-close":false,onAfterLeave:i},{default:withCtx(()=>[a.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.wrap)},[a.value.icon?(openBlock(),createBlock(unref(ho$1),{key:0,class:normalizeClass([e.icon,a.value.iconClass]),icon:a.value.icon},null,8,["class","icon"])):createCommentVNode("",true),createElementVNode("div",{class:normalizeClass(e.content)},[a.value.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.title)},toDisplayString(a.value.title??""),3)):createCommentVNode("",true),a.value&&a.value.progress?(openBlock(),createElementBlock("progress",{key:1,class:normalizeClass(e.progress),value:a.value.progress.value,min:a.value.progress.min,max:a.value.progress.max},null,10,ei)):createCommentVNode("",true),a.value.value?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.value)},toDisplayString(a.value.value),3)):createCommentVNode("",true)],2)],2)):createCommentVNode("",true)]),_:1},8,["class","visible"]))}}),ai=defineComponent({__name:"index",setup(s){const e={container:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-2 drop-shadow-xl/30",animation:{wrapper:"inline-flex items-center justify-between gap-2.5",dot:["w-2.5 h-2.5 bg-white rounded-full","loading-dot-bounce"],dot1:"loading-dot-delay-1",dot2:"loading-dot-delay-2",dot3:"loading-dot-delay-3"},speed:"text-sm font-semibold text-base-content"},{playerCore:t}=Y();return (n,a)=>{var o,i,u;return openBlock(),createElementBlock("div",{class:normalizeClass(e.container)},[createElementVNode("div",{class:normalizeClass(e.animation.wrapper)},[createElementVNode("span",{class:normalizeClass([e.animation.dot,e.animation.dot1])},null,2),createElementVNode("span",{class:normalizeClass([e.animation.dot,e.animation.dot2])},null,2),createElementVNode("span",{class:normalizeClass([e.animation.dot,e.animation.dot3])},null,2)],2),((o=unref(t))==null?undefined:o.type)===unref(re).AvPlayer&&(((i=unref(t).stats)==null?undefined:i.bandwidth)??0)>0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.speed)},toDisplayString(Math.round((((u=unref(t).stats)==null?undefined:u.bandwidth)??0)/1024/1024*100)/100)+" Mbps/s ",3)):createCommentVNode("",true)],2)}}}),ni=pd(ai,[["__scopeId","data-v-3365baab"]]),si=defineComponent({__name:"index",setup(s){const e={container:["absolute inset-0 m-auto","flex items-center justify-center","size-20 bg-black/30 rounded-full drop-shadow-xs/60"],icon:"size-[61.8%]"},{playerCore:t}=Y(),n=shallowRef(false),a=shallowRef(false),o=shallowRef(false),i=computed(()=>o.value?"animate-[fadeOut_350ms_linear_forwards]":"");function u(){n.value=true,a.value=false,o.value=false;}function d(f){n.value=true,a.value=f,o.value=true,setTimeout(()=>{n.value=false,o.value=false;},300);}function p(){n.value=false,o.value=false;}return watch(()=>{var f;return (f=t.value)==null?undefined:f.canplay},f=>{var v;f?(v=t==null?undefined:t.value)!=null&&v.paused&&u():p();}),watch(()=>{var f;return (f=t==null?undefined:t.value)==null?undefined:f.paused},f=>{var v;(v=t==null?undefined:t.value)!=null&&v.canplay&&d(!!f);}),(f,v)=>n.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([e.container,i.value])},[createVNode(unref(ho$1),{icon:a.value?unref(wa):unref(_a),class:normalizeClass(e.icon)},null,8,["icon","class"])],2)):createCommentVNode("",true)}}),li={key:0},oi=defineComponent({__name:"index",setup(s){const e={root:"top-4! left-4! w-lg h-2/3 p-0!",titleContainer:"flex items-center space-x-2 gap-2",titleIcon:"size-6",container:{main:"bg-base-100 h-full rounded-xl flex flex-col",header:"flex justify-between items-center px-4 py-2 bg-base-200 rounded-t-xl",headerTitle:"text-base font-medium text-base-content",content:"overflow-y-auto flex-1 pb-5",sectionsWrapper:"space-y-6 text-sm"},section:{wrapper:"stats-section",header:["sticky top-0 bg-base-100 py-2 px-6 text-base font-medium mb-2 text-base-content border-b border-base-content/10 shadow-sm","flex items-baseline gap-2"],headerDesc:"text-base-content/60 text-xs",content:"px-6 pt-2 space-y-2"},table:{wrapper:"w-full",fixedLayout:"table-fixed",labelCell:"text-xs text-base-content py-1 pl-3 w-1/3 align-top",valueCell:"text-xs text-base-content/60 py-1 pr-3 text-right break-words",active:"bg-primary/30!",subTable:"bg-base-200 rounded-lg"},error:"p-2 bg-error/10 border-l-2 border-error rounded text-xs font-mono whitespace-pre-wrap text-error-content",closeButton:"btn btn-ghost btn-circle btn-xs"},{playerCore:t,source:n,statistics:a}=Y(),o=computed(()=>t.value?t.value.type??"unknown":"unknown"),i=computed(()=>{var b,m,k,T;return {"Current Source":((b=n==null?undefined:n.current.value)==null?undefined:b.name)||"未加载",Type:((m=n==null?undefined:n.current.value)==null?undefined:m.type)||"未知",Extension:((k=n==null?undefined:n.current.value)==null?undefined:k.extension)||"unknown",URL:((T=n==null?undefined:n.current.value)==null?undefined:T.url)||"未加载"}}),u=computed(()=>{if(!t.value)return  false;const b=t.value;return b.type===re.AvPlayer&&b.streams!==undefined&&b.streams.length>0}),d=computed(()=>{var m;return t.value?((m=t.value.streams)==null?undefined:m.length)??0:0}),p=computed(()=>t.value?t.value.streams??[]:[]);function f(b){if(!t.value)return  false;const m=t.value;return [m.audioStreamId,m.videoStreamId,m.subtitleStreamId].filter(Boolean).includes(b)}function v(b){const m={};if(t.value){const k=t.value;typeof k.isSupportStream=="function"&&(m.support=k.isSupportStream(b)?"Yes":"No");}if(b.codecparProxy){const k=b.codecparProxy;if(k.codecId&&(m.codecId=k.codecId),b.mediaType==="Audio"&&k.chLayout){const T=k.chLayout;T.nbChannels&&(m.nbChannels=T.nbChannels);}}if(b.metadata){const k=b.metadata;Object.entries(k).forEach(([T,S])=>{m[T]=S;});}return m}const g=computed(()=>t.value?!!t.value.stats:false),M=computed(()=>{if(!t.value)return {};const b=t.value;if(!b.stats)return {};const m={};for(const k in b.stats)k!=="audioCurrentTime"&&k!=="videoCurrentTime"&&(m[k]=b.stats[k]);return m}),$=computed(()=>{if(!t.value)return  false;const b=t.value;return b.stats?"audioCurrentTime"in b.stats&&"videoCurrentTime"in b.stats:false}),y=computed(()=>{if(!$.value||!t.value)return 0;const b=t.value;return Number(b.stats.audioCurrentTime)-Number(b.stats.videoCurrentTime)}),P=computed(()=>t.value?!!t.value.loadError:false),x=computed(()=>{if(!t.value)return "";const m=t.value.loadError;return m instanceof Error?`${m.name}: ${m.message}`:String(m||"")});return (b,m)=>(openBlock(),createBlock(ce,{class:normalizeClass(e.root),visible:unref(a).visible.value},{default:withCtx(()=>[createElementVNode("div",{class:normalizeClass(e.container.main)},[createElementVNode("div",{class:normalizeClass(e.container.header)},[createElementVNode("div",{class:normalizeClass(e.titleContainer)},[createVNode(unref(ho$1),{icon:unref($a),class:normalizeClass(e.titleIcon)},null,8,["icon","class"]),createElementVNode("h3",{class:normalizeClass(e.container.headerTitle)}," Statistics ",2)],2),createElementVNode("button",{class:normalizeClass(e.closeButton),onClick:m[0]||(m[0]=(...k)=>unref(a).toggleVisible&&unref(a).toggleVisible(...k))},[createVNode(unref(ho$1),{icon:"material-symbols:close-rounded",class:"size-4"})],2)],2),createElementVNode("div",{class:normalizeClass(e.container.content)},[createElementVNode("div",{class:normalizeClass(e.container.sectionsWrapper)},[createElementVNode("div",{class:normalizeClass(e.section.wrapper)},[createElementVNode("h4",{class:normalizeClass(e.section.header)}," Player Core ",2),createElementVNode("div",{class:normalizeClass(e.section.content)},[createElementVNode("table",{class:normalizeClass(e.table.wrapper)},[createElementVNode("tbody",null,[createElementVNode("tr",null,[createElementVNode("td",{class:normalizeClass(e.table.labelCell)}," Core Type: ",2),createElementVNode("td",{class:normalizeClass(e.table.valueCell)},toDisplayString(o.value),3)])])],2)],2)],2),createElementVNode("div",{class:normalizeClass(e.section.wrapper)},[createElementVNode("h4",{class:normalizeClass(e.section.header)}," Source Info ",2),createElementVNode("div",{class:normalizeClass(e.section.content)},[createElementVNode("table",{class:normalizeClass([e.table.wrapper,e.table.fixedLayout])},[createElementVNode("tbody",null,[(openBlock(true),createElementBlock(Fragment,null,renderList(i.value,(k,T)=>(openBlock(),createElementBlock("tr",{key:T},[createElementVNode("td",{class:normalizeClass(e.table.labelCell)},toDisplayString(T)+": ",3),createElementVNode("td",{class:normalizeClass(e.table.valueCell)},toDisplayString(k),3)]))),128))])],2)],2)],2),u.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([e.section.wrapper])},[createElementVNode("div",{class:normalizeClass(e.section.header)},[createElementVNode("h4",{class:normalizeClass(e.container.headerTitle)}," Streams ",2),createElementVNode("span",{class:normalizeClass(e.section.headerDesc)},toDisplayString(d.value),3)],2),createElementVNode("div",{class:normalizeClass(e.section.content)},[(openBlock(true),createElementBlock(Fragment,null,renderList(p.value,k=>(openBlock(),createElementBlock("table",{key:k.id,class:normalizeClass([e.table.wrapper,e.table.fixedLayout,e.table.subTable,{[e.table.active]:f(k.id)}])},[createElementVNode("tbody",null,[createElementVNode("tr",null,[createElementVNode("td",{class:normalizeClass(e.table.labelCell)},toDisplayString(k.mediaType),3),createElementVNode("td",{class:normalizeClass(e.table.valueCell)}," ID: "+toDisplayString(k.id),3)]),(openBlock(true),createElementBlock(Fragment,null,renderList(v(k),(T,S)=>(openBlock(),createElementBlock("tr",{key:S},[createElementVNode("td",{class:normalizeClass(e.table.labelCell)},toDisplayString(S)+": ",3),createElementVNode("td",{class:normalizeClass(e.table.valueCell)},toDisplayString(T),3)]))),128))])],2))),128))],2)],2)):createCommentVNode("",true),g.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.section.wrapper)},[createElementVNode("h4",{class:normalizeClass(e.section.header)}," Core Stats ",2),createElementVNode("div",{class:normalizeClass(e.section.content)},[createElementVNode("table",{class:normalizeClass(e.table.wrapper)},[createElementVNode("tbody",null,[(openBlock(true),createElementBlock(Fragment,null,renderList(M.value,(k,T)=>(openBlock(),createElementBlock("tr",{key:T},[createElementVNode("td",{class:normalizeClass(e.table.labelCell)},toDisplayString(T)+": ",3),createElementVNode("td",{class:normalizeClass(e.table.valueCell)},toDisplayString(k),3)]))),128)),$.value?(openBlock(),createElementBlock("tr",li,[createElementVNode("td",{class:normalizeClass(e.table.labelCell)}," A-V: ",2),createElementVNode("td",{class:normalizeClass(e.table.valueCell)},toDisplayString(y.value),3)])):createCommentVNode("",true)])],2)],2)],2)):createCommentVNode("",true),P.value?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.section.wrapper)},[createElementVNode("h4",{class:normalizeClass(e.section.header)}," 错误信息 ",2),createElementVNode("div",{class:normalizeClass(e.section.content)},[createElementVNode("div",{class:normalizeClass(e.error)},toDisplayString(x.value),3)],2)],2)):createCommentVNode("",true)],2)],2)],2)]),_:1},8,["class","visible"]))}}),ri=defineComponent({__name:"index",setup(s){const e={container:"absolute inset-0",content:["absolute left-1/2 bottom-[3%] max-w-[80%] mx-auto px-1","whitespace-pre-wrap text-white text-center font-semibold","transition-transform duration-200 ease-in-out"]},{subtitles:t,cssVar:n,refs:a,playerCore:o}=Y(),i=computed(()=>n==null?undefined:n.safeAreaBottom.value),u=computed(()=>t.current.value),d=shallowRef(null),p=Bd(a.playerElementRef),f=computed(()=>`${p.height.value*.044}px`),v=shallowRef([]),g=computed(()=>v.value.find(x=>{var b,m;return o.value?x.st<=((b=o.value)==null?undefined:b.currentTime)&&x.et>=((m=o.value)==null?undefined:m.currentTime):false})),M=computed(()=>{var x;return (x=g.value)==null?undefined:x.text.replace(/<[^>]*>?/g,"")});function $(x){const b=(x||"").trim();let m=b.match(/^(\d{1,2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/);if(m){const k=parseInt(m[1],10),T=parseInt(m[2],10),S=parseInt(m[3],10),E=m[4]?parseInt(m[4],10):0;return k*3600+T*60+S+E/1e3}if(m=b.match(/^(\d{1,2}):(\d{2})(?:\.(\d{1,3}))?$/),m){const k=parseInt(m[1],10),T=parseInt(m[2],10),S=m[3]?parseInt(m[3],10):0;return k*60+T+S/1e3}return NaN}function y(x){const m=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/^\uFEFF/,"").split(/\n\n+/).filter(T=>T.trim()!==""),k=[];for(const T of m){if(/^\s*WEBVTT/i.test(T)||/^\s*(NOTE|STYLE|REGION)/i.test(T))continue;const S=T.split(/\n/).filter(q=>q.length>0),E=S.findIndex(q=>/-->/.test(q));if(E<0)continue;const R=S[E].match(/(\d{1,2}:\d{2}:\d{2}(?:\.\d{1,3})?|\d{1,2}:\d{2}(?:\.\d{1,3})?)\s*-->\s*(\d{1,2}:\d{2}:\d{2}(?:\.\d{1,3})?|\d{1,2}:\d{2}(?:\.\d{1,3})?)/);if(!R)continue;const w=R[1],_=R[2],A=$(w),z=$(_);if(Number.isNaN(A)||Number.isNaN(z))continue;const N=S.slice(E+1).join(`
`);k.push({start:w,end:_,text:N,st:A,et:z});}v.value=k;}async function P(x){if(!x){d.value=null;return}const m=await(await fetch(x.url)).blob();d.value=await m.text(),y(d.value);}return watch(u,()=>{P(u.value);}),(x,b)=>unref(t).current.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.container)},[g.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.content),style:normalizeStyle({fontSize:f.value,transform:`translate(-50%, calc(0px - ${i.value}))`,webkitTextStroke:"1px #000",textShadow:["0 1px 0 rgba(0,0,0,0.1)","1px 0 0 rgba(0,0,0,0.1)","0 -1px 0 rgba(0,0,0,0.1)","-1px 0 0 rgba(0,0,0,0.1)","1px 1px 0 rgba(0,0,0,0.1)","-1px 1px 0 rgba(0,0,0,0.1)","1px -1px 0 rgba(0,0,0,0.1)","-1px -1px 0 rgba(0,0,0,0.1)"].join(", ")})},toDisplayString(M.value),7)):createCommentVNode("",true)],2)):createCommentVNode("",true)}}),ii=["innerHTML"],ui=defineComponent({__name:"index",props:{sources:{},showPlaylist:{type:Boolean},volume:{},muted:{type:Boolean},playbackRate:{},subtitles:{},subtitlesReady:{},subtitlesLoading:{},lastTime:{},autoLoadThumbnails:{type:Boolean},autoPlay:{type:Boolean},disabledHDR:{type:Boolean},thumbnailsSamplingInterval:{},hlsConfig:{default:()=>({})},avPlayerConfig:{default:()=>({})},onThumbnailRequest:{type:Function,default:undefined},onSubtitleChange:{type:Function,default:undefined},onCanplay:{},onTimeupdate:{},onSeeking:{},onSeeked:{},onIdled:{}},emits:["update:showPlaylist","update:volume","update:muted","update:playbackRate","update:autoLoadThumbnails","update:autoPlay","update:disabledHDR","update:thumbnailsSamplingInterval"],setup(s,{expose:e,emit:t}){var P,x;const n=s,a=t,o={root:"relative bg-black",fullscreen:"w-100vw h-100vh",container:"relative w-full h-full overflow-hidden",videoPlayer:"flex items-center justify-center w-full h-full",error:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",resumeContainer:"absolute inset-0 flex justify-center items-center bg-black/90 z-2",resumeButton:"btn"},i=shallowRef(null),u=shallowRef(null),d=bl();watchEffect(()=>{d.container.value=i.value??undefined;});const p=vl({rootRef:i,playerElementRef:u},n,a),{fullscreen:f,source:v,transform:g,videoEnhance:M,playerCore:$,controls:y}=p;return watch(()=>y.visible.value,b=>{i.value&&(i.value.style.cursor=b?"auto":"none");},{immediate:true}),e({togglePlay:(P=$.value)==null?undefined:P.togglePlay,interruptSource:v.interruptSource,seekTo:(x=$.value)==null?undefined:x.seek}),(b,m)=>{var k,T,S;return openBlock(),createElementBlock("div",{ref_key:"rootRef",ref:i,class:normalizeClass([o.root,{[o.fullscreen]:unref(f).isFullscreen}])},[createElementVNode("div",{innerHTML:unref(M).renderFilter.value},null,8,ii),createElementVNode("div",{ref_key:"playerElementRef",ref:u,class:normalizeClass(o.videoPlayer),style:normalizeStyle([unref(g).transformStyle.value,unref(M).getFilterStyle.value])},null,6),createVNode(si),createVNode(ri),(k=unref($))!=null&&k.loadError?(openBlock(),createBlock(Ar$1,{key:0,class:normalizeClass(o.error),message:(T=unref($))==null?undefined:T.loadError},null,8,["class","message"])):(S=unref($))!=null&&S.isLoading?(openBlock(),createBlock(ni,{key:1})):createCommentVNode("",true),createVNode(Zr,null,{default:withCtx(()=>[createVNode(Xr,null,{left:withCtx(()=>[renderSlot(b.$slots,"headerLeft")]),_:3}),createVNode(Qr,null,{default:withCtx(()=>[createVNode(Jr,null,{default:withCtx(()=>[renderSlot(b.$slots,"controlsRight")]),_:3})]),_:3}),createVNode(Yr)]),_:3}),createVNode(ti),createVNode(oi),createVNode(xl,null,{aboutContent:withCtx(()=>[renderSlot(b.$slots,"aboutContent")]),_:3}),unref(v).isInterrupt.value?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(o.resumeContainer)},[createElementVNode("button",{class:normalizeClass(o.resumeButton),onClick:m[0]||(m[0]=(...E)=>unref(v).resumeSource&&unref(v).resumeSource(...E))}," 恢复播放 ",2)],2)):createCommentVNode("",true)],2)}}});function ci(){const s=ref(),e=ref(),t=()=>{const n=new URLSearchParams(window.location.search);s.value=n.get("pick_code")??undefined,e.value=n.get("cid")??undefined;};return t(),{pickCode:s,cid:e,getParams:t}}const di=["href"],pi=["href"],fi=["src"],mi=["src"],vi=defineComponent({__name:"index",setup(s){const e={container:{main:"py-8 text-base-content/60 gap-4 text-center flex flex-col"},title:"text-2xl font-bold mb-4",text:{description:"text-xs",link:"text-yellow-400 hover:text-yellow-300 transition-colors duration-200"},badges:{container:"flex items-center justify-center gap-4 flex-wrap",link:"inline-block hover:scale-105 transition-transform duration-200",image:"h-5"}},t=computed(()=>({version:ye.script.version,author:ye.script.author,homepage:ye.script.homepage,name:ye.script.name}));return (n,a)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(e.container.main)},[createElementVNode("h1",{class:normalizeClass(e.title)},toDisplayString(t.value.name),3),createElementVNode("div",{class:normalizeClass(e.badges.container)},[createElementVNode("a",{href:t.value.homepage,target:"_blank",class:normalizeClass(e.badges.link)},[createElementVNode("img",{src:"https://img.shields.io/badge/GitHub-115Master-yellow",alt:"GitHub",class:normalizeClass(e.badges.image)},null,2)],10,di),createElementVNode("a",{href:`https://github.com/cbingb666/115Master/releases/tag/v${t.value.version}`,target:"_blank",class:normalizeClass(e.badges.link)},[createElementVNode("img",{src:`https://img.shields.io/badge/Version-${t.value.version.replace(/-/g,".")}-green`,alt:"Version",class:normalizeClass(e.badges.image)},null,10,fi)],10,pi),createElementVNode("a",{href:"https://github.com/cbingb666",target:"_blank",class:normalizeClass(e.badges.link)},[createElementVNode("img",{src:`https://img.shields.io/badge/Author-${t.value.author}-red`,alt:"Author",class:normalizeClass(e.badges.image)},null,10,mi)],2)],2),createElementVNode("div",{class:normalizeClass(e.badges.container)},[createElementVNode("a",{href:"https://github.com/cbingb666/115master/blob/main/LICENSE",target:"_blank",class:normalizeClass(e.badges.link)},[createElementVNode("img",{src:"https://img.shields.io/badge/License-MIT-green",alt:"License",class:normalizeClass(e.badges.image)},null,2)],2),createElementVNode("a",{href:"https://github.com/cbingb666/115master/issues",target:"_blank",class:normalizeClass(e.badges.link)},[createElementVNode("img",{src:"https://img.shields.io/badge/Issues-red",alt:"Issues",class:normalizeClass(e.badges.image)},null,2)],2),createElementVNode("a",{href:"https://github.com/cbingb666/115master/discussions/categories/q-a",target:"_blank",class:normalizeClass(e.badges.link)},[createElementVNode("img",{src:"https://img.shields.io/badge/Q&A-blue",alt:"Issues",class:normalizeClass(e.badges.image)},null,2)],2)],2)],2))}}),bi=["onClick"],gi=defineComponent({__name:"index",props:{fileInfo:{},playlist:{}},setup(s){const e=s,t={container:{main:"flex items-center gap-4 w-full mx-2",error:"text-red-400",loading:"flex items-center"},fileInfo:{container:"flex flex-col flex-1",file:"flex flex-wrap items-center gap-2",name:"font-bold text-base-content text-xl text-shadow-xs/60 line-clamp-2",size:"text-base-content/70 font-semibold text-shadow-xs/60 whitespace-nowrap flex-shrink-0",path:{container:["breadcrumbs text-sm text-base-content/80"]},folder:{btn:"btn btn-sm btn-ghost btn-circle tooltip tooltip-bottom",icon:"size-4"}}},n=computed(()=>{var o;return (((o=e.playlist.state)==null?undefined:o.path)??[]).filter(i=>Number(i.cid)!==0)});function a(o){window.open(`https://115.com/?cid=${o}&offset=0&mode=wangpan`,"_blank");}return (o,i)=>{var u,d,p;return o.fileInfo.error?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(t.container.error)},[i[0]||(i[0]=createElementVNode("div",null,"❌ 获取文件信息失败",-1)),createElementVNode("div",null,toDisplayString(o.fileInfo.error),1)],2)):o.fileInfo.isLoading||!o.fileInfo.isLoading&&!o.fileInfo.isReady?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.container.loading)},i[1]||(i[1]=[createElementVNode("div",{class:"skeleton w-80 h-7 rounded-lg"},null,-1)]),2)):(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(t.container.main)},[createElementVNode("div",{class:normalizeClass(t.fileInfo.container)},[createElementVNode("div",{class:normalizeClass(t.fileInfo.file)},[createElementVNode("span",{class:normalizeClass(t.fileInfo.name)},toDisplayString((d=(u=o.fileInfo.state)==null?undefined:u.file_name)==null?undefined:d.toUpperCase()),3),createElementVNode("span",{class:normalizeClass(t.fileInfo.size)},toDisplayString(unref(Wd)(Number((p=o.fileInfo.state)==null?undefined:p.file_size))),3)],2),createElementVNode("div",{class:normalizeClass(t.fileInfo.path.container)},[createElementVNode("ul",null,[(openBlock(true),createElementBlock(Fragment,null,renderList(n.value,f=>(openBlock(),createElementBlock("li",{key:f.cid,onClick:v=>a(f.cid)},[createElementVNode("a",null,toDisplayString(f.name),1)],8,bi))),128))])],2)],2)],2))}}});function yi(s=300){const e=ref(false);return {isCopied:e,copyText:async n=>{if(n)try{await navigator.clipboard.writeText(n),e.value=!0,setTimeout(()=>{e.value=!1;},s);}catch(a){throw console.error("复制失败:",a),a}}}}const hi=defineComponent({__name:"CopyButton",props:{text:{},duration:{}},setup(s){const e=s,{isCopied:t,copyText:n}=yi(e.duration);async function a(){await n(e.text);}const o={button:{base:"btn btn-xs btn-ghost btn-circle transition-all duration-200 ease-in-out",normal:"btn-neutral",success:"btn-primary"},text:"whitespace-nowrap text-xs"};return (i,u)=>(openBlock(),createElementBlock("button",{class:normalizeClass([o.button.base,unref(t)?o.button.success:o.button.normal]),onClick:a},[createVNode(unref(ho$1),{icon:unref(Gd),class:"size-4"},null,8,["icon"])],2))}}),wi=pd(hi,[["__scopeId","data-v-16f90c09"]]),_i=["href"],ki=["src","alt"],xi=["src","alt"],Ci=["href"],Pi=["href"],$i=["href"],Ti=["href"],Si=["href"],Ii=["href"],Ri=["src"],Zt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NjYyI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MxLjY2IDAgMyAxLjM0IDMgM3MtMS4zNCAzLTMgMy0zLTEuMzQtMy0zIDEuMzQtMyAzLTN6bTAgMTQuMmMtMi41IDAtNC43MS0xLjI4LTYtMy4yMi4wMy0xLjk5IDQtMy4wOCA2LTMuMDggMS45OSAwIDUuOTcgMS4wOSA2IDMuMDgtMS4yOSAxLjk0LTMuNSAzLjIyLTYgMy4yMnoiLz48L3N2Zz4=",Ei=defineComponent({__name:"index",props:{movieInfos:{}},setup(s){const e=s,t={container:{main:"relative flex flex-col",content:"flex flex-col gap-8"},tabs:{container:"tabs tabs-border absolute top-0 right-0",item:"tab",active:"tab-active"},skeleton:{title:"skeleton h-14 w-4/5",avatar:"skeleton w-15 h-15 rounded-full shrink-0",name:"skeleton h-4 w-20",contentLine:"skeleton h-4 w-xs"},states:{error:"my-20 mx-auto",empty:"my-20 mx-auto"},header:{container:"mb-6",title:"text-xl font-bold break-words break-all text-base-content pr-36",titleText:""},actors:{container:"flex flex-wrap gap-2",item:"relative w-fit",content:"flex items-center gap-3 no-underline w-full",avatarWrapper:"avatar relative",avatarContainer:"w-18 rounded-full",avatarImage:"rounded-full",name:"text-base text-base-content pr-2",sexBadge:{base:"absolute -top-0.5 -right-0.5 w-4 h-4 rounded-full flex items-center justify-center text-white text-xs rotate-45",female:"bg-pink-400/80",male:"bg-primary/80"}},content:{container:"flex flex-col gap-3",item:"flex gap-2 text-sm",label:"text-base-content/50 min-w-10",value:"flex flex-wrap gap-2 items-center",link:"link",badge:"badge badge-neutral rounded-full"},thumbnails:{container:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-9 gap-3",item:"aspect-square overflow-hidden hover:opacity-80",image:"size-full object-cover"}},n=ref(null),a=ref(null),o=ref("javDBState"),i=computed(()=>e.movieInfos[o.value]);return watch(n,async()=>{var u;n.value&&((u=a.value)==null||u.destroy(),await nextTick(),a.value=new oa({gallery:n.value,children:"a",pswpModule:()=>fo$1(()=>module.import('photoswipe'),void 0),mouseMovePan:true,initialZoomLevel:"fit",wheelToZoom:true}),a.value.init(),a.value.addFilter("domItemData",(d,p)=>{var f,v;return d.width=(f=p.querySelector("img"))==null?undefined:f.naturalWidth,d.height=(v=p.querySelector("img"))==null?undefined:v.naturalHeight,d}));}),(u,d)=>{var p,f,v,g,M,$,y,P,x,b,m,k,T,S,E,B,R;return openBlock(),createElementBlock("div",{class:normalizeClass(t.container.main)},[createElementVNode("div",{class:normalizeClass(t.container.content)},[createElementVNode("div",{class:normalizeClass(t.tabs.container)},[createElementVNode("a",{class:normalizeClass([t.tabs.item,o.value==="javDBState"?t.tabs.active:""]),onClick:d[0]||(d[0]=w=>o.value="javDBState")}," JavDB ",2),createElementVNode("a",{class:normalizeClass([t.tabs.item,o.value==="javBusState"?t.tabs.active:""]),onClick:d[1]||(d[1]=w=>o.value="javBusState")}," JavBus ",2)],2),i.value.error.value?(openBlock(),createBlock(Ar$1,{key:0,class:normalizeClass(t.states.error),message:i.value.error.value},null,8,["class","message"])):i.value.isLoading.value?(openBlock(),createElementBlock(Fragment,{key:1},[createElementVNode("div",{class:normalizeClass(t.header.container)},[createElementVNode("div",{class:normalizeClass(t.header.title)},[createElementVNode("div",{class:normalizeClass(t.skeleton.title)},null,2)],2)],2),createElementVNode("div",{class:normalizeClass(t.actors.container)},[(openBlock(),createElementBlock(Fragment,null,renderList(1,w=>createElementVNode("div",{key:w,class:normalizeClass(t.actors.item)},[createElementVNode("div",{class:normalizeClass(t.actors.content)},[createElementVNode("div",{class:normalizeClass(t.skeleton.avatar)},null,2),createElementVNode("div",{class:normalizeClass(t.skeleton.name)},null,2)],2)],2)),64))],2),createElementVNode("div",{class:normalizeClass(t.content.container)},[(openBlock(),createElementBlock(Fragment,null,renderList(7,w=>createElementVNode("div",{key:w,class:normalizeClass(t.content.item)},[createElementVNode("div",{class:normalizeClass(t.skeleton.contentLine)},null,2)],2)),64))],2)],64)):i.value.state.value?(openBlock(),createElementBlock(Fragment,{key:3},[(openBlock(),createElementBlock("div",{key:o.value,class:normalizeClass(t.header.container)},[createElementVNode("div",{class:normalizeClass(t.header.title)},[createElementVNode("span",{class:normalizeClass(t.header.titleText)},toDisplayString((p=i.value.state.value)==null?undefined:p.title),3)],2)],2)),createElementVNode("div",{class:normalizeClass(t.actors.container)},[(openBlock(true),createElementBlock(Fragment,null,renderList((f=i.value.state.value)==null?undefined:f.actors,w=>(openBlock(),createElementBlock("div",{key:w.name,class:normalizeClass(t.actors.item)},[w.url?(openBlock(),createElementBlock("a",{key:0,class:normalizeClass(t.actors.content),href:w.url,target:"_blank"},[createElementVNode("div",{class:normalizeClass(t.actors.avatarWrapper)},[createElementVNode("div",{class:normalizeClass(t.actors.avatarContainer)},[createElementVNode("img",{src:w.face||Zt,alt:w.name,class:normalizeClass(t.actors.avatarImage)},null,10,ki)],2),w.sex!==undefined?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([t.actors.sexBadge.base,w.sex===1?t.actors.sexBadge.female:t.actors.sexBadge.male])},toDisplayString(w.sex===1?"♀":"♂"),3)):createCommentVNode("",true)],2),createElementVNode("span",{class:normalizeClass(t.actors.name)},toDisplayString(w.name),3)],10,_i)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(t.actors.content)},[createElementVNode("div",{class:normalizeClass(t.actors.avatarWrapper)},[createElementVNode("div",{class:normalizeClass(t.actors.avatarContainer)},[createElementVNode("img",{src:w.face||Zt,alt:w.name,class:normalizeClass(t.actors.avatarImage)},null,10,xi)],2),w.sex!==undefined?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([t.actors.sexBadge.base,w.sex===1?t.actors.sexBadge.female:t.actors.sexBadge.male])},toDisplayString(w.sex===1?"♀":"♂"),3)):createCommentVNode("",true)],2),createElementVNode("span",{class:normalizeClass(t.actors.name)},toDisplayString(w.name),3)],2))],2))),128))],2),createElementVNode("div",{class:normalizeClass(t.content.container)},[createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 番号 ",2),createElementVNode("span",{class:normalizeClass(t.content.value)},[createElementVNode("a",{href:(v=i.value.state.value)==null?undefined:v.detailUrl,target:"_blank",class:normalizeClass(t.content.link)},toDisplayString(((g=i.value.state.value)==null?undefined:g.avNumber)??"-"),11,Ci),(M=i.value.state.value)!=null&&M.avNumber?(openBlock(),createBlock(wi,{key:0,text:($=i.value.state.value)==null?undefined:$.avNumber},null,8,["text"])):createCommentVNode("",true)],2)],2),createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 日期 ",2),createElementVNode("span",{class:normalizeClass(t.content.value)},toDisplayString(unref(el$1)((y=i.value.state.value)==null?undefined:y.date)??"-"),3)],2),createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 时长 ",2),createElementVNode("span",{class:normalizeClass(t.content.value)},toDisplayString(unref(tl$1)((P=i.value.state.value)==null?undefined:P.duration)??"-"),3)],2),createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 导演 ",2),(x=i.value.state.value)!=null&&x.director?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(t.content.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((b=i.value.state.value)==null?undefined:b.director,w=>(openBlock(),createElementBlock("a",{key:w.name,href:w.url,target:"_blank",class:normalizeClass(t.content.link)},toDisplayString(w.name),11,Pi))),128))],2)):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(t.content.value)},"-",2))],2),createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 片商 ",2),(m=i.value.state.value)!=null&&m.studio?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(t.content.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((k=i.value.state.value)==null?undefined:k.studio,w=>(openBlock(),createElementBlock("a",{key:w.name,href:w.url,target:"_blank",class:normalizeClass(t.content.link)},toDisplayString(w.name),11,$i))),128))],2)):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(t.content.value)},"-",2))],2),createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 系列 ",2),(T=i.value.state.value)!=null&&T.series?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(t.content.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((S=i.value.state.value)==null?undefined:S.series,w=>(openBlock(),createElementBlock("a",{key:w.name,href:w.url,target:"_blank",class:normalizeClass(t.content.badge)},toDisplayString(w.name),11,Ti))),128))],2)):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(t.content.value)},"-",2))],2),createElementVNode("div",{class:normalizeClass(t.content.item)},[createElementVNode("span",{class:normalizeClass(t.content.label)}," 类别 ",2),(E=i.value.state.value)!=null&&E.category?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(t.content.value)},[(openBlock(true),createElementBlock(Fragment,null,renderList((B=i.value.state.value)==null?undefined:B.category,w=>(openBlock(),createElementBlock("a",{key:w.name,href:w.url,target:"_blank",class:normalizeClass(t.content.badge)},toDisplayString(w.name),11,Si))),128))],2)):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(t.content.value)},"-",2))],2)],2),createElementVNode("div",{ref_key:"movieInfoThumb",ref:n,class:normalizeClass(t.thumbnails.container)},[(openBlock(true),createElementBlock(Fragment,null,renderList((R=i.value.state.value)==null?undefined:R.preview,w=>(openBlock(),createElementBlock("a",{key:w.thumbnail,class:normalizeClass(t.thumbnails.item),href:w.raw,target:"_blank"},[createElementVNode("img",{src:w.raw,alt:"thumb",loading:"lazy",class:normalizeClass(t.thumbnails.image)},null,10,Ri)],10,Ii))),128))],2)],64)):(openBlock(),createBlock(Qs$1,{key:2,class:normalizeClass(t.states.empty),description:"暂无影片信息，可能番号无法识别",size:"2xl"},null,8,["class"]))],2)],2)}}}),Mi=["src"],Ai=["title"],Li=1,Oi=defineComponent({__name:"item",props:{item:{},active:{type:Boolean}},emits:["play"],setup(s,{emit:e}){const t=s,n=e,a={item:{base:["flex cursor-pointer break-words hover:bg-base-content/5","rounded-lg","transition-colors duration-200"],active:"bg-primary/10 hover:bg-primary/15"},cover:{container:["relative flex items-center justify-center flex-shrink-0","overflow-hidden rounded-lg","w-50 h-28 aspect-video","before:content-[''] before:absolute before:inset-0 before:bg-black before:rounded-lg"],skeleton:"relative skeleton w-full h-full rounded-lg",imageError:"relative!",image:"relative block w-full h-full object-contain"},duration:{container:["absolute bottom-1.5 right-1.5 rounded-lg","px-1.5 py-1","backdrop-blur-xs","text-xs bg-base-100/60 text-base-content/80"]},mark:{container:["absolute top-1.5 left-1.5 p-0.5","rounded-lg","bg-base-100/60","backdrop-blur-xs"],icon:"size-7 drop-shadow-xs/90"},progress:{container:"absolute bottom-0 right-0 w-full h-1",bar:"absolute top-0 left-0 w-0 h-full bg-primary opacity-80"},info:{container:"flex flex-col justify-between gap-1 p-2.5 px-4",title:"text-sm font-medium break-all leading-6 text-base-content line-clamp-3",titleActive:"text-primary",size:"text-xs text-base-content/60"}},o=shallowRef(),i=computed(()=>({pickCode:t.item.pc,sha1:t.item.sha,coverNum:Li,duration:t.item.play_long})),u={elementRef:o},{videoCover:d}=qc(i,u),p=computed(()=>t.item.current_time/t.item.play_long);function f(v){n("play",v);}return (v,g)=>{var M;return openBlock(),createElementBlock("div",{ref_key:"rootRef",ref:o,class:normalizeClass([a.item.base,{[a.item.active]:t.active}]),onClick:g[0]||(g[0]=$=>f(v.item))},[createElementVNode("div",{class:normalizeClass(a.cover.container)},[unref(d).error?(openBlock(),createBlock(Ar$1,{key:0,class:normalizeClass(a.cover.imageError),message:unref(d).error,size:"mini"},null,8,["class","message"])):unref(d).isLoading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(a.cover.skeleton)},null,2)):unref(d).isReady?(openBlock(),createElementBlock("img",{key:2,src:(M=unref(d).state[0])==null?undefined:M.img,class:normalizeClass(a.cover.image)},null,10,Mi)):(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(a.cover.skeleton)},null,2)),createElementVNode("div",{class:normalizeClass(a.duration.container)},toDisplayString(unref(we)(v.item.play_long)),3),v.item.m?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(a.mark.container)},[createVNode(unref(ho$1),{icon:unref(qd),class:normalizeClass(a.mark.icon)},null,8,["icon","class"])],2)):createCommentVNode("",true),v.item.current_time>0?(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(a.progress.container)},[createElementVNode("div",{class:normalizeClass(a.progress.bar),style:normalizeStyle({width:`${p.value*100}%`})},null,6)],2)):createCommentVNode("",true)],2),createElementVNode("div",{class:normalizeClass(a.info.container)},[createElementVNode("div",{class:normalizeClass([a.info.title,{[a.info.titleActive]:t.active}]),title:v.item.n},toDisplayString(v.item.n),11,Ai),createElementVNode("div",{class:normalizeClass(a.info.size)},toDisplayString(unref(Wd)(v.item.s)),3)],2)],2)}}}),Fi=defineComponent({__name:"index",props:{playlist:{},pickCode:{}},emits:["play","close"],setup(s,{emit:e}){const t=s,n=e,a={playlist:{container:["relative flex flex-col text-white box-border h-full","bg-base-100","border-l border-base-300/15","[--app-playlist-space:calc(var(--spacing)*4)]","[--app-playlist-header-height:calc(var(--spacing)*16)]"],header:{root:["absolute inset-x-0 top-0 z-1","flex items-center justify-between flex-shrink-0","h-(--app-playlist-header-height)","px-(--app-playlist-space) py-4","text-base-content","bg-base-100/60","backdrop-blur-2xl backdrop-saturate-200 backdrop-brightness-50"],title:"flex items-center text-xl gap-2.5",count:"text-xs text-base-content/50",close:"btn btn-ghost btn-circle",closeIcon:"size-8"},content:["flex flex-col gap-5 flex-1","overflow-y-auto","px-(--app-playlist-space) pb-5 pt-[calc(var(--app-playlist-header-height)+var(--spacing)*5)]","[&::-webkit-scrollbar-track]:mt-(--app-playlist-header-height)"],divider:"divider w-1/3 mx-auto text-base-content/30"}},o=ref(null),i=useTemplateRef("playlistItemRefs"),u=shallowRef(false);function d(f){f.pc!==t.pickCode&&n("play",f);}async function p(f=true){if(u.value||(await nextTick(),!i.value))return;u.value=true;const v=i.value.find(T=>T.$props.active);if(!v||!o.value)return;const g=v.$el,M=o.value,$=g.offsetTop,y=g.offsetHeight,P=M.clientHeight,x=M.scrollTop,b=$+y;if($>=x&&b<=x+P&&!f)return;const k=$-(P-y)/2;M.scrollTo({top:Math.max(0,k),behavior:f?"smooth":"instant"});}return watch([()=>t.playlist.state,()=>t.pickCode],()=>p(false),{immediate:true}),(f,v)=>{var g,M,$,y,P,x;return openBlock(),createElementBlock("div",{class:normalizeClass(a.playlist.container)},[createElementVNode("div",{class:normalizeClass(a.playlist.header.root)},[createElementVNode("div",{class:normalizeClass(a.playlist.header.title)},[createVNode(unref(ho$1),{icon:unref(Qd),class:"size-8"},null,8,["icon"]),v[1]||(v[1]=createTextVNode(" 播放列表 ")),(M=(g=f.playlist.state)==null?undefined:g.data)!=null&&M.length&&((y=($=f.playlist.state)==null?undefined:$.data)==null?undefined:y.length)>0?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.playlist.header.count)},"("+toDisplayString((P=f.playlist.state)==null?undefined:P.data.length)+")",3)):createCommentVNode("",true)],2),createElementVNode("button",{class:normalizeClass(a.playlist.header.close)},[createVNode(unref(ho$1),{icon:unref(Yd),class:normalizeClass(a.playlist.header.closeIcon),onClick:v[0]||(v[0]=b=>n("close"))},null,8,["icon","class"])],2)],2),f.playlist.error?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.playlist.content)},[createVNode(Ar$1,{message:f.playlist.error},null,8,["message"])],2)):f.playlist.isLoading||!f.playlist.isLoading&&!f.playlist.isReady?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(a.playlist.content)},v[2]||(v[2]=[createElementVNode("div",{class:"skeleton h-24 w-full rounded-lg"},null,-1)]),2)):(openBlock(),createElementBlock("div",{key:2,ref_key:"playlistRef",ref:o,class:normalizeClass(["custom-scrollbar",[a.playlist.content]])},[(openBlock(true),createElementBlock(Fragment,null,renderList((x=f.playlist.state)==null?undefined:x.data,b=>(openBlock(),createBlock(Oi,{ref_for:true,ref_key:"playlistItemRefs",ref:i,key:b.pc,item:b,active:b.pc===f.pickCode,onPlay:d},null,8,["item","active"]))),128)),createElementVNode("div",{class:normalizeClass(a.playlist.divider)}," 没有更多了 ",2)],2))],2)}}});function Bi(){const s=Oi$1(async e=>await St$1.webApiGetFilesVideo({pickcode:e,share_id:"0",local:"1"}),{},{immediate:false});return reactive(s)}function Ni(){const s=shallowRef(false),e=shallowRef(""),t=shallowRef(0),n=async d=>{!s.value||!e.value||St$1.webApiPostWebApiFilesHistory({op:"update",pick_code:e.value,share_id:"0",category:"1",definition:"0",time:d});},a=Ai$1(async d=>{await n(d);},5e3),o=_i$1(async d=>{await n(d);},2e3),i=async d=>{e.value=d;try{const p=await St$1.webApiGetWebApiFilesHistory({fetch:"one",pick_code:e.value,share_id:"0",category:"1"});Number.isNaN(p.data.time)||(t.value=Number(p.data.time??0));}finally{s.value=true;}},u=()=>{s.value=false,e.value="",t.value=0;};return onUnmounted(()=>{s.value=false;}),{isinit:s,lastTime:t,handleTimeupdate:a,handleSeek:o,fetch:i,clear:u}}var _e;(function(s){s.Mark="1",s.Unmark="0";})(_e||(_e={}));function Vi(s){const e=shallowRef(null),t=async()=>{(await St$1.webApiPostFilesStar({file_id:s.state.file_id,star:e.value?_e.Unmark:_e.Mark})).state&&(e.value=!e.value);};return watch(()=>s.state.is_mark,n=>{e.value=n!==undefined?n===_e.Mark:null;}),{toggleMark:t,isMark:e}}function Di(){const s=new ll$1,e=new sl$1,t=Oi$1(async a=>{if(!a)return null;const o=await s.getInfo(a);return await Xr$1(1e3),o},undefined,{immediate:false});return {javBusState:Oi$1(async a=>a?e.getInfo(a):null,undefined,{immediate:false}),javDBState:t}}function ji(){const s=Oi$1(async a=>await St$1.getPlaylist(a),null,{immediate:false}),e=(a,o)=>{if(!s.state.value)return;const i=s.state.value.data.findIndex(u=>u.pc===a);i!==-1&&(s.state.value.data[i]={...s.state.value.data[i],...o});};return reactive({...s,updateItemTime:(a,o)=>{e(a,{current_time:o});},updateItemMark:(a,o)=>{e(a,{m:o?1:0});}})}function Ui(){return jd("x-player-preferences",{volume:100,muted:true,playbackRate:1,showPlaylist:false,autoLoadThumbnails:true,disabledHDR:false,thumbnailsSamplingInterval:60,autoPlay:true},undefined,{listenToStorageChanges:false})}function Hi(s,e,t){const n=e-s,a=[];for(let o=0;o<n;o+=t)a.push(o);return a}function zi(s,e){const t=new Set(s),n=new Set(e);let a=0;for(const i of t)n.has(i)&&a++;const o=t.size+n.size-a;return o===0?0:a/o}function ea(s,e){return zi(s.split(""),e.split(""))}function qi(s){let e=`WEBVTT

`;return s.split(/\n\s*\n/).forEach(n=>{if(!n.trim())return;const a=n.trim().split(`
`);if(a.length<2)return;let o=0;for(let d=0;d<a.length;d++)if(a[d].match(/^\d{2}:\d{2}:\d{2}[,.]\d{3}\s*-->\s*\d{2}:\d{2}:\d{2}[,.]\d{3}$/)){o=d;break}if(o===0&&!a[0].match(/^\d{2}:\d{2}:\d{2}[,.]\d{3}\s*-->\s*\d{2}:\d{2}:\d{2}[,.]\d{3}$/)&&(o=1),o>=a.length)return;const i=a[o].replace(/,/g,"."),u=a.slice(o+1).join(`
`);u.trim()&&(e+=`${i}
${u}

`);}),e}function ta(s){const e=new Blob([s],{type:"text/vtt; charset=utf-8"});return URL.createObjectURL(e)}function Wi(){const s=async a=>{if(!a)return [];try{let o=!1;const u=await(await Ld.get(ge(`/api/subtitles/variants/${encodeURIComponent(a)}`),{headers:xe(),timeout:2e4})).json(),d=Array.isArray(u==null?void 0:u.variants)?u.variants:[];try{console.debug("[backend variants]",d.map(g=>({vid:(g==null?void 0:g.video_id)||(g==null?void 0:g.vid)||(g==null?void 0:g.id),is_paid:!!((g==null?void 0:g.paid)??(g==null?void 0:g.is_paid)??(g==null?void 0:g.premium)??!1)}))),window.__backendVariants=d;}catch{}const f=(await Promise.all(d.map(async g=>{var S,E,B,R;const M=(g==null?void 0:g.video_id)||(g==null?void 0:g.vid)||(g==null?void 0:g.id)||String(g);if(!M)return;const $=!!((g==null?void 0:g.paid)??(g==null?void 0:g.is_paid)??(g==null?void 0:g.premium)??!1),y=Ce.value==="paid",P=await Ld.get(ge(`/api/subtitle/${encodeURIComponent(M)}`),{headers:xe(),timeout:2e4}),x=(E=(S=P.headers)==null?void 0:S.get)==null?void 0:E.call(S,"X-Subtitle-Limit-Reached"),b=(R=(B=P.headers)==null?void 0:B.get)==null?void 0:R.call(B,"X-Subtitle-Limit-Category");if(P.status===429&&String(x)==="true"){try{o||(o=!0,window.dispatchEvent(new CustomEvent("subtitle-limit-reached",{detail:{category:String(b||"").toLowerCase()}})));}catch{}return}const m=await P.text();let k;$?k=`字幕${M}(${y?"已解锁":"未解锁"})`:k=`字幕${M}(免费)`;const T={id:M,url:ta(m),label:k,srclang:(g==null?void 0:g.language)||"zh-CN",source:"Backend",paid:$,kind:"subtitles"};try{console.debug("[backend item]",{id:T.id,label:T.label,source:T.source,paid:T.paid});}catch{}return T}))).filter(Boolean),v=new Map;for(const g of f)v.has(g.id)||v.set(g.id,g);try{window.__backendItems=Array.from(v.values());}catch{}return Array.from(v.values())}catch(o){return console.warn("getFromBackend error:",o),[]}},e=async a=>{const o=await St$1.webApiGetMoviesSubtitle({pickcode:a});return Promise.all(o.data.list.map(async i=>{const u=new URL(i.url);u.protocol="https://";const d=await se.get(u.href);return {id:i.sid,url:ta(qi(await d.text())),label:`${i.title}`,source:i.file_id?"115网盘":"Built-in",srclang:i.language||"zh-CN",kind:"subtitles"}}))},t=(a,o)=>a.sort((i,u)=>{const d=ea(i.label,o);return ea(u.label,o)-d});return Oi$1(async(a,o,i)=>{const u=await Pd.getPreference(a),d=await s(i),p=await e(a);return [...t(d,o),...t(p,o)].map(f=>({...f,default:u?u.id===f.id:false}))},[],{immediate:false})}const aa={maxWidth:320,maxHeight:320},Fa={buffer:{name:"buffer",priority:2,maxConcurrent:4}},Gi={maxConcurrent:4,maxQueueLength:1e3,laneConfig:Fa},na=30;function Ki(s){let e;const t=new Dc(Gi),n=shallowRef(false),a=shallowRef(false),o=shallowRef(na),i=new Map,u=shallowRef({error:undefined}),d=y=>{let P=null;return y.forEach(x=>{x.type==="hls"&&(!P||x.quality<P.quality)&&(P=x);}),P},p=async(y,P)=>{try{n.value=!1;const x=d(y);if(!x)throw zn$1.CANNOT_VIDEO_COVER_WITHOUT_TRANSCODING;e=new Nc({url:x.url}),await e.open(),o.value=P??na,n.value=!0;}catch(x){u.value.error=x;}},f=async(y,P)=>{const x=await e.seek(P,true);if(!x)return;const b=qn$1(x.videoFrame.displayWidth,x.videoFrame.displayHeight,aa.maxWidth,aa.maxHeight),k={img:await createImageBitmap(x.videoFrame,{resizeQuality:"pixelated",resizeWidth:b.width,resizeHeight:b.height}),seekTime:y,seekBlurTime:P,frameTime:x.frameTime,consumedTime:x.consumedTime};return i.set(P,k),k},v=async({time:y,isLast:P})=>{if(u.value.error)throw u.value.error;if(!n||Number.isNaN(y))return;const x=Sd(y,o.value,e.hlsIo.duration),b=i.get(x);if(b)return b;if(P)return await f(y,x)},g=async()=>{if(u.value.error)throw u.value.error;if(s.value.autoLoadThumbnails===false||a.value)return;a.value=true;const y=shuffle(Hi(0,e.hlsIo.duration,o.value).filter(P=>!i.has(P)));for(const P of y)t.add(async()=>{const x=Sd(P,o.value,e.hlsIo.duration);return i.has(x)?null:await f(P,x)},{id:P.toString(),lane:Fa.buffer.name,priority:1,immediate:true,action:"unshift"}).catch(x=>{if(x instanceof ae$1.QueueCleared)throw x});},M=()=>{i.forEach(y=>{var P;(P=y==null?undefined:y.img)==null||P.close();}),i.clear();},$=()=>{e.destroy(),t.clear(),M(),n.value=false,a.value=false;};return Nd(()=>{$();}),{isInited:n,isAutoBufferExecuted:a,initialize:p,autoBuffer:g,onThumbnailRequest:v,clear:$}}function Yi(s){return new URL(s).pathname.split(".").pop()}function Xi(){const s=ref([]);return {list:s,fetch:async n=>{const[a,o]=await Promise.allSettled([St$1.getFileDownloadUrl(n),St$1.getM3u8(n)]);if(a.status==="fulfilled"){if(a.value.url.auth_cookie){console.warn("设置cookie",a.value.url.auth_cookie);try{await Xd({name:a.value.url.auth_cookie.name,value:a.value.url.auth_cookie.value,path:"/",domain:".115cdn.net",secure:!0,expirationDate:Number(a.value.url.auth_cookie.expire),sameSite:"no_restriction"});}catch(u){throw alert("设置cookie失败，请升级浏览器和油猴版本"),u}}const i=Yi(a.value.url.url)??pt.unknown;s.value.unshift({name:"Ultra",url:a.value.url.url,type:"auto",extension:i,quality:99999,displayQuality:"Ultra"});}o.status==="fulfilled"?s.value.push(...o.value.map(i=>({name:`${i.quality}P`,url:i.url,type:"hls",extension:pt.m3u8,quality:i.quality,displayQuality:Td[i.quality]}))):console.error("m3u8",o.reason);},clear:()=>{s.value=[];}}}const Qi=["checked"],Ji=["src"],cu=exports("default", defineComponent({__name:"index",setup(s){const e={container:{main:["flex flex-col items-center","min-h-screen gap-5","bg-base-100 text-gray-100","sm:[--app-xplayer-ratio:0.3] md:[--app-xplayer-ratio:0.518] lg:[--app-xplayer-ratio:0.618] 2xl:[--app-xplayer-ratio:0.718]","[--app-playlist-ratio:calc(1-var(--app-xplayer-ratio))]","[--app-xplayer-width:calc(100%*var(--app-xplayer-ratio))]","[--app-playlist-width:calc(100%*var(--app-playlist-ratio))]"],showPlaylist:"show-playlist",pageMain:["relative w-full h-screen overflow-hidden"],pageFlow:"flex flex-col gap-8 px-6 xl:px-36 py-8 w-full"},drawer:{main:"drawer drawer-end",content:"drawer-content",side:"drawer-side",overlay:"drawer-overlay",toggle:"drawer-toggle"},player:{container:"relative w-full h-screen flex items-center justify-center transition-all duration-200 ease-in-out transform-gpu",containerFold:"w-(--app-xplayer-width)!",video:"absolute m-auto w-full h-full overflow-hidden"},playlist:"w-(--app-playlist-width)!",controls:{btn:Cl.btn,iinaIcon:"size-8 grayscale invert contrast-200"}},t=ref(),n=Ui(),a=ci(),o=Xi(),i=Ki(n),u=Wi(),d=Di(),p=Bi(),f=ji(),v=Ni(),g=Vi(p),M=shallowRef(false),$=computed(()=>{var w,_;return {width:Number((w=p.state)==null?undefined:w.width)??1920,height:Number((_=p.state)==null?undefined:_.height)??1080}}),y=computed(()=>$.value.width/$.value.height),P=computed(()=>y.value<1?"1/1":y.value>1.78?"16/10":`${$.value.width} / ${$.value.height}`);async function x(w){await Pd.savePreference(a.pickCode.value??"",w||null);}async function b(w){var A;if(!a.pickCode.value)throw new Error("pickCode is required");const _=await St$1.getFileDownloadUrl(a.pickCode.value);switch(w){case "mpv":open(Kd(_));break;case "iina":(A=t.value)==null||A.interruptSource(),setTimeout(()=>{open(yl$1(_));},300);break}}async function m(w){try{if(M.value=!0,!a.cid.value)throw new Error("cid is required");mr$1({cid:a.cid.value,pickCode:w.pc}),a.getParams(),o.clear(),i.clear(),v.clear(),u.execute(0,a.pickCode.value,p.state.file_name,null),await nextTick(),await B(!1);}finally{M.value=false;}}function k(){i.autoBuffer();}function T(w){if(!M.value&&v.isinit.value&&!(w<=0)){if(v.handleTimeupdate(w),!a.pickCode.value)throw new Error("pickCode is required");f.updateItemTime(a.pickCode.value,w);}}function S(){n.value.showPlaylist=false;}function E(){n.value.showPlaylist=!n.value.showPlaylist;}async function B(w=true){if(!a.pickCode.value)throw new Error("pickCode is required");if(!a.cid.value)throw new Error("cid is required");try{await v.fetch(a.pickCode.value);}catch(_){console.error(_);}o.fetch(a.pickCode.value).then(()=>{i.initialize(o.list.value,n.value.thumbnailsSamplingInterval);}),p.execute(0,a.pickCode.value).then(_=>{const A=Oa$1(_.file_name);Fd(p.state.file_name||""),A&&(d.javDBState.execute(0,A),d.javBusState.execute(0,A)),u.execute(0,a.pickCode.value,_.file_name,A);}),w&&f.execute(0,a.cid.value);}onMounted(async()=>{await B();const w=()=>{try{if(a.pickCode.value&&p.state.file_name){const _=Oa$1(p.state.file_name);u.execute(0,a.pickCode.value,p.state.file_name,_);}}catch(_){console.error("刷新后端字幕失败",_);}};window.addEventListener("backend-auth-changed",w),onUnmounted(()=>{window.removeEventListener("backend-auth-changed",w);});});async function R(){await g.toggleMark(),f.updateItemMark(p.state.pick_code,!!g.isMark.value);}return (w,_)=>(openBlock(),createElementBlock("div",{class:normalizeClass(e.container.main)},[createElementVNode("div",{class:normalizeClass(e.drawer.main)},[createElementVNode("input",{id:"playlist-drawer",type:"checkbox",class:normalizeClass(e.drawer.toggle),checked:unref(n).showPlaylist,onChange:E},null,42,Qi),createElementVNode("div",{class:normalizeClass(e.drawer.content)},[createElementVNode("div",{class:normalizeClass(e.container.pageMain)},[createElementVNode("div",{class:normalizeClass([e.player.container,unref(n).showPlaylist&&e.player.containerFold])},[createVNode(ui,{ref_key:"xplayerRef",ref:t,"show-playlist":unref(n).showPlaylist,"onUpdate:showPlaylist":_[1]||(_[1]=A=>unref(n).showPlaylist=A),volume:unref(n).volume,"onUpdate:volume":_[2]||(_[2]=A=>unref(n).volume=A),muted:unref(n).muted,"onUpdate:muted":_[3]||(_[3]=A=>unref(n).muted=A),"playback-rate":unref(n).playbackRate,"onUpdate:playbackRate":_[4]||(_[4]=A=>unref(n).playbackRate=A),"auto-load-thumbnails":unref(n).autoLoadThumbnails,"onUpdate:autoLoadThumbnails":_[5]||(_[5]=A=>unref(n).autoLoadThumbnails=A),"disabled-h-d-r":unref(n).disabledHDR,"onUpdate:disabledHDR":_[6]||(_[6]=A=>unref(n).disabledHDR=A),"thumbnails-sampling-interval":unref(n).thumbnailsSamplingInterval,"onUpdate:thumbnailsSamplingInterval":_[7]||(_[7]=A=>unref(n).thumbnailsSamplingInterval=A),"auto-play":unref(n).autoPlay,"onUpdate:autoPlay":_[8]||(_[8]=A=>unref(n).autoPlay=A),class:normalizeClass([e.player.video]),style:normalizeStyle({aspectRatio:P.value}),sources:unref(o).list,subtitles:unref(u).state,"last-time":unref(v).lastTime.value,"subtitles-loading":unref(u).isLoading,"subtitles-ready":unref(u).isReady,"on-thumbnail-request":unref(i).onThumbnailRequest,"on-subtitle-change":x,"on-timeupdate":T,"on-seeking":unref(v).handleSeek,"on-seeked":unref(v).handleSeek,"on-canplay":k},{headerLeft:withCtx(()=>[createVNode(gi,{"file-info":unref(p),playlist:unref(f)},null,8,["file-info","playlist"])]),controlsRight:withCtx(()=>[createElementVNode("label",{for:"playlist-drawer",class:normalizeClass([e.controls.btn.root,unref(n).showPlaylist&&"btn-active btn-primary"]),"data-tip":"播放列表(B)"},[createVNode(unref(ho$1),{icon:unref(Qd),class:normalizeClass([e.controls.btn.icon])},null,8,["icon","class"])],2),unref(p).isReady?(openBlock(),createElementBlock("button",{key:0,class:normalizeClass(["swap swap-rotate",[e.controls.btn.root,{"swap-active":!unref(g).isMark.value}]]),"data-tip":"收藏",onClick:R},[createVNode(unref(ho$1),{class:normalizeClass(["swap-off",[e.controls.btn.icon]]),icon:unref(qd)},null,8,["class","icon"]),createVNode(unref(ho$1),{class:normalizeClass(["swap-on",[e.controls.btn.icon]]),icon:unref(Vd)},null,8,["class","icon"])],2)):createCommentVNode("",true),unref(ri$1)&&unref(p).isReady?(openBlock(),createElementBlock("button",{key:1,class:normalizeClass(e.controls.btn.root),"data-tip":"IINA",onClick:_[0]||(_[0]=A=>b("iina"))},[createElementVNode("img",{class:normalizeClass(e.controls.iinaIcon),src:unref(wl$1),alt:"IINA"},null,10,Ji)],2)):createCommentVNode("",true)]),aboutContent:withCtx(()=>[createVNode(vi)]),_:1},8,["show-playlist","volume","muted","playback-rate","auto-load-thumbnails","disabled-h-d-r","thumbnails-sampling-interval","auto-play","class","style","sources","subtitles","last-time","subtitles-loading","subtitles-ready","on-thumbnail-request","on-seeking","on-seeked"])],2)],2),unref(Ta$1)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.container.pageFlow)},[createVNode(Ei,{"movie-infos":unref(d)},null,8,["movie-infos"])],2)):createCommentVNode("",true)],2),createElementVNode("div",{class:normalizeClass(e.drawer.side)},[createElementVNode("label",{for:"playlist-drawer","aria-label":"close sidebar",class:normalizeClass(e.drawer.overlay)},null,2),createVNode(Fi,{class:normalizeClass(e.playlist),"pick-code":unref(a).pickCode.value,playlist:unref(f),visible:unref(n).showPlaylist,onPlay:m,onClose:S},null,8,["class","pick-code","playlist","visible"])],2)],2)],2))}}));

    })
  };
}));

System.import("./__entry.js", "./");
